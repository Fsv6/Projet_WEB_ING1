{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, TransitionGroup as _TransitionGroup, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"history-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_3 = {\n  class: \"filters-container\"\n};\nconst _hoisted_4 = {\n  class: \"search-box\"\n};\nconst _hoisted_5 = {\n  class: \"category-filter\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  key: 1,\n  class: \"active-filter-indicator\"\n};\nconst _hoisted_8 = {\n  key: 2,\n  class: \"no-results\"\n};\nconst _hoisted_9 = {\n  class: \"no-results\"\n};\nconst _hoisted_10 = {\n  class: \"users-container\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"user-info\"\n};\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  class: \"user-details\"\n};\nconst _hoisted_15 = {\n  class: \"action-count\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"categories-container\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = {\n  class: \"category-info\"\n};\nconst _hoisted_19 = {\n  class: \"category-details\"\n};\nconst _hoisted_20 = {\n  class: \"category-count\"\n};\nconst _hoisted_21 = {\n  class: \"category-meta\"\n};\nconst _hoisted_22 = {\n  class: \"last-update-date\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"timeline-container\"\n};\nconst _hoisted_24 = {\n  class: \"timeline\"\n};\nconst _hoisted_25 = {\n  class: \"timeline-content\"\n};\nconst _hoisted_26 = {\n  class: \"action-header\"\n};\nconst _hoisted_27 = {\n  class: \"action-date\"\n};\nconst _hoisted_28 = {\n  key: 0,\n  class: \"action-details\"\n};\nconst _hoisted_29 = {\n  class: \"detail-label\"\n};\nconst _hoisted_30 = {\n  class: \"detail-value\"\n};\nconst _hoisted_31 = {\n  class: \"action-meta\"\n};\nconst _hoisted_32 = {\n  key: 0,\n  class: \"meta-item\"\n};\nconst _hoisted_33 = {\n  key: 1,\n  class: \"meta-item\"\n};\nconst _hoisted_34 = {\n  key: 4,\n  class: \"pagination\"\n};\nconst _hoisted_35 = [\"disabled\"];\nconst _hoisted_36 = {\n  class: \"page-info\"\n};\nconst _hoisted_37 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppLayout = _resolveComponent(\"AppLayout\");\n  return _openBlock(), _createBlock(_component_AppLayout, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[24] || (_cache[24] = _createElementVNode(\"h1\", {\n      class: \"page-title\"\n    }, \"Historique des actions\", -1 /* HOISTED */)), _createCommentVNode(\" Message d'erreur \"), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"i\", {\n      class: \"fas fa-exclamation-triangle\"\n    }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($setup.errorMessage), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Filtres et recherche \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchTerm = $event),\n      placeholder: \"Rechercher...\",\n      onInput: _cache[1] || (_cache[1] = (...args) => $setup.debounceSearch && $setup.debounceSearch(...args))\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.searchTerm]]), _cache[9] || (_cache[9] = _createElementVNode(\"i\", {\n      class: \"fas fa-search search-icon\"\n    }, null, -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.selectedCategory = $event),\n      onChange: _cache[3] || (_cache[3] = $event => $setup.debounceSearch())\n    }, [_cache[10] || (_cache[10] = _createElementVNode(\"option\", {\n      value: \"\"\n    }, \"Toutes les catégories\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.actionCategories, cat => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: cat,\n        value: cat\n      }, _toDisplayString($setup.formatAction(cat)), 9 /* TEXT, PROPS */, _hoisted_6);\n    }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedCategory]])])]), _createCommentVNode(\" Indication du filtre actif \"), $setup.selectedCategory ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_cache[12] || (_cache[12] = _createElementVNode(\"i\", {\n      class: \"fas fa-filter\"\n    }, null, -1 /* HOISTED */)), _cache[13] || (_cache[13] = _createTextVNode(\" Filtre actif: \")), _createElementVNode(\"strong\", null, _toDisplayString($setup.formatAction($setup.selectedCategory)), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"clear-filter-btn\",\n      onClick: _cache[4] || (_cache[4] = (...args) => $setup.clearFilter && $setup.clearFilter(...args))\n    }, _cache[11] || (_cache[11] = [_createElementVNode(\"i\", {\n      class: \"fas fa-times\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" Effacer \")]))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Affichage du message si aucun résultat \"), $setup.logs.length === 0 && !$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _cache[14] || (_cache[14] = [_createElementVNode(\"p\", null, \"Aucun résultat ne correspond à votre recherche\", -1 /* HOISTED */)]))) : $setup.groupedByUser.length === 0 && !$setup.loading ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 3\n    }, [_createCommentVNode(\" Message si aucun résultat après filtrage \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, [_cache[15] || (_cache[15] = _createElementVNode(\"i\", {\n      class: \"fas fa-exclamation-circle\"\n    }, null, -1 /* HOISTED */)), _cache[16] || (_cache[16] = _createTextVNode(\" Aucune action de type \")), _createElementVNode(\"strong\", null, _toDisplayString($setup.formatAction($setup.selectedCategory)), 1 /* TEXT */), _cache[17] || (_cache[17] = _createTextVNode(\" n'a été trouvée \"))]), _createElementVNode(\"button\", {\n      class: \"reset-filter-btn\",\n      onClick: _cache[5] || (_cache[5] = (...args) => $setup.clearFilter && $setup.clearFilter(...args))\n    }, \" Réinitialiser le filtre \")])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Liste des utilisateurs \"), _createElementVNode(\"div\", _hoisted_10, [_createVNode(_TransitionGroup, {\n      name: \"user-list\",\n      tag: \"div\",\n      class: \"users-wrapper\"\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.displayedUsers, userHistory => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: userHistory.user.email,\n          class: \"user-card\"\n        }, [_createElementVNode(\"div\", {\n          class: \"user-header\",\n          onClick: $event => $setup.toggleUser(userHistory.user.email)\n        }, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"img\", {\n          src: $setup.getPhotoUrl(userHistory.user.photo, userHistory.user._id),\n          class: \"user-avatar\",\n          alt: \"Avatar\"\n        }, null, 8 /* PROPS */, _hoisted_13), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"h3\", null, _toDisplayString(userHistory.user.email), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_15, _toDisplayString($setup.getActionsToday(userHistory.user.email)) + \" action(s) aujourd'hui \", 1 /* TEXT */)])]), _createElementVNode(\"div\", {\n          class: _normalizeClass([\"expand-button\", {\n            'expanded': $setup.expandedUsers.includes(userHistory.user.email)\n          }])\n        }, [...(_cache[18] || (_cache[18] = [_createElementVNode(\"i\", {\n          class: \"fas fa-chevron-down\"\n        }, null, -1 /* HOISTED */)]))], 2 /* CLASS */)], 8 /* PROPS */, _hoisted_11), _createCommentVNode(\" Catégories d'actions de l'utilisateur \"), $setup.expandedUsers.includes(userHistory.user.email) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createVNode(_TransitionGroup, {\n          name: \"category-list\",\n          tag: \"div\",\n          class: \"categories-wrapper\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(userHistory.categories, (actions, category) => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: category,\n              class: \"category-section\"\n            }, [_createElementVNode(\"div\", {\n              class: \"category-header\",\n              onClick: $event => $setup.toggleCategory(userHistory.user.email, category)\n            }, [_createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"span\", {\n              class: _normalizeClass(['category-icon', $setup.getActionClass(category)])\n            }, [_createElementVNode(\"i\", {\n              class: _normalizeClass($setup.getCategoryIcon(category))\n            }, null, 2 /* CLASS */)], 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"h4\", null, _toDisplayString($setup.formatAction(category)), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_20, _toDisplayString(actions.length) + \" action(s)\", 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"span\", _hoisted_22, \"Dernière action: \" + _toDisplayString($setup.formatDate(actions[0].date)), 1 /* TEXT */), _createElementVNode(\"div\", {\n              class: _normalizeClass([\"expand-button\", {\n                'expanded': $setup.isExpandedCategory(userHistory.user.email, category)\n              }])\n            }, [...(_cache[19] || (_cache[19] = [_createElementVNode(\"i\", {\n              class: \"fas fa-chevron-down\"\n            }, null, -1 /* HOISTED */)]))], 2 /* CLASS */)])], 8 /* PROPS */, _hoisted_17), _createCommentVNode(\" Timeline des actions de la catégorie \"), _createVNode(_Transition, {\n              name: \"timeline\"\n            }, {\n              default: _withCtx(() => [$setup.isExpandedCategory(userHistory.user.email, category) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(actions, action => {\n                return _openBlock(), _createElementBlock(\"div\", {\n                  key: action._id,\n                  class: \"timeline-item\"\n                }, [_createElementVNode(\"div\", {\n                  class: _normalizeClass([\"timeline-point\", $setup.getActionClass(category)])\n                }, null, 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"span\", _hoisted_27, _toDisplayString($setup.formatDate(action.date)), 1 /* TEXT */)]), action.details ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(action.details, (value, key) => {\n                  return _openBlock(), _createElementBlock(\"div\", {\n                    key: key,\n                    class: \"detail-item\"\n                  }, [_createElementVNode(\"span\", _hoisted_29, _toDisplayString($setup.formatDetailKey(key)) + \":\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_30, _toDisplayString(value), 1 /* TEXT */)]);\n                }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_31, [action.ip ? (_openBlock(), _createElementBlock(\"span\", _hoisted_32, [_cache[20] || (_cache[20] = _createElementVNode(\"i\", {\n                  class: \"fas fa-network-wired\"\n                }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(action.ip), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), action.userAgent ? (_openBlock(), _createElementBlock(\"span\", _hoisted_33, [_cache[21] || (_cache[21] = _createElementVNode(\"i\", {\n                  class: \"fas fa-laptop\"\n                }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($setup.formatUserAgent(action.userAgent)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])])]);\n              }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */)]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)])) : _createCommentVNode(\"v-if\", true)]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n      _: 1 /* STABLE */\n    })]), _createCommentVNode(\" Pagination \"), $setup.totalUserPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_createElementVNode(\"button\", {\n      disabled: $setup.currentPage === 1,\n      onClick: _cache[6] || (_cache[6] = $event => $setup.changePage($setup.currentPage - 1)),\n      class: \"page-btn\"\n    }, _cache[22] || (_cache[22] = [_createElementVNode(\"i\", {\n      class: \"fas fa-chevron-left\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" Précédent \")]), 8 /* PROPS */, _hoisted_35), _createElementVNode(\"span\", _hoisted_36, \"Page \" + _toDisplayString($setup.currentPage) + \" sur \" + _toDisplayString($setup.totalUserPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n      disabled: $setup.currentPage === $setup.totalUserPages,\n      onClick: _cache[7] || (_cache[7] = $event => $setup.changePage($setup.currentPage + 1)),\n      class: \"page-btn\"\n    }, _cache[23] || (_cache[23] = [_createTextVNode(\" Suivant \"), _createElementVNode(\"i\", {\n      class: \"fas fa-chevron-right\"\n    }, null, -1 /* HOISTED */)]), 8 /* PROPS */, _hoisted_37)])) : _createCommentVNode(\"v-if\", true)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_AppLayout","default","_withCtx","_createElementVNode","_hoisted_1","_createCommentVNode","$setup","errorMessage","_createElementBlock","_hoisted_2","_createTextVNode","_toDisplayString","_hoisted_3","_hoisted_4","type","_cache","$event","searchTerm","placeholder","onInput","args","debounceSearch","_hoisted_5","selectedCategory","onChange","value","_Fragment","_renderList","actionCategories","cat","formatAction","_hoisted_6","_hoisted_7","onClick","clearFilter","logs","length","loading","_hoisted_8","groupedByUser","_hoisted_9","_hoisted_10","_createVNode","_TransitionGroup","name","tag","displayedUsers","userHistory","user","email","toggleUser","_hoisted_12","src","getPhotoUrl","photo","_id","alt","_hoisted_13","_hoisted_14","_hoisted_15","getActionsToday","_normalizeClass","expandedUsers","includes","_hoisted_11","_hoisted_16","categories","actions","category","toggleCategory","_hoisted_18","getActionClass","getCategoryIcon","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","formatDate","date","isExpandedCategory","_hoisted_17","_Transition","_hoisted_23","_hoisted_24","action","_hoisted_25","_hoisted_26","_hoisted_27","details","_hoisted_28","_hoisted_29","formatDetailKey","_hoisted_30","_hoisted_31","ip","_hoisted_32","userAgent","_hoisted_33","formatUserAgent","_","totalUserPages","_hoisted_34","disabled","currentPage","changePage","_hoisted_35","_hoisted_36","_hoisted_37"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\AdminHistory.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"history-container\">\n      <h1 class=\"page-title\">Historique des actions</h1>\n\n      <!-- Message d'erreur -->\n      <div v-if=\"errorMessage\" class=\"error-message\">\n        <i class=\"fas fa-exclamation-triangle\"></i> {{ errorMessage }}\n      </div>\n\n      <!-- Filtres et recherche -->\n      <div class=\"filters-container\">\n        <div class=\"search-box\">\n          <input\n              type=\"text\"\n              v-model=\"searchTerm\"\n              placeholder=\"Rechercher...\"\n              @input=\"debounceSearch\"\n          />\n          <i class=\"fas fa-search search-icon\"></i>\n        </div>\n\n        <div class=\"category-filter\">\n          <select v-model=\"selectedCategory\" @change=\"debounceSearch()\">\n            <option value=\"\">Toutes les catégories</option>\n            <option v-for=\"cat in actionCategories\" :key=\"cat\" :value=\"cat\">\n              {{ formatAction(cat) }}\n            </option>\n          </select>\n        </div>\n      </div>\n\n      <!-- Indication du filtre actif -->\n      <div v-if=\"selectedCategory\" class=\"active-filter-indicator\">\n        <i class=\"fas fa-filter\"></i> Filtre actif: <strong>{{ formatAction(selectedCategory) }}</strong>\n        <button class=\"clear-filter-btn\" @click=\"clearFilter\">\n          <i class=\"fas fa-times\"></i> Effacer\n        </button>\n      </div>\n\n      <!-- Affichage du message si aucun résultat -->\n      <div v-if=\"logs.length === 0 && !loading\" class=\"no-results\">\n        <p>Aucun résultat ne correspond à votre recherche</p>\n      </div>\n\n      <!-- Message si aucun résultat après filtrage -->\n      <div v-else-if=\"groupedByUser.length === 0 && !loading\" class=\"no-results\">\n        <p>\n          <i class=\"fas fa-exclamation-circle\"></i>\n          Aucune action de type <strong>{{ formatAction(selectedCategory) }}</strong> n'a été trouvée\n        </p>\n        <button class=\"reset-filter-btn\" @click=\"clearFilter\">\n          Réinitialiser le filtre\n        </button>\n      </div>\n\n      <!-- Liste des utilisateurs -->\n      <div class=\"users-container\">\n        <transition-group name=\"user-list\" tag=\"div\" class=\"users-wrapper\">\n          <div v-for=\"userHistory in displayedUsers\" :key=\"userHistory.user.email\" class=\"user-card\">\n            <div class=\"user-header\" @click=\"toggleUser(userHistory.user.email)\">\n              <div class=\"user-info\">\n                <img :src=\"getPhotoUrl(userHistory.user.photo, userHistory.user._id)\" class=\"user-avatar\" alt=\"Avatar\">\n                <div class=\"user-details\">\n                  <h3>{{ userHistory.user.email }}</h3>\n                  <span class=\"action-count\">\n                    {{ getActionsToday(userHistory.user.email) }} action(s) aujourd'hui\n                  </span>\n                </div>\n              </div>\n              <div class=\"expand-button\" :class=\"{ 'expanded': expandedUsers.includes(userHistory.user.email) }\">\n                <i class=\"fas fa-chevron-down\"></i>\n              </div>\n            </div>\n\n            <!-- Catégories d'actions de l'utilisateur -->\n            <div v-if=\"expandedUsers.includes(userHistory.user.email)\" class=\"categories-container\">\n              <transition-group name=\"category-list\" tag=\"div\" class=\"categories-wrapper\">\n                <div v-for=\"(actions, category) in userHistory.categories\" :key=\"category\" class=\"category-section\">\n                  <div class=\"category-header\" @click=\"toggleCategory(userHistory.user.email, category)\">\n                    <div class=\"category-info\">\n                      <span :class=\"['category-icon', getActionClass(category)]\">\n                        <i :class=\"getCategoryIcon(category)\"></i>\n                      </span>\n                      <div class=\"category-details\">\n                        <h4>{{ formatAction(category) }}</h4>\n                        <span class=\"category-count\">{{ actions.length }} action(s)</span>\n                      </div>\n                    </div>\n                    <div class=\"category-meta\">\n                      <span class=\"last-update-date\">Dernière action: {{ formatDate(actions[0].date) }}</span>\n                      <div class=\"expand-button\" :class=\"{ 'expanded': isExpandedCategory(userHistory.user.email, category) }\">\n                        <i class=\"fas fa-chevron-down\"></i>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Timeline des actions de la catégorie -->\n                  <transition name=\"timeline\">\n                    <div v-if=\"isExpandedCategory(userHistory.user.email, category)\" class=\"timeline-container\">\n                      <div class=\"timeline\">\n                        <div v-for=\"action in actions\" :key=\"action._id\" class=\"timeline-item\">\n                          <div class=\"timeline-point\" :class=\"getActionClass(category)\"></div>\n                          <div class=\"timeline-content\">\n                            <div class=\"action-header\">\n                              <span class=\"action-date\">{{ formatDate(action.date) }}</span>\n                            </div>\n                            <div class=\"action-details\" v-if=\"action.details\">\n                              <div v-for=\"(value, key) in action.details\" :key=\"key\" class=\"detail-item\">\n                                <span class=\"detail-label\">{{ formatDetailKey(key) }}:</span>\n                                <span class=\"detail-value\">{{ value }}</span>\n                              </div>\n                            </div>\n                            <div class=\"action-meta\">\n                              <span class=\"meta-item\" v-if=\"action.ip\">\n                                <i class=\"fas fa-network-wired\"></i> {{ action.ip }}\n                              </span>\n                              <span class=\"meta-item\" v-if=\"action.userAgent\">\n                                <i class=\"fas fa-laptop\"></i> {{ formatUserAgent(action.userAgent) }}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </transition>\n                </div>\n              </transition-group>\n            </div>\n          </div>\n        </transition-group>\n      </div>\n\n      <!-- Pagination -->\n      <div class=\"pagination\" v-if=\"totalUserPages > 1\">\n        <button\n            :disabled=\"currentPage === 1\"\n            @click=\"changePage(currentPage - 1)\"\n            class=\"page-btn\"\n        >\n          <i class=\"fas fa-chevron-left\"></i> Précédent\n        </button>\n        <span class=\"page-info\">Page {{ currentPage }} sur {{ totalUserPages }}</span>\n        <button\n            :disabled=\"currentPage === totalUserPages\"\n            @click=\"changePage(currentPage + 1)\"\n            class=\"page-btn\"\n        >\n          Suivant <i class=\"fas fa-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script>\nimport { ref, onMounted, computed, watch } from 'vue';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nimport api from '@/services/api';\nimport defaultAvatar from '@/assets/default-avatar.png';\nimport { getPhotoUrl } from '@/utils/photo';\n\nexport default {\n  name: 'AdminHistory',\n  components: {\n    AppLayout\n  },\n  setup() {\n    const logs = ref([]);\n    const allUserActions = ref({}); // Stockage des actions d'aujourd'hui pour tous les utilisateurs\n    const currentPage = ref(1);\n    const totalPages = ref(1);\n    const loading = ref(false);\n    const expandedUsers = ref([]);\n    const expandedCategories = ref(new Map());\n    const searchTerm = ref('');\n    const searchTimeout = ref(null);\n    const usersPerPage = 7; // Nombre d'utilisateurs par page\n    const errorMessage = ref('');\n    const selectedCategory = ref('');\n\n    // Extraire toutes les catégories d'action possibles à partir des logs ou d'une liste statique\n    const actionCategories = [\n      'connexion', 'deconnexion', 'creation_utilisateur', 'modification_utilisateur', 'suppression_utilisateur', 'validation_compte', 'ajout_points',\n      'creation_famille', 'modification_famille', 'suppression_famille', 'ajout_membre_famille', 'retrait_membre_famille',\n      'creation_recette', 'modification_recette', 'suppression_recette', 'notation_recette', 'commentaire_recette',\n      'creation_objet', 'modification_objet', 'suppression_objet', 'utilisation_objet'\n    ];\n\n    // Chargement de toutes les actions d'aujourd'hui pour référence\n    const loadAllTodayActions = async () => {\n      try {\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n\n        const response = await api.get('/history?limit=1000'); // Demander un grand nombre pour avoir toutes les actions\n        const allLogs = response.data.histories || [];\n\n        // Compter les actions d'aujourd'hui par utilisateur\n        const actionsByUser = {};\n\n        allLogs.forEach(log => {\n          if (!log.user) return;\n\n          const actionDate = new Date(log.date);\n          const userEmail = log.user.email;\n\n          if (actionDate >= today) {\n            if (!actionsByUser[userEmail]) {\n              actionsByUser[userEmail] = {\n                count: 0,\n                user: log.user\n              };\n            }\n            actionsByUser[userEmail].count++;\n          }\n        });\n\n        allUserActions.value = actionsByUser;\n      } catch (error) {\n        console.error('Erreur lors du chargement des actions totales:', error);\n      }\n    };\n\n    const loadHistory = async (page = 1) => {\n      try {\n        loading.value = true;\n        errorMessage.value = '';\n        currentPage.value = page;\n\n        const params = new URLSearchParams();\n        params.append('page', page);\n        params.append('limit', 100); // Demander plus d'actions pour avoir assez d'utilisateurs distincts\n\n        if (searchTerm.value) {\n          params.append('search', searchTerm.value);\n        }\n        \n        // Si une catégorie est sélectionnée, l'ajouter comme paramètre\n        // Bien que le filtrage des actions par catégorie soit fait côté client,\n        // informer le backend peut aider à optimiser la requête dans le futur\n        if (selectedCategory.value) {\n          params.append('action', selectedCategory.value);\n        }\n\n        const response = await api.get(`/history?${params.toString()}`);\n        logs.value = response.data.histories || [];\n        totalPages.value = response.data.pagination.pages;\n      } catch (error) {\n        console.error('Erreur lors du chargement de l\\'historique:', error);\n        logs.value = [];\n        errorMessage.value = \"Erreur lors du chargement de l'historique. Veuillez réessayer.\";\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    const debounceSearch = () => {\n      if (searchTimeout.value) {\n        clearTimeout(searchTimeout.value);\n      }\n\n      searchTimeout.value = setTimeout(() => {\n        loadHistory(1); // Retour à la première page lors d'une recherche\n      }, 300); // Délai de 300ms pour éviter trop de requêtes\n    };\n\n    // Grouper les logs par utilisateur\n    const groupedByUser = computed(() => {\n      // Grouper les logs par utilisateur\n      const users = {};\n      logs.value.forEach(log => {\n        if (!log.user) return;\n        const email = log.user.email;\n        \n        // Si une catégorie est sélectionnée et que l'action ne correspond pas, ignorer ce log\n        if (selectedCategory.value && log.action !== selectedCategory.value) return;\n        \n        if (!users[email]) {\n          users[email] = { user: log.user, categories: {} };\n        }\n        \n        if (!users[email].categories[log.action]) {\n          users[email].categories[log.action] = [];\n        }\n        users[email].categories[log.action].push(log);\n      });\n      \n      // Ne retourner que les utilisateurs ayant au moins une action (après filtrage)\n      return Object.values(users).filter(u => Object.keys(u.categories).length > 0);\n    });\n\n    // Nombre total de pages d'utilisateurs (7 utilisateurs par page)\n    const totalUserPages = computed(() => {\n      return Math.ceil(groupedByUser.value.length / usersPerPage);\n    });\n\n    // Utilisateurs à afficher pour la page courante (pagination côté client)\n    const displayedUsers = computed(() => {\n      const start = (currentPage.value - 1) * usersPerPage;\n      const end = start + usersPerPage;\n\n      // S'assurer que nous avons des utilisateurs avec des actions correspondant au filtre\n      const filteredUsers = groupedByUser.value.filter(userHistory => {\n        // Si aucun filtre famille n'est appliqué, afficher cet utilisateur\n        if (!selectedCategory.value) {\n          return true;\n        }\n\n        // Vérifier si l'utilisateur a des actions liées à la famille sélectionnée\n        // (les logs ont déjà été filtrés par le backend, donc si l'utilisateur apparaît,\n        // c'est qu'il a au moins une action liée à cette famille)\n        return Object.values(userHistory.categories).some(actions => actions.length > 0);\n      });\n\n      return filteredUsers.slice(start, end);\n    });\n\n    const getTotalActions = (categories) => {\n      return Object.values(categories).reduce((total, actions) => total + actions.length, 0);\n    };\n\n    const getActionsToday = (userEmail) => {\n      return allUserActions.value[userEmail]?.count || 0;\n    };\n\n    const toggleUser = (userEmail) => {\n      const index = expandedUsers.value.indexOf(userEmail);\n      if (index === -1) {\n        expandedUsers.value.push(userEmail);\n      } else {\n        expandedUsers.value.splice(index, 1);\n        // Fermer toutes les catégories de cet utilisateur\n        expandedCategories.value.delete(userEmail);\n      }\n    };\n\n    const toggleCategory = (userEmail, category) => {\n      if (!expandedCategories.value.has(userEmail)) {\n        expandedCategories.value.set(userEmail, new Set());\n      }\n\n      const userCategories = expandedCategories.value.get(userEmail);\n      if (userCategories.has(category)) {\n        userCategories.delete(category);\n      } else {\n        userCategories.add(category);\n      }\n    };\n\n    const isExpandedCategory = (userEmail, category) => {\n      return expandedCategories.value.has(userEmail) &&\n          expandedCategories.value.get(userEmail).has(category);\n    };\n\n    const getCategoryIcon = (action) => {\n      const icons = {\n        // Utilisateurs\n        'connexion': 'fas fa-sign-in-alt',\n        'deconnexion': 'fas fa-sign-out-alt',\n        'creation_utilisateur': 'fas fa-user-plus',\n        'modification_utilisateur': 'fas fa-user-edit',\n        'suppression_utilisateur': 'fas fa-user-minus',\n        'validation_compte': 'fas fa-user-check',\n        'ajout_points': 'fas fa-star',\n\n        // Familles\n        'creation_famille': 'fas fa-users-cog',\n        'modification_famille': 'fas fa-users-cog',\n        'suppression_famille': 'fas fa-users-slash',\n        'ajout_membre_famille': 'fas fa-user-plus',\n        'retrait_membre_famille': 'fas fa-user-minus',\n\n        // Recettes\n        'creation_recette': 'fas fa-utensils',\n        'modification_recette': 'fas fa-edit',\n        'suppression_recette': 'fas fa-trash-alt',\n        'notation_recette': 'fas fa-star',\n        'commentaire_recette': 'fas fa-comment',\n\n        // Objets/Ingrédients\n        'creation_objet': 'fas fa-plus-circle',\n        'modification_objet': 'fas fa-edit',\n        'suppression_objet': 'fas fa-trash-alt',\n        'utilisation_objet': 'fas fa-hand-pointer'\n      };\n      return icons[action] || 'fas fa-history';\n    };\n\n    const formatDate = (date) => {\n      return new Date(date).toLocaleString('fr-FR', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    };\n\n    const formatAction = (action) => {\n      const actions = {\n        // Utilisateurs\n        'connexion': 'Connexions',\n        'deconnexion': 'Déconnexions',\n        'creation_utilisateur': 'Créations d\\'utilisateurs',\n        'modification_utilisateur': 'Modifications d\\'utilisateurs',\n        'suppression_utilisateur': 'Suppressions d\\'utilisateurs',\n        'validation_compte': 'Validations de compte',\n        'ajout_points': 'Ajouts de points',\n\n        // Familles\n        'creation_famille': 'Créations de familles',\n        'modification_famille': 'Modifications de familles',\n        'suppression_famille': 'Suppressions de familles',\n        'ajout_membre_famille': 'Ajouts de membres',\n        'retrait_membre_famille': 'Retraits de membres',\n\n        // Recettes\n        'creation_recette': 'Créations de recettes',\n        'modification_recette': 'Modifications de recettes',\n        'suppression_recette': 'Suppressions de recettes',\n        'notation_recette': 'Notations de recettes',\n        'commentaire_recette': 'Commentaires de recettes',\n\n        // Objets/Ingrédients\n        'creation_objet': 'Créations d\\'objets',\n        'modification_objet': 'Modifications d\\'objets',\n        'suppression_objet': 'Suppressions d\\'objets',\n        'utilisation_objet': 'Utilisations d\\'objets'\n      };\n      return actions[action] || action;\n    };\n\n    const getActionClass = (action) => {\n      const actionType = action.split('_')[0];\n      const classes = {\n        'connexion': 'action-connexion',\n        'deconnexion': 'action-deconnexion',\n        'creation': 'action-creation',\n        'modification': 'action-modification',\n        'suppression': 'action-suppression',\n        'ajout': 'action-ajout',\n        'retrait': 'action-retrait',\n        'validation': 'action-validation',\n        'notation': 'action-notation',\n        'commentaire': 'action-commentaire',\n        'utilisation': 'action-utilisation'\n      };\n      return classes[actionType] || '';\n    };\n\n    const formatDetailKey = (key) => {\n      return key.charAt(0).toUpperCase() + key.slice(1).replace(/_/g, ' ');\n    };\n\n    const formatUserAgent = (userAgent) => {\n      if (!userAgent) return '';\n      return userAgent.split(' ')[0];\n    };\n\n    const changePage = (page) => {\n      if (page >= 1 && page <= totalUserPages.value) {\n        currentPage.value = page;\n\n        // Si on change de page, on ferme tous les utilisateurs développés\n        expandedUsers.value = [];\n        expandedCategories.value = new Map();\n      }\n    };\n\n    const clearFilter = () => {\n      selectedCategory.value = '';\n      loadHistory(1);\n    };\n\n    onMounted(() => {\n      loadAllTodayActions(); // Charger d'abord toutes les actions d'aujourd'hui\n      loadHistory();\n    });\n\n    // Réinitialiser la page quand les filtres changent\n    watch([selectedCategory, searchTerm], () => {\n      if (currentPage.value !== 1) {\n        currentPage.value = 1;\n      }\n      \n      // Fermer tous les utilisateurs développés quand on change de filtre\n      expandedUsers.value = [];\n      expandedCategories.value = new Map();\n      \n      // Recharger l'historique quand les filtres changent\n      loadHistory(1);\n    });\n\n    return {\n      logs,\n      allUserActions,\n      currentPage,\n      totalPages,\n      totalUserPages,\n      groupedByUser,\n      displayedUsers,\n      expandedUsers,\n      defaultAvatar,\n      formatDate,\n      formatAction,\n      getActionClass,\n      getCategoryIcon,\n      formatDetailKey,\n      formatUserAgent,\n      toggleUser,\n      toggleCategory,\n      isExpandedCategory,\n      getTotalActions,\n      getActionsToday,\n      changePage,\n      searchTerm,\n      debounceSearch,\n      loading,\n      getPhotoUrl,\n      errorMessage,\n      selectedCategory,\n      actionCategories,\n      clearFilter\n    };\n  }\n};\n</script>\n\n<style scoped>\n.history-container {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.page-title {\n  color: #2c5038;\n  margin-bottom: 30px;\n  font-size: 2rem;\n}\n\n/* Styles pour les filtres */\n.filters-container {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 20px;\n  align-items: center;\n  flex-wrap: wrap;\n  flex-direction: row;\n}\n\n.search-box {\n  position: relative;\n  flex: 1;\n  min-width: 200px;\n}\n\n.search-box input {\n  width: 80%;\n  padding: 10px 15px 10px 40px;\n  border: 1px solid #ddd;\n  border-radius: 30px;\n  font-size: 1rem;\n  outline: none;\n  transition: border-color 0.3s;\n}\n\n.search-box input:focus {\n  border-color: #2c5038;\n}\n\n.search-icon {\n  position: absolute;\n  left: 15px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #666;\n}\n\n.category-filter {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.category-filter select {\n  padding: 8px 15px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  outline: none;\n  background-color: white;\n  font-size: 1rem;\n  min-width: 170px;\n}\n\n.users-container {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.user-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  overflow: hidden;\n}\n\n.user-header {\n  padding: 15px 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  background-color: #f8f9fa;\n}\n\n.user-header:hover {\n  background-color: #e9ecef;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.user-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.user-details h3 {\n  margin: 0;\n  font-size: 1.1rem;\n  color: #2c5038;\n}\n\n.action-count {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.categories-container {\n  padding: 15px;\n  background-color: white;\n}\n\n.category-section {\n  margin-bottom: 15px;\n  border: 1px solid #eee;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.category-header {\n  padding: 12px 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  background-color: #fff;\n}\n\n.category-header:hover {\n  background-color: #f8f9fa;\n}\n\n.category-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.category-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1rem;\n}\n\n.category-details h4 {\n  margin: 0;\n  font-size: 1rem;\n  color: #2c5038;\n}\n\n.category-count {\n  font-size: 0.8rem;\n  color: #666;\n}\n\n.category-meta {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.last-update-date {\n  font-size: 0.8rem;\n  color: #888;\n  font-style: italic;\n}\n\n.expand-button {\n  transition: transform 0.3s;\n}\n\n.expand-button.expanded {\n  transform: rotate(180deg);\n}\n\n.timeline-container {\n  padding: 15px;\n  background-color: #f8f9fa;\n}\n\n.timeline {\n  position: relative;\n  padding-left: 30px;\n}\n\n.timeline::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background-color: #ddd;\n}\n\n.timeline-item {\n  position: relative;\n  margin-bottom: 20px;\n}\n\n.timeline-point {\n  position: absolute;\n  left: -34px;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  border: 2px solid white;\n}\n\n.timeline-content {\n  background: white;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.action-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.action-date {\n  font-size: 0.9em;\n  color: #666;\n}\n\n.action-details {\n  margin: 10px 0;\n  font-size: 0.9em;\n}\n\n.detail-item {\n  margin: 5px 0;\n}\n\n.detail-label {\n  font-weight: 500;\n  color: #666;\n}\n\n.action-meta {\n  margin-top: 10px;\n  display: flex;\n  gap: 15px;\n  font-size: 0.85em;\n  color: #666;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n/* Classes pour les différentes actions */\n.action-connexion {\n  color: #4a6fa5;\n  background-color: rgba(74, 111, 165, 0.1);\n}\n\n.action-deconnexion {\n  color: #6c757d;\n  background-color: rgba(108, 117, 125, 0.1);\n}\n\n.action-creation {\n  color: #28a745;\n  background-color: rgba(40, 167, 69, 0.1);\n}\n\n.action-modification {\n  color: #17a2b8;\n  background-color: rgba(23, 162, 184, 0.1);\n}\n\n.action-suppression {\n  color: #dc3545;\n  background-color: rgba(220, 53, 69, 0.1);\n}\n\n.action-ajout, .action-points {\n  color: #ffc107;\n  background-color: rgba(255, 193, 7, 0.1);\n}\n\n.action-retrait {\n  color: #fd7e14;\n  background-color: rgba(253, 126, 20, 0.1);\n}\n\n.action-validation {\n  color: #20c997;\n  background-color: rgba(32, 201, 151, 0.1);\n}\n\n.action-notation {\n  color: #6f42c1;\n  background-color: rgba(111, 66, 193, 0.1);\n}\n\n.action-commentaire {\n  color: #007bff;\n  background-color: rgba(0, 123, 255, 0.1);\n}\n\n.action-utilisation {\n  color: #6610f2;\n  background-color: rgba(102, 16, 242, 0.1);\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n}\n\n.page-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  background-color: #2c5038;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.page-btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.page-info {\n  color: #666;\n}\n\n/* Animation pour l'expansion */\n.timeline-container {\n  transition: all 0.3s ease-in-out;\n}\n\n@media (max-width: 900px) {\n  .filters-container {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 10px;\n  }\n  .search-box, .category-filter {\n    width: 100%;\n    min-width: 0;\n  }\n}\n\n.no-results {\n  background-color: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n  margin: 20px 0;\n  color: #666;\n  font-size: 1.1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 15px;\n}\n\n.no-results i {\n  color: #dc3545;\n  margin-right: 8px;\n}\n\n.reset-filter-btn {\n  background-color: #2c5038;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: background-color 0.2s;\n}\n\n.reset-filter-btn:hover {\n  background-color: #1e3825;\n}\n\n.filtered-indication {\n  font-size: 0.8rem;\n  font-style: italic;\n  color: #666;\n}\n\n.error-message {\n  background: #ffe4e6;\n  color: #b91c1c;\n  border: 1px solid #fca5a5;\n  padding: 12px 18px;\n  border-radius: 8px;\n  margin-bottom: 18px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 1.1rem;\n}\n\n.active-filter-indicator {\n  background-color: #e3f2fd;\n  padding: 10px 15px;\n  border-radius: 6px;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  color: #2c5038;\n  font-size: 0.95rem;\n}\n\n.active-filter-indicator i {\n  margin-right: 8px;\n}\n\n.active-filter-indicator strong {\n  margin: 0 5px;\n}\n\n.clear-filter-btn {\n  margin-left: auto;\n  background-color: transparent;\n  border: none;\n  color: #dc3545;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 0.85rem;\n  padding: 5px 10px;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n}\n\n.clear-filter-btn:hover {\n  background-color: rgba(220, 53, 69, 0.1);\n}\n\n/* Animation pour les changements de filtres */\n.user-list-enter-active, .user-list-leave-active {\n  transition: all 0.5s ease;\n}\n.user-list-enter-from, .user-list-leave-to {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n.category-list-enter-active, .category-list-leave-active {\n  transition: all 0.4s ease;\n}\n.category-list-enter-from, .category-list-leave-to {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n.timeline-enter-active, .timeline-leave-active {\n  transition: all 0.3s;\n  max-height: 1000px;\n}\n.timeline-enter-from, .timeline-leave-to {\n  opacity: 0;\n  max-height: 0;\n  overflow: hidden;\n}\n\n.users-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.categories-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}