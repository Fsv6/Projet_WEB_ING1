{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'EditRecette',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const form = ref({\n      titre: '',\n      description: '',\n      objetsUtilises: []\n    });\n    const ingredients = ref([]);\n    const etapes = ref([]);\n    const newIngredient = ref('');\n    const newEtape = ref('');\n    const allObjects = ref([]);\n    onMounted(async () => {\n      try {\n        const recetteRes = await api.get(`/recettes/${route.params.id}`);\n        const recette = recetteRes.data;\n        form.value = {\n          titre: recette.titre,\n          description: recette.description,\n          objetsUtilises: recette.objetsUtilises.map(o => o._id)\n        };\n        ingredients.value = recette.ingredients || [];\n        etapes.value = recette.etapes || [];\n        const objetsRes = await api.get('/objets');\n        allObjects.value = objetsRes.data;\n      } catch (err) {\n        console.error('Erreur chargement recette :', err);\n      }\n    });\n    const addIngredient = () => {\n      if (newIngredient.value.trim()) {\n        ingredients.value.push(newIngredient.value.trim());\n        newIngredient.value = '';\n      }\n    };\n    const removeIngredient = index => {\n      ingredients.value.splice(index, 1);\n    };\n    const addEtape = () => {\n      if (newEtape.value.trim()) {\n        etapes.value.push(newEtape.value.trim());\n        newEtape.value = '';\n      }\n    };\n    const removeEtape = index => {\n      etapes.value.splice(index, 1);\n    };\n    const updateRecette = async () => {\n      try {\n        const payload = {\n          ...form.value,\n          ingredients: ingredients.value,\n          etapes: etapes.value\n        };\n        await api.put(`/recettes/${route.params.id}`, payload);\n        alert('‚úÖ Recette modifi√©e avec succ√®s !');\n        router.push('/recettes');\n      } catch (err) {\n        alert('‚ùå Erreur lors de la modification');\n        console.error(err);\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      form,\n      ingredients,\n      etapes,\n      newIngredient,\n      newEtape,\n      allObjects,\n      addIngredient,\n      removeIngredient,\n      addEtape,\n      removeEtape,\n      updateRecette,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","api","AppLayout","route","router","form","titre","description","objetsUtilises","ingredients","etapes","newIngredient","newEtape","allObjects","recetteRes","get","params","id","recette","data","value","map","o","_id","objetsRes","err","console","error","addIngredient","trim","push","removeIngredient","index","splice","addEtape","removeEtape","updateRecette","payload","put","alert"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/EditRecette.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport api from '@/services/api'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  titre: '',\r\n  description: '',\r\n  objetsUtilises: []\r\n})\r\n\r\nconst ingredients = ref([])\r\nconst etapes = ref([])\r\nconst newIngredient = ref('')\r\nconst newEtape = ref('')\r\nconst allObjects = ref([])\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const recetteRes = await api.get(`/recettes/${route.params.id}`)\r\n    const recette = recetteRes.data\r\n\r\n    form.value = {\r\n      titre: recette.titre,\r\n      description: recette.description,\r\n      objetsUtilises: recette.objetsUtilises.map(o => o._id)\r\n    }\r\n\r\n    ingredients.value = recette.ingredients || []\r\n    etapes.value = recette.etapes || []\r\n\r\n    const objetsRes = await api.get('/objets')\r\n    allObjects.value = objetsRes.data\r\n  } catch (err) {\r\n    console.error('Erreur chargement recette :', err)\r\n  }\r\n})\r\n\r\nconst addIngredient = () => {\r\n  if (newIngredient.value.trim()) {\r\n    ingredients.value.push(newIngredient.value.trim())\r\n    newIngredient.value = ''\r\n  }\r\n}\r\n\r\nconst removeIngredient = (index) => {\r\n  ingredients.value.splice(index, 1)\r\n}\r\n\r\nconst addEtape = () => {\r\n  if (newEtape.value.trim()) {\r\n    etapes.value.push(newEtape.value.trim())\r\n    newEtape.value = ''\r\n  }\r\n}\r\n\r\nconst removeEtape = (index) => {\r\n  etapes.value.splice(index, 1)\r\n}\r\n\r\nconst updateRecette = async () => {\r\n  try {\r\n    const payload = {\r\n      ...form.value,\r\n      ingredients: ingredients.value,\r\n      etapes: etapes.value\r\n    }\r\n\r\n    await api.put(`/recettes/${route.params.id}`, payload)\r\n    alert('‚úÖ Recette modifi√©e avec succ√®s !')\r\n    router.push('/recettes')\r\n  } catch (err) {\r\n    alert('‚ùå Erreur lors de la modification')\r\n    console.error(err)\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"edit-recette-page\">\r\n      <h2>‚úèÔ∏è Modifier la recette</h2>\r\n      <form @submit.prevent=\"updateRecette\">\r\n        <label>Titre</label>\r\n        <input v-model=\"form.titre\" required />\r\n\r\n        <label>Description</label>\r\n        <textarea v-model=\"form.description\" required></textarea>\r\n\r\n        <label>Objets utilis√©s</label>\r\n        <select v-model=\"form.objetsUtilises\" multiple>\r\n          <option v-for=\"obj in allObjects\" :value=\"obj._id\" :key=\"obj._id\">\r\n            {{ obj.nom }}\r\n          </option>\r\n        </select>\r\n\r\n        <label>Ingr√©dients</label>\r\n        <div class=\"dynamic-list\">\r\n          <input v-model=\"newIngredient\" placeholder=\"Ajouter un ingr√©dient\" />\r\n          <button type=\"button\" @click=\"addIngredient\">‚ûï</button>\r\n          <ul>\r\n            <li v-for=\"(item, i) in ingredients\" :key=\"i\">\r\n              {{ item }}\r\n              <button type=\"button\" @click=\"removeIngredient(i)\">‚ùå</button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <label>√âtapes</label>\r\n        <div class=\"dynamic-list\">\r\n          <input v-model=\"newEtape\" placeholder=\"Ajouter une √©tape\" />\r\n          <button type=\"button\" @click=\"addEtape\">‚ûï</button>\r\n          <ol>\r\n            <li v-for=\"(etape, i) in etapes\" :key=\"i\">\r\n              {{ etape }}\r\n              <button type=\"button\" @click=\"removeEtape(i)\">‚ùå</button>\r\n            </li>\r\n          </ol>\r\n        </div>\r\n\r\n        <button type=\"submit\">üíæ Enregistrer</button>\r\n      </form>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.edit-recette-page {\r\n  max-width: 800px;\r\n  margin: auto;\r\n  padding: 1rem;\r\n}\r\n\r\nform {\r\n  background: white;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.05);\r\n}\r\n\r\ninput, textarea, select {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 10px;\r\n  padding: 8px 12px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n}\r\n\r\n.dynamic-list ul, .dynamic-list ol {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}