{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, withModifiers as _withModifiers, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"edit-recette-page\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  class: \"dynamic-list\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"dynamic-list\"\n};\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"AppLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"‚úèÔ∏è Modifier la recette\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($setup.updateRecette, [\"prevent\"])\n    }, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"Titre\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.titre = $event),\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.titre]]), _cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"Description\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.description = $event),\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.description]]), _cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Objets utilis√©s\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.objetsUtilises = $event),\n      multiple: \"\"\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.allObjects, obj => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        value: obj._id,\n        key: obj._id\n      }, _toDisplayString(obj.nom), 9 /* TEXT, PROPS */, _hoisted_2);\n    }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.objetsUtilises]]), _cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Ingr√©dients\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.newIngredient = $event),\n      placeholder: \"Ajouter un ingr√©dient\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newIngredient]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $setup.addIngredient\n    }, \"‚ûï\"), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ingredients, (item, i) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: i\n      }, [_createTextVNode(_toDisplayString(item) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: $event => $setup.removeIngredient(i)\n      }, \"‚ùå\", 8 /* PROPS */, _hoisted_4)]);\n    }), 128 /* KEYED_FRAGMENT */))])]), _cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"√âtapes\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.newEtape = $event),\n      placeholder: \"Ajouter une √©tape\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newEtape]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $setup.addEtape\n    }, \"‚ûï\"), _createElementVNode(\"ol\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.etapes, (etape, i) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: i\n      }, [_createTextVNode(_toDisplayString(etape) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: $event => $setup.removeEtape(i)\n      }, \"‚ùå\", 8 /* PROPS */, _hoisted_6)]);\n    }), 128 /* KEYED_FRAGMENT */))])]), _cache[10] || (_cache[10] = _createElementVNode(\"button\", {\n      type: \"submit\"\n    }, \"üíæ Enregistrer\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","$setup","default","_withCtx","_createElementVNode","_hoisted_1","onSubmit","_withModifiers","updateRecette","_cache","$event","form","titre","required","description","objetsUtilises","multiple","_createElementBlock","_Fragment","_renderList","allObjects","obj","value","_id","key","nom","_hoisted_2","_hoisted_3","newIngredient","placeholder","type","onClick","addIngredient","ingredients","item","i","_createTextVNode","_toDisplayString","removeIngredient","_hoisted_4","_hoisted_5","newEtape","addEtape","etapes","etape","removeEtape","_hoisted_6","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\EditRecette.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport api from '@/services/api'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  titre: '',\r\n  description: '',\r\n  objetsUtilises: []\r\n})\r\n\r\nconst ingredients = ref([])\r\nconst etapes = ref([])\r\nconst newIngredient = ref('')\r\nconst newEtape = ref('')\r\nconst allObjects = ref([])\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const recetteRes = await api.get(`/recettes/${route.params.id}`)\r\n    const recette = recetteRes.data\r\n\r\n    form.value = {\r\n      titre: recette.titre,\r\n      description: recette.description,\r\n      objetsUtilises: recette.objetsUtilises.map(o => o._id)\r\n    }\r\n\r\n    ingredients.value = recette.ingredients || []\r\n    etapes.value = recette.etapes || []\r\n\r\n    const objetsRes = await api.get('/objets')\r\n    allObjects.value = objetsRes.data\r\n  } catch (err) {\r\n    console.error('Erreur chargement recette :', err)\r\n  }\r\n})\r\n\r\nconst addIngredient = () => {\r\n  if (newIngredient.value.trim()) {\r\n    ingredients.value.push(newIngredient.value.trim())\r\n    newIngredient.value = ''\r\n  }\r\n}\r\n\r\nconst removeIngredient = (index) => {\r\n  ingredients.value.splice(index, 1)\r\n}\r\n\r\nconst addEtape = () => {\r\n  if (newEtape.value.trim()) {\r\n    etapes.value.push(newEtape.value.trim())\r\n    newEtape.value = ''\r\n  }\r\n}\r\n\r\nconst removeEtape = (index) => {\r\n  etapes.value.splice(index, 1)\r\n}\r\n\r\nconst updateRecette = async () => {\r\n  try {\r\n    const payload = {\r\n      ...form.value,\r\n      ingredients: ingredients.value,\r\n      etapes: etapes.value\r\n    }\r\n\r\n    await api.put(`/recettes/${route.params.id}`, payload)\r\n    alert('‚úÖ Recette modifi√©e avec succ√®s !')\r\n    router.push('/recettes')\r\n  } catch (err) {\r\n    alert('‚ùå Erreur lors de la modification')\r\n    console.error(err)\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"edit-recette-page\">\r\n      <h2>‚úèÔ∏è Modifier la recette</h2>\r\n      <form @submit.prevent=\"updateRecette\">\r\n        <label>Titre</label>\r\n        <input v-model=\"form.titre\" required />\r\n\r\n        <label>Description</label>\r\n        <textarea v-model=\"form.description\" required></textarea>\r\n\r\n        <label>Objets utilis√©s</label>\r\n        <select v-model=\"form.objetsUtilises\" multiple>\r\n          <option v-for=\"obj in allObjects\" :value=\"obj._id\" :key=\"obj._id\">\r\n            {{ obj.nom }}\r\n          </option>\r\n        </select>\r\n\r\n        <label>Ingr√©dients</label>\r\n        <div class=\"dynamic-list\">\r\n          <input v-model=\"newIngredient\" placeholder=\"Ajouter un ingr√©dient\" />\r\n          <button type=\"button\" @click=\"addIngredient\">‚ûï</button>\r\n          <ul>\r\n            <li v-for=\"(item, i) in ingredients\" :key=\"i\">\r\n              {{ item }}\r\n              <button type=\"button\" @click=\"removeIngredient(i)\">‚ùå</button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <label>√âtapes</label>\r\n        <div class=\"dynamic-list\">\r\n          <input v-model=\"newEtape\" placeholder=\"Ajouter une √©tape\" />\r\n          <button type=\"button\" @click=\"addEtape\">‚ûï</button>\r\n          <ol>\r\n            <li v-for=\"(etape, i) in etapes\" :key=\"i\">\r\n              {{ etape }}\r\n              <button type=\"button\" @click=\"removeEtape(i)\">‚ùå</button>\r\n            </li>\r\n          </ol>\r\n        </div>\r\n\r\n        <button type=\"submit\">üíæ Enregistrer</button>\r\n      </form>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.edit-recette-page {\r\n  max-width: 800px;\r\n  margin: auto;\r\n  padding: 1rem;\r\n}\r\n\r\nform {\r\n  background: white;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.05);\r\n}\r\n\r\ninput, textarea, select {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 10px;\r\n  padding: 8px 12px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n}\r\n\r\n.dynamic-list ul, .dynamic-list ol {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}