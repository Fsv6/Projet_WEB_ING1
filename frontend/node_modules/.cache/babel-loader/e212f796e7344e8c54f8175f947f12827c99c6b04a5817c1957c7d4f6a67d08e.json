{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nimport { useAuthStore } from '@/stores/auth';\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport defaultAvatar from '@/assets/default-avatar.png';\nexport default {\n  name: 'AccueilAdminPage',\n  components: {\n    AppLayout\n  },\n  setup() {\n    const auth = useAuthStore();\n    const router = useRouter();\n    const userData = ref(null);\n    const loading = ref(false);\n    const recentActions = ref([]);\n    const stats = ref({\n      usersCount: 0,\n      newUsers: 0,\n      familiesCount: 0,\n      activeWithPoints: 0,\n      actionsCount: 0,\n      todayActions: 0,\n      totalPoints: 0,\n      pointsDistributed: 0,\n      usersByLevel: {\n        'débutant': 0,\n        'intermédiaire': 0,\n        'avancé': 0,\n        'expert': 0\n      },\n      actionsByDayTime: Array(7).fill().map(() => Array(3).fill(0))\n    });\n    const loadUserData = async () => {\n      try {\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        if (!storedUser || storedUser.role !== 'admin') {\n          router.push('/login');\n          return;\n        }\n\n        // Vérifier que le token est présent\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('Token manquant');\n        }\n\n        // Configuration de l'en-tête d'autorisation\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Charger les données complètes de l'utilisateur depuis l'API\n        const response = await api.get(`/users/me`);\n        console.log('Réponse API:', response.data); // Pour le débogage\n\n        userData.value = {\n          ...response.data,\n          nom: response.data.personne?.nom || storedUser.nom,\n          prenom: response.data.personne?.prenom || storedUser.prenom,\n          email: response.data.email || storedUser.email,\n          photo_profil: response.data.photo_profil || defaultAvatar\n        };\n      } catch (error) {\n        console.error('Erreur détaillée:', error.response || error);\n        // Utiliser les données du localStorage comme fallback\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        userData.value = {\n          ...storedUser,\n          photo_profil: storedUser.photo_profil || defaultAvatar\n        };\n      }\n    };\n    const loadStats = async () => {\n      try {\n        loading.value = true;\n\n        // Configuration de l'en-tête d'autorisation\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('Token manquant');\n        }\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Récupérer toutes les statistiques en un seul appel API\n        const response = await api.get('/history/admin-stats');\n        const adminStats = response.data;\n\n        // Mettre à jour les statistiques avec les données de l'API\n        stats.value = adminStats;\n      } catch (error) {\n        console.error('Erreur lors du chargement des statistiques:', error);\n        // En cas d'erreur, ne pas afficher de données fictives, mais garder\n        // les valeurs par défaut initialisées dans le ref stats\n      } finally {\n        loading.value = false;\n      }\n    };\n    const refreshStats = () => {\n      loadStats();\n    };\n    onMounted(() => {\n      loadUserData();\n      loadStats();\n    });\n    const getWelcomeMessage = () => {\n      if (!userData.value) return 'Bienvenue sur Smart Kitchen';\n      const nom = userData.value.nom || '';\n      const prenom = userData.value.prenom || '';\n      return `Bienvenue ${prenom} ${nom}`.trim();\n    };\n    const logout = () => {\n      auth.clearAuth();\n      router.push('/login');\n    };\n    const formatDate = date => {\n      return new Date(date).toLocaleDateString('fr-FR', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    };\n    const formatTimeAgo = dateString => {\n      const now = new Date();\n      const date = new Date(dateString);\n      const diffMs = now - date;\n      const diffSec = Math.floor(diffMs / 1000);\n      const diffMin = Math.floor(diffSec / 60);\n      const diffHour = Math.floor(diffMin / 60);\n      const diffDay = Math.floor(diffHour / 24);\n      if (diffDay > 0) {\n        return `il y a ${diffDay} jour${diffDay > 1 ? 's' : ''}`;\n      } else if (diffHour > 0) {\n        return `il y a ${diffHour} heure${diffHour > 1 ? 's' : ''}`;\n      } else if (diffMin > 0) {\n        return `il y a ${diffMin} minute${diffMin > 1 ? 's' : ''}`;\n      } else {\n        return 'à l\\'instant';\n      }\n    };\n    const formatActionName = action => {\n      const actions = {\n        connexion: 'Connexion',\n        deconnexion: 'Déconnexion',\n        creation_utilisateur: 'Création d\\'utilisateur',\n        modification_utilisateur: 'Modification d\\'utilisateur',\n        suppression_utilisateur: 'Suppression d\\'utilisateur',\n        validation_compte: 'Validation de compte',\n        ajout_points: 'Ajout de points',\n        creation_famille: 'Création de famille',\n        modification_famille: 'Modification de famille',\n        suppression_famille: 'Suppression de famille',\n        ajout_membre_famille: 'Ajout de membre à une famille',\n        retrait_membre_famille: 'Retrait de membre d\\'une famille',\n        creation_recette: 'Création de recette',\n        modification_recette: 'Modification de recette',\n        suppression_recette: 'Suppression de recette',\n        notation_recette: 'Notation de recette',\n        commentaire_recette: 'Commentaire sur recette',\n        creation_objet: 'Création d\\'objet',\n        modification_objet: 'Modification d\\'objet',\n        suppression_objet: 'Suppression d\\'objet',\n        utilisation_objet: 'Utilisation d\\'objet'\n      };\n      return actions[action] || action;\n    };\n    const getActionDescription = action => {\n      switch (action.action) {\n        case 'ajout_points':\n          return `${action.details.montant > 0 ? 'Ajout' : 'Retrait'} de ${Math.abs(action.details.montant)} points à ${action.details.email || 'un utilisateur'}`;\n        case 'creation_utilisateur':\n          return `Création de l'utilisateur ${action.details.email || 'inconnu'}`;\n        case 'connexion':\n          return `Connexion utilisateur ${action.details.email || 'inconnu'}`;\n        default:\n          return `Action ${action.action} effectuée`;\n      }\n    };\n    const getActionIcon = action => {\n      const icons = {\n        connexion: 'fas fa-sign-in-alt',\n        deconnexion: 'fas fa-sign-out-alt',\n        creation_utilisateur: 'fas fa-user-plus',\n        modification_utilisateur: 'fas fa-user-edit',\n        suppression_utilisateur: 'fas fa-user-minus',\n        validation_compte: 'fas fa-user-check',\n        ajout_points: 'fas fa-coins',\n        creation_famille: 'fas fa-home',\n        modification_famille: 'fas fa-edit',\n        suppression_famille: 'fas fa-trash',\n        ajout_membre_famille: 'fas fa-user-plus',\n        retrait_membre_famille: 'fas fa-user-minus',\n        creation_recette: 'fas fa-utensils',\n        modification_recette: 'fas fa-edit',\n        suppression_recette: 'fas fa-trash',\n        notation_recette: 'fas fa-star',\n        commentaire_recette: 'fas fa-comment',\n        creation_objet: 'fas fa-plus-circle',\n        modification_objet: 'fas fa-edit',\n        suppression_objet: 'fas fa-trash',\n        utilisation_objet: 'fas fa-cog'\n      };\n      return icons[action] || 'fas fa-history';\n    };\n    const getActionIconClass = action => {\n      const classes = {\n        connexion: 'action-login',\n        deconnexion: 'action-logout',\n        creation_utilisateur: 'action-create',\n        modification_utilisateur: 'action-update',\n        suppression_utilisateur: 'action-delete',\n        validation_compte: 'action-validate',\n        ajout_points: 'action-points'\n      };\n      return classes[action] || 'action-default';\n    };\n\n    // Fonctions pour les graphiques\n    const getLevelColor = level => {\n      const colors = {\n        'débutant': '#4a90e2',\n        // Bleu plus moderne et vibrant\n        'intermédiaire': '#2ec4b6',\n        // Vert turquoise\n        'avancé': '#f7b801',\n        // Or plus moderne\n        'expert': '#8a4fff' // Violet plus moderne\n      };\n      return colors[level] || '#95a5a6';\n    };\n    const getNiceLevelName = level => {\n      const names = {\n        'débutant': 'Débutant',\n        'intermédiaire': 'Intermédiaire',\n        'avancé': 'Avancé',\n        'expert': 'Expert'\n      };\n      return names[level] || level;\n    };\n    const getDoughnutSegmentStyle = (level, data) => {\n      const colors = {\n        'débutant': '#4a90e2',\n        'intermédiaire': '#2ec4b6',\n        'avancé': '#f7b801',\n        'expert': '#8a4fff'\n      };\n      const total = Object.values(data).reduce((sum, val) => sum + val, 0);\n      if (total === 0) return {\n        display: 'none'\n      };\n      const levels = Object.keys(data);\n      const currentIndex = levels.indexOf(level);\n      let startAngle = 0;\n      for (let i = 0; i < currentIndex; i++) {\n        startAngle += data[levels[i]] / total * 360;\n      }\n      const angle = data[level] / total * 360;\n      const endAngle = startAngle + angle;\n      return {\n        backgroundColor: colors[level],\n        clipPath: `conic-gradient(from ${startAngle}deg at 50% 50%, ${colors[level]} 0deg ${angle}deg, transparent ${angle}deg 360deg)`,\n        opacity: data[level] > 0 ? 1 : 0,\n        transform: 'rotate(0deg)',\n        boxShadow: data[level] > 0 ? '0 0 10px rgba(0,0,0,0.1)' : 'none'\n      };\n    };\n\n    // Fonction pour la couleur de la heatmap\n    const getHeatmapColor = value => {\n      // Échelle de couleur de bleu clair à bleu foncé\n      const maxValue = Math.max(...stats.value.actionsByDayTime.flat());\n      if (maxValue === 0) return '#f1f5fa'; // Couleur par défaut si pas de données\n\n      const intensity = Math.min(value / maxValue, 1);\n\n      // Échelle de couleur de bleu clair à vert\n      if (intensity === 0) return '#f1f5fa';\n      if (intensity < 0.2) return '#e3f2fd';\n      if (intensity < 0.4) return '#bbdefb';\n      if (intensity < 0.6) return '#90caf9';\n      if (intensity < 0.8) return '#64b5f6';\n      return '#2196f3';\n    };\n    return {\n      userData,\n      getWelcomeMessage,\n      logout,\n      defaultAvatar,\n      recentActions,\n      stats,\n      loading,\n      formatDate,\n      formatTimeAgo,\n      formatActionName,\n      getActionDescription,\n      getActionIcon,\n      getActionIconClass,\n      refreshStats,\n      getLevelColor,\n      getDoughnutSegmentStyle,\n      getHeatmapColor,\n      getNiceLevelName\n    };\n  }\n};","map":{"version":3,"names":["AppLayout","useAuthStore","ref","onMounted","useRouter","api","defaultAvatar","name","components","setup","auth","router","userData","loading","recentActions","stats","usersCount","newUsers","familiesCount","activeWithPoints","actionsCount","todayActions","totalPoints","pointsDistributed","usersByLevel","actionsByDayTime","Array","fill","map","loadUserData","storedUser","JSON","parse","localStorage","getItem","role","push","token","Error","defaults","headers","common","response","get","console","log","data","value","nom","personne","prenom","email","photo_profil","error","loadStats","adminStats","refreshStats","getWelcomeMessage","trim","logout","clearAuth","formatDate","date","Date","toLocaleDateString","weekday","year","month","day","formatTimeAgo","dateString","now","diffMs","diffSec","Math","floor","diffMin","diffHour","diffDay","formatActionName","action","actions","connexion","deconnexion","creation_utilisateur","modification_utilisateur","suppression_utilisateur","validation_compte","ajout_points","creation_famille","modification_famille","suppression_famille","ajout_membre_famille","retrait_membre_famille","creation_recette","modification_recette","suppression_recette","notation_recette","commentaire_recette","creation_objet","modification_objet","suppression_objet","utilisation_objet","getActionDescription","details","montant","abs","getActionIcon","icons","getActionIconClass","classes","getLevelColor","level","colors","getNiceLevelName","names","getDoughnutSegmentStyle","total","Object","values","reduce","sum","val","display","levels","keys","currentIndex","indexOf","startAngle","i","angle","endAngle","backgroundColor","clipPath","opacity","transform","boxShadow","getHeatmapColor","maxValue","max","flat","intensity","min"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\AccueilAdmin.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"accueil-container\">\n      <div class=\"main-content\">\n        <div class=\"welcome-card\">\n          <h1>{{ getWelcomeMessage() }}</h1>\n          <div class=\"user-info\" v-if=\"userData\">\n            <div class=\"user-profile\">\n\n              <div class=\"user-details\">\n                <div class=\"date-info\">\n                  <i class=\"fas fa-calendar-alt\"></i> {{ formatDate(new Date()) }}\n                </div>\n              </div>\n            </div>\n\n            <div class=\"actions\">\n              <button @click=\"logout\" class=\"logout-btn\">\n                <i class=\"fas fa-sign-out-alt\"></i>\n                Se déconnecter\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Actions rapides -->\n        <div class=\"quick-actions\">\n          <div class=\"section-header\">\n            <h2><i class=\"fas fa-bolt\"></i> Actions rapides</h2>\n          </div>\n          <div class=\"actions-grid\">\n            <router-link to=\"/admin/users?newUser=true\" class=\"action-button\">\n              <i class=\"fas fa-user-plus\"></i>\n              <span>Nouvel utilisateur</span>\n            </router-link>\n            <router-link to=\"/admin/families?newFamily=true\" class=\"action-button\">\n              <i class=\"fas fa-plus-circle\"></i>\n              <span>Nouvelle famille</span>\n            </router-link>\n            <router-link to=\"/admin/user-points\" class=\"action-button\">\n              <i class=\"fas fa-coins\"></i>\n              <span>Gérer les points</span>\n            </router-link>\n            <button @click=\"refreshStats\" class=\"action-button\">\n              <i class=\"fas fa-sync-alt\"></i>\n              <span>Actualiser</span>\n            </button>\n          </div>\n        </div>\n\n        <!-- Statistiques générales -->\n        <div class=\"dashboard-stats\">\n          <div class=\"stat-card\">\n            <div class=\"stat-icon user-icon\">\n              <i class=\"fas fa-users\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Utilisateurs</h3>\n              <div class=\"stat-number\">{{ stats.usersCount || '...' }}</div>\n              <div class=\"stat-info\">\n                <span class=\"stat-highlight\">{{ stats.newUsers || 0 }}</span> nouveaux cette semaine\n              </div>\n            </div>\n          </div>\n\n          <div class=\"stat-card\">\n            <div class=\"stat-icon family-icon\">\n              <i class=\"fas fa-home\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Familles</h3>\n              <div class=\"stat-number\">{{ stats.familiesCount || '...' }}</div>\n              <div class=\"stat-info\">\n                <span class=\"stat-highlight\">{{ stats.activeWithPoints || 0 }}</span> actives avec points\n              </div>\n            </div>\n          </div>\n\n          <div class=\"stat-card\">\n            <div class=\"stat-icon action-icon\">\n              <i class=\"fas fa-history\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Actions</h3>\n              <div class=\"stat-number\">{{ stats.actionsCount || '...' }}</div>\n              <div class=\"stat-info\">\n                <span class=\"stat-highlight\">{{ stats.todayActions || 0 }}</span> aujourd'hui\n              </div>\n            </div>\n          </div>\n\n          <div class=\"stat-card\">\n            <div class=\"stat-icon points-icon\">\n              <i class=\"fas fa-star\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Points</h3>\n              <div class=\"stat-number\">{{ stats.totalPoints || '...' }}</div>\n              <div class=\"stat-info\">\n                <span v-if=\"stats.pointsDistributed > 0\" class=\"stat-positive\">+{{ stats.pointsDistributed }}</span>\n                <span v-else class=\"stat-negative\">{{ stats.pointsDistributed }}</span>\n                cette semaine\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Activité récente (remplacée par des graphiques) -->\n        <div class=\"chart-section\">\n          <div class=\"section-header\">\n            <h2><i class=\"fas fa-chart-line\"></i> Statistiques & Activité</h2>\n            <router-link to=\"/admin/history\" class=\"view-all-link\">\n              Voir l'historique <i class=\"fas fa-arrow-right\"></i>\n            </router-link>\n          </div>\n\n          <div v-if=\"loading\" class=\"loading-indicator\">\n            <i class=\"fas fa-spinner fa-spin\"></i> Chargement des données...\n          </div>\n          <div v-else class=\"charts-container\">\n            <!-- Graphique des utilisateurs par niveau (amélioré) -->\n            <div class=\"chart-wrapper\">\n              <h3>Distribution des utilisateurs par niveau</h3>\n              <div class=\"doughnut-chart\">\n                <div class=\"doughnut-segments\">\n                  <div v-for=\"(count, level) in stats.usersByLevel\" :key=\"level\"\n                       class=\"doughnut-segment\"\n                       :style=\"getDoughnutSegmentStyle(level, stats.usersByLevel)\">\n                  </div>\n                </div>\n                <div class=\"chart-center\">\n                  <span>{{ stats.usersCount }}</span>\n                  <small>utilisateurs</small>\n                </div>\n              </div>\n              <div class=\"chart-legend\">\n                <div v-for=\"(count, level) in stats.usersByLevel\" :key=\"level\" class=\"legend-item\">\n                  <span class=\"color-badge\" :style=\"{ backgroundColor: getLevelColor(level) }\"></span>\n                  <span>{{ getNiceLevelName(level) }}: {{ count }} ({{ ((count / stats.usersCount) * 100).toFixed(1) }}%)</span>\n                </div>\n              </div>\n            </div>\n\n            <!-- Graphique: Actions par jour et tranche horaire -->\n            <div class=\"chart-wrapper\">\n              <h3>Nombre d'actions/utilisations (7 jours)</h3>\n              <div class=\"heatmap-chart\">\n                <div class=\"heatmap-y-axis\">\n                  <div class=\"heatmap-y-label\">Matin<br/>(00h-08h)</div>\n                  <div class=\"heatmap-y-label\">Journée<br/>(08h-16h)</div>\n                  <div class=\"heatmap-y-label\">Soir<br/>(16h-00h)</div>\n                </div>\n                <div class=\"heatmap-grid\">\n                  <div v-for=\"(day, dayIndex) in ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam']\" :key=\"dayIndex\" class=\"heatmap-day-column\">\n                    <div class=\"heatmap-x-label\">{{ day }}</div>\n                    <div v-for=\"(timeSlot, slotIndex) in ['morning', 'afternoon', 'evening']\" :key=\"`${dayIndex}-${slotIndex}`\"\n                         class=\"heatmap-cell\"\n                         :style=\"{ backgroundColor: getHeatmapColor(stats.actionsByDayTime[dayIndex]?.[slotIndex] || 0) }\">\n                      <span class=\"heatmap-value\">{{ stats.actionsByDayTime[dayIndex]?.[slotIndex] || 0 }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Menu administration -->\n        \n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script>\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nimport { useAuthStore } from '@/stores/auth';\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport defaultAvatar from '@/assets/default-avatar.png';\n\nexport default {\n  name: 'AccueilAdminPage',\n  components: {\n    AppLayout\n  },\n  setup() {\n    const auth = useAuthStore();\n    const router = useRouter();\n    const userData = ref(null);\n    const loading = ref(false);\n    const recentActions = ref([]);\n    const stats = ref({\n      usersCount: 0,\n      newUsers: 0,\n      familiesCount: 0,\n      activeWithPoints: 0,\n      actionsCount: 0,\n      todayActions: 0,\n      totalPoints: 0,\n      pointsDistributed: 0,\n      usersByLevel: {\n        'débutant': 0,\n        'intermédiaire': 0,\n        'avancé': 0,\n        'expert': 0\n      },\n      actionsByDayTime: Array(7).fill().map(() => Array(3).fill(0))\n    });\n\n    const loadUserData = async () => {\n      try {\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        if (!storedUser || storedUser.role !== 'admin') {\n          router.push('/login');\n          return;\n        }\n\n        // Vérifier que le token est présent\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('Token manquant');\n        }\n\n        // Configuration de l'en-tête d'autorisation\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Charger les données complètes de l'utilisateur depuis l'API\n        const response = await api.get(`/users/me`);\n        console.log('Réponse API:', response.data); // Pour le débogage\n\n        userData.value = {\n          ...response.data,\n          nom: response.data.personne?.nom || storedUser.nom,\n          prenom: response.data.personne?.prenom || storedUser.prenom,\n          email: response.data.email || storedUser.email,\n          photo_profil: response.data.photo_profil || defaultAvatar\n        };\n      } catch (error) {\n        console.error('Erreur détaillée:', error.response || error);\n        // Utiliser les données du localStorage comme fallback\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        userData.value = {\n          ...storedUser,\n          photo_profil: storedUser.photo_profil || defaultAvatar\n        };\n      }\n    };\n\n    const loadStats = async () => {\n      try {\n        loading.value = true;\n\n        // Configuration de l'en-tête d'autorisation\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('Token manquant');\n        }\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Récupérer toutes les statistiques en un seul appel API\n        const response = await api.get('/history/admin-stats');\n        const adminStats = response.data;\n        \n        // Mettre à jour les statistiques avec les données de l'API\n        stats.value = adminStats;\n        \n      } catch (error) {\n        console.error('Erreur lors du chargement des statistiques:', error);\n        // En cas d'erreur, ne pas afficher de données fictives, mais garder\n        // les valeurs par défaut initialisées dans le ref stats\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    const refreshStats = () => {\n      loadStats();\n    };\n\n    onMounted(() => {\n      loadUserData();\n      loadStats();\n    });\n\n    const getWelcomeMessage = () => {\n      if (!userData.value) return 'Bienvenue sur Smart Kitchen';\n      const nom = userData.value.nom || '';\n      const prenom = userData.value.prenom || '';\n      return `Bienvenue ${prenom} ${nom}`.trim();\n    };\n\n    const logout = () => {\n      auth.clearAuth();\n      router.push('/login');\n    };\n\n    const formatDate = (date) => {\n      return new Date(date).toLocaleDateString('fr-FR', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    };\n\n    const formatTimeAgo = (dateString) => {\n      const now = new Date();\n      const date = new Date(dateString);\n      const diffMs = now - date;\n      const diffSec = Math.floor(diffMs / 1000);\n      const diffMin = Math.floor(diffSec / 60);\n      const diffHour = Math.floor(diffMin / 60);\n      const diffDay = Math.floor(diffHour / 24);\n\n      if (diffDay > 0) {\n        return `il y a ${diffDay} jour${diffDay > 1 ? 's' : ''}`;\n      } else if (diffHour > 0) {\n        return `il y a ${diffHour} heure${diffHour > 1 ? 's' : ''}`;\n      } else if (diffMin > 0) {\n        return `il y a ${diffMin} minute${diffMin > 1 ? 's' : ''}`;\n      } else {\n        return 'à l\\'instant';\n      }\n    };\n\n    const formatActionName = (action) => {\n      const actions = {\n        connexion: 'Connexion',\n        deconnexion: 'Déconnexion',\n        creation_utilisateur: 'Création d\\'utilisateur',\n        modification_utilisateur: 'Modification d\\'utilisateur',\n        suppression_utilisateur: 'Suppression d\\'utilisateur',\n        validation_compte: 'Validation de compte',\n        ajout_points: 'Ajout de points',\n        creation_famille: 'Création de famille',\n        modification_famille: 'Modification de famille',\n        suppression_famille: 'Suppression de famille',\n        ajout_membre_famille: 'Ajout de membre à une famille',\n        retrait_membre_famille: 'Retrait de membre d\\'une famille',\n        creation_recette: 'Création de recette',\n        modification_recette: 'Modification de recette',\n        suppression_recette: 'Suppression de recette',\n        notation_recette: 'Notation de recette',\n        commentaire_recette: 'Commentaire sur recette',\n        creation_objet: 'Création d\\'objet',\n        modification_objet: 'Modification d\\'objet',\n        suppression_objet: 'Suppression d\\'objet',\n        utilisation_objet: 'Utilisation d\\'objet'\n      };\n      return actions[action] || action;\n    };\n\n    const getActionDescription = (action) => {\n      switch (action.action) {\n        case 'ajout_points':\n          return `${action.details.montant > 0 ? 'Ajout' : 'Retrait'} de ${Math.abs(action.details.montant)} points à ${action.details.email || 'un utilisateur'}`;\n        case 'creation_utilisateur':\n          return `Création de l'utilisateur ${action.details.email || 'inconnu'}`;\n        case 'connexion':\n          return `Connexion utilisateur ${action.details.email || 'inconnu'}`;\n        default:\n          return `Action ${action.action} effectuée`;\n      }\n    };\n\n    const getActionIcon = (action) => {\n      const icons = {\n        connexion: 'fas fa-sign-in-alt',\n        deconnexion: 'fas fa-sign-out-alt',\n        creation_utilisateur: 'fas fa-user-plus',\n        modification_utilisateur: 'fas fa-user-edit',\n        suppression_utilisateur: 'fas fa-user-minus',\n        validation_compte: 'fas fa-user-check',\n        ajout_points: 'fas fa-coins',\n        creation_famille: 'fas fa-home',\n        modification_famille: 'fas fa-edit',\n        suppression_famille: 'fas fa-trash',\n        ajout_membre_famille: 'fas fa-user-plus',\n        retrait_membre_famille: 'fas fa-user-minus',\n        creation_recette: 'fas fa-utensils',\n        modification_recette: 'fas fa-edit',\n        suppression_recette: 'fas fa-trash',\n        notation_recette: 'fas fa-star',\n        commentaire_recette: 'fas fa-comment',\n        creation_objet: 'fas fa-plus-circle',\n        modification_objet: 'fas fa-edit',\n        suppression_objet: 'fas fa-trash',\n        utilisation_objet: 'fas fa-cog'\n      };\n      return icons[action] || 'fas fa-history';\n    };\n\n    const getActionIconClass = (action) => {\n      const classes = {\n        connexion: 'action-login',\n        deconnexion: 'action-logout',\n        creation_utilisateur: 'action-create',\n        modification_utilisateur: 'action-update',\n        suppression_utilisateur: 'action-delete',\n        validation_compte: 'action-validate',\n        ajout_points: 'action-points'\n      };\n      return classes[action] || 'action-default';\n    };\n\n    // Fonctions pour les graphiques\n    const getLevelColor = (level) => {\n      const colors = {\n        'débutant': '#4a90e2',   // Bleu plus moderne et vibrant\n        'intermédiaire': '#2ec4b6', // Vert turquoise\n        'avancé': '#f7b801',     // Or plus moderne\n        'expert': '#8a4fff'      // Violet plus moderne\n      };\n      return colors[level] || '#95a5a6';\n    };\n\n    const getNiceLevelName = (level) => {\n      const names = {\n        'débutant': 'Débutant',\n        'intermédiaire': 'Intermédiaire',\n        'avancé': 'Avancé',\n        'expert': 'Expert'\n      };\n      return names[level] || level;\n    };\n\n    const getDoughnutSegmentStyle = (level, data) => {\n      const colors = {\n        'débutant': '#4a90e2',\n        'intermédiaire': '#2ec4b6',\n        'avancé': '#f7b801',\n        'expert': '#8a4fff'\n      };\n\n      const total = Object.values(data).reduce((sum, val) => sum + val, 0);\n      if (total === 0) return { display: 'none' };\n\n      const levels = Object.keys(data);\n      const currentIndex = levels.indexOf(level);\n\n      let startAngle = 0;\n      for (let i = 0; i < currentIndex; i++) {\n        startAngle += (data[levels[i]] / total) * 360;\n      }\n\n      const angle = (data[level] / total) * 360;\n      const endAngle = startAngle + angle;\n\n      return {\n        backgroundColor: colors[level],\n        clipPath: `conic-gradient(from ${startAngle}deg at 50% 50%, ${colors[level]} 0deg ${angle}deg, transparent ${angle}deg 360deg)`,\n        opacity: data[level] > 0 ? 1 : 0,\n        transform: 'rotate(0deg)',\n        boxShadow: data[level] > 0 ? '0 0 10px rgba(0,0,0,0.1)' : 'none'\n      };\n    };\n\n    // Fonction pour la couleur de la heatmap\n    const getHeatmapColor = (value) => {\n      // Échelle de couleur de bleu clair à bleu foncé\n      const maxValue = Math.max(...stats.value.actionsByDayTime.flat());\n      if (maxValue === 0) return '#f1f5fa'; // Couleur par défaut si pas de données\n\n      const intensity = Math.min(value / maxValue, 1);\n\n      // Échelle de couleur de bleu clair à vert\n      if (intensity === 0) return '#f1f5fa';\n      if (intensity < 0.2) return '#e3f2fd';\n      if (intensity < 0.4) return '#bbdefb';\n      if (intensity < 0.6) return '#90caf9';\n      if (intensity < 0.8) return '#64b5f6';\n      return '#2196f3';\n    };\n\n    return {\n      userData,\n      getWelcomeMessage,\n      logout,\n      defaultAvatar,\n      recentActions,\n      stats,\n      loading,\n      formatDate,\n      formatTimeAgo,\n      formatActionName,\n      getActionDescription,\n      getActionIcon,\n      getActionIconClass,\n      refreshStats,\n      getLevelColor,\n      getDoughnutSegmentStyle,\n      getHeatmapColor,\n      getNiceLevelName\n    };\n  }\n};\n</script>\n\n<style scoped>\n.accueil-container {\n  padding: 12px;\n}\n\n.main-content {\n  flex: 1;\n}\n\n.welcome-card {\n  background: white;\n  padding: 15px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 12px;\n}\n\nh1 {\n  color: #2c5038;\n  margin-bottom: 15px;\n  font-size: 1.6rem;\n}\n\n.user-profile {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.profile-image-container {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 2px solid #2c5038;\n  margin-right: 15px;\n}\n\n.profile-pic {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.user-details {\n  flex: 1;\n}\n\n.date-info {\n  color: #666;\n  font-size: 0.85rem;\n}\n\nh2 {\n  color: #2c5038;\n  margin: 0 0 12px 0;\n  font-size: 1.2rem;\n}\n\n.actions {\n  text-align: right;\n}\n\n.logout-btn {\n  background-color: #dc3545;\n  color: white;\n  padding: 6px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  transition: background-color 0.3s;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.logout-btn:hover {\n  background-color: #c82333;\n}\n\n/* Statistiques */\n.dashboard-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 12px;\n  margin-bottom: 15px;\n}\n\n.stat-card {\n  background: white;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n}\n\n.stat-icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 10px;\n  flex-shrink: 0;\n}\n\n.stat-icon i {\n  font-size: 1.3rem;\n  color: white;\n}\n\n.user-icon {\n  background-color: #3498db;\n}\n\n.family-icon {\n  background-color: #2ecc71;\n}\n\n.action-icon {\n  background-color: #9b59b6;\n}\n\n.points-icon {\n  background-color: #f39c12;\n}\n\n.stat-content {\n  flex: 1;\n}\n\n.stat-content h3 {\n  margin: 0 0 3px 0;\n  font-size: 0.85rem;\n  color: #666;\n}\n\n.stat-number {\n  font-size: 1.4rem;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 2px;\n}\n\n.stat-info {\n  font-size: 0.75rem;\n  color: #777;\n}\n\n.stat-highlight {\n  font-weight: bold;\n  color: #2c5038;\n}\n\n.stat-positive {\n  color: #2ecc71;\n  font-weight: bold;\n}\n\n.stat-negative {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n/* Activité récente remplacée par des graphiques */\n.chart-section {\n  background: white;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 15px;\n}\n\n.charts-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));\n  gap: 12px;\n}\n\n.chart-wrapper {\n  background-color: #f8f9fa;\n  border-radius: 6px;\n  padding: 10px;\n  text-align: center;\n}\n\n.chart-wrapper h3 {\n  margin-top: 0;\n  margin-bottom: 8px;\n  font-size: 0.85rem;\n  color: #333;\n}\n\n/* Pie Chart Styles */\n.pie-chart {\n  position: relative;\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  background-color: #eee;\n  margin: 0 auto 20px;\n  overflow: hidden;\n}\n\n.pie-segment {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: 50% 50%;\n}\n\n.segment-label {\n  display: none;\n}\n\n.chart-center {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: white;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 0 10px rgba(0,0,0,0.1);\n}\n\n.chart-center span {\n  font-size: 1.2rem;\n}\n\n.chart-center small {\n  font-size: 0.7rem;\n  color: #666;\n}\n\n.chart-legend {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 8px;\n  gap: 8px;\n}\n\n.legend-item {\n  font-size: 0.75rem;\n}\n\n.color-badge {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 3px;\n  margin-right: 5px;\n}\n\n/* Bar Chart Styles */\n.bar-chart {\n  height: 200px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  padding: 10px 5px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: inset 0 0 3px rgba(0,0,0,0.1);\n}\n\n.bar-column {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n  height: 100%;\n  padding: 0 5px;\n}\n\n.bar-value {\n  width: 100%;\n  background-color: #2ecc71;\n  border-radius: 4px 4px 0 0;\n  position: relative;\n  min-height: 5px; /* pour les valeurs très petites */\n  transition: height 0.5s;\n}\n\n.bar-tooltip {\n  position: absolute;\n  top: -25px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: white;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 0.7rem;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.bar-value:hover .bar-tooltip {\n  opacity: 1;\n}\n\n.bar-label {\n  font-size: 0.7rem;\n  color: #666;\n  margin-top: 5px;\n}\n\n/* Actions rapides */\n.quick-actions {\n  background: white;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 15px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.view-all-link {\n  color: #2c5038;\n  font-size: 0.8rem;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.actions-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 10px;\n}\n\n.action-button {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  background-color: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  padding: 10px;\n  cursor: pointer;\n  text-decoration: none;\n  color: #333;\n  transition: all 0.3s ease;\n}\n\n.action-button:hover {\n  background-color: #e9ecef;\n  transform: translateY(-2px);\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);\n}\n\n.action-button i {\n  font-size: 1.1rem;\n  color: #2c5038;\n}\n\n.action-button span {\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n/* Menu navigation */\n.admin-menu {\n  margin-top: 12px;\n}\n\n.admin-menu h2 {\n  color: #2c5038;\n  margin-bottom: 12px;\n}\n\n.menu-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 12px;\n}\n\n.menu-card {\n  background-color: white;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  gap: 10px;\n  text-decoration: none;\n  color: #333;\n  transition: transform 0.3s, box-shadow 0.3s;\n}\n\n.menu-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n}\n\n.menu-card i {\n  font-size: 1.5rem;\n  color: #2c5038;\n}\n\n.menu-card span {\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n\n/* Responsive */\n@media screen and (max-width: 768px) {\n  .accueil-container {\n    padding: 10px;\n  }\n\n  .dashboard-stats {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  }\n\n  .actions-grid {\n    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .accueil-container {\n    padding: 8px;\n  }\n\n  .dashboard-stats {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .welcome-card {\n    padding: 12px;\n  }\n\n  .user-profile {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .profile-image-container {\n    margin-right: 0;\n    margin-bottom: 8px;\n  }\n\n  .activity-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n\n/* Graphiques améliorés */\n.doughnut-chart {\n  position: relative;\n  width: 130px;\n  height: 130px;\n  margin: 0 auto 10px;\n}\n\n.doughnut-segments {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n\n.doughnut-segment {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  transform-origin: center;\n  transition: all 0.5s ease-in-out;\n}\n\n.enhanced-bar-chart {\n  position: relative;\n  height: 200px;\n  display: flex;\n  padding: 10px 0 20px 30px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: inset 0 0 3px rgba(0,0,0,0.1);\n}\n\n.chart-axis-y {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 5px 0;\n}\n\n.axis-label {\n  font-size: 0.7rem;\n  color: #666;\n  text-align: right;\n  padding-right: 5px;\n}\n\n.bars-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  width: 100%;\n  height: 100%;\n}\n\n.trend-line {\n  position: absolute;\n  bottom: 30px;\n  left: 30px;\n  right: 10px;\n  height: 150px;\n  background: linear-gradient(to top, rgba(46, 204, 113, 0.1), rgba(46, 204, 113, 0.3));\n  border-top: 2px dashed rgba(46, 204, 113, 0.6);\n  pointer-events: none;\n}\n\n/* Nouveau graphique de tendance */\n.trend-chart {\n  height: 150px;\n  position: relative;\n  padding: 8px 5px 25px 5px;\n}\n\n.trend-line-container {\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\n.trend-point {\n  position: absolute;\n  width: 6px;\n  height: 6px;\n  margin-left: -3px;\n  margin-bottom: -3px;\n  background-color: #2ecc71;\n  border-radius: 50%;\n  z-index: 2;\n}\n\n.trend-tooltip {\n  position: absolute;\n  bottom: 15px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: white;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 0.7rem;\n  white-space: nowrap;\n  opacity: 0;\n  transition: opacity 0.3s;\n  pointer-events: none;\n}\n\n.trend-point:hover .trend-tooltip {\n  opacity: 1;\n}\n\n.trend-path {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n}\n\n.trend-x-axis {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 20px;\n}\n\n.trend-hour-label {\n  position: absolute;\n  transform: translateX(-50%);\n  font-size: 0.65rem;\n  color: #666;\n}\n\n/* Graphique de barres horizontales */\n.horizontal-bar-chart {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 5px;\n}\n\n.horizontal-bar-row {\n  display: flex;\n  align-items: center;\n}\n\n.horizontal-bar-label {\n  width: 100px;\n  font-size: 0.8rem;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  padding-right: 10px;\n}\n\n.horizontal-bar-container {\n  flex: 1;\n  height: 20px;\n  background-color: #f1f1f1;\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.horizontal-bar {\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  border-radius: 3px;\n  transition: width 0.5s;\n}\n\n.horizontal-bar-value {\n  position: absolute;\n  right: 5px;\n  color: white;\n  font-size: 0.8rem;\n  font-weight: bold;\n  text-shadow: 0 0 2px rgba(0,0,0,0.5);\n}\n\n/* Styles pour le message d'absence de données */\n.no-data-message {\n  text-align: center;\n  color: #95a5a6;\n  font-style: italic;\n  padding: 20px;\n}\n\n/* Heatmap styles */\n.heatmap-chart {\n  display: flex;\n  height: 130px;\n  margin-top: 10px;\n}\n\n.heatmap-y-axis {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding-right: 6px;\n  width: 60px;\n}\n\n.heatmap-y-label {\n  height: 36px;\n  display: flex;\n  align-items: center;\n  font-size: 0.6rem;\n  color: #666;\n  text-align: right;\n}\n\n.heatmap-grid {\n  display: flex;\n  flex: 1;\n  gap: 3px;\n}\n\n.heatmap-day-column {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.heatmap-x-label {\n  text-align: center;\n  font-size: 0.6rem;\n  color: #666;\n  margin-bottom: 4px;\n}\n\n.heatmap-cell {\n  flex: 1;\n  margin: 1px 0;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  cursor: default;\n  transition: transform 0.2s;\n}\n\n.heatmap-cell:hover {\n  transform: scale(1.05);\n}\n\n.heatmap-value {\n  font-size: 0.65rem;\n  font-weight: bold;\n  color: rgb(85, 81, 81);\n  text-shadow: 0 0 1px rgba(0,0,0,0.5);\n}\n</style> "],"mappings":";;;;AA+KA,OAAOA,SAAQ,MAAO,8BAA8B;AACpD,SAASC,YAAW,QAAS,eAAe;AAC5C,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,SAASC,SAAQ,QAAS,YAAY;AACtC,OAAOC,GAAE,MAAO,gBAAgB;AAChC,OAAOC,aAAY,MAAO,6BAA6B;AAEvD,eAAe;EACbC,IAAI,EAAE,kBAAkB;EACxBC,UAAU,EAAE;IACVR;EACF,CAAC;EACDS,KAAKA,CAAA,EAAG;IACN,MAAMC,IAAG,GAAIT,YAAY,CAAC,CAAC;IAC3B,MAAMU,MAAK,GAAIP,SAAS,CAAC,CAAC;IAC1B,MAAMQ,QAAO,GAAIV,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMW,OAAM,GAAIX,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMY,aAAY,GAAIZ,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMa,KAAI,GAAIb,GAAG,CAAC;MAChBc,UAAU,EAAE,CAAC;MACbC,QAAQ,EAAE,CAAC;MACXC,aAAa,EAAE,CAAC;MAChBC,gBAAgB,EAAE,CAAC;MACnBC,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE,CAAC;MACfC,WAAW,EAAE,CAAC;MACdC,iBAAiB,EAAE,CAAC;MACpBC,YAAY,EAAE;QACZ,UAAU,EAAE,CAAC;QACb,eAAe,EAAE,CAAC;QAClB,QAAQ,EAAE,CAAC;QACX,QAAQ,EAAE;MACZ,CAAC;MACDC,gBAAgB,EAAEC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,GAAG,CAAC,MAAMF,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IAC9D,CAAC,CAAC;IAEF,MAAME,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,UAAS,GAAIC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC3D,IAAI,CAACJ,UAAS,IAAKA,UAAU,CAACK,IAAG,KAAM,OAAO,EAAE;UAC9CxB,MAAM,CAACyB,IAAI,CAAC,QAAQ,CAAC;UACrB;QACF;;QAEA;QACA,MAAMC,KAAI,GAAIJ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACG,KAAK,EAAE;UACV,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;QACnC;;QAEA;QACAjC,GAAG,CAACkC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,UAAUJ,KAAK,EAAE;;QAEhE;QACA,MAAMK,QAAO,GAAI,MAAMrC,GAAG,CAACsC,GAAG,CAAC,WAAW,CAAC;QAC3CC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEH,QAAQ,CAACI,IAAI,CAAC,EAAE;;QAE5ClC,QAAQ,CAACmC,KAAI,GAAI;UACf,GAAGL,QAAQ,CAACI,IAAI;UAChBE,GAAG,EAAEN,QAAQ,CAACI,IAAI,CAACG,QAAQ,EAAED,GAAE,IAAKlB,UAAU,CAACkB,GAAG;UAClDE,MAAM,EAAER,QAAQ,CAACI,IAAI,CAACG,QAAQ,EAAEC,MAAK,IAAKpB,UAAU,CAACoB,MAAM;UAC3DC,KAAK,EAAET,QAAQ,CAACI,IAAI,CAACK,KAAI,IAAKrB,UAAU,CAACqB,KAAK;UAC9CC,YAAY,EAAEV,QAAQ,CAACI,IAAI,CAACM,YAAW,IAAK9C;QAC9C,CAAC;MACH,EAAE,OAAO+C,KAAK,EAAE;QACdT,OAAO,CAACS,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAACX,QAAO,IAAKW,KAAK,CAAC;QAC3D;QACA,MAAMvB,UAAS,GAAIC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC3DtB,QAAQ,CAACmC,KAAI,GAAI;UACf,GAAGjB,UAAU;UACbsB,YAAY,EAAEtB,UAAU,CAACsB,YAAW,IAAK9C;QAC3C,CAAC;MACH;IACF,CAAC;IAED,MAAMgD,SAAQ,GAAI,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACFzC,OAAO,CAACkC,KAAI,GAAI,IAAI;;QAEpB;QACA,MAAMV,KAAI,GAAIJ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACG,KAAK,EAAE;UACV,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;QACnC;QACAjC,GAAG,CAACkC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,UAAUJ,KAAK,EAAE;;QAEhE;QACA,MAAMK,QAAO,GAAI,MAAMrC,GAAG,CAACsC,GAAG,CAAC,sBAAsB,CAAC;QACtD,MAAMY,UAAS,GAAIb,QAAQ,CAACI,IAAI;;QAEhC;QACA/B,KAAK,CAACgC,KAAI,GAAIQ,UAAU;MAE1B,EAAE,OAAOF,KAAK,EAAE;QACdT,OAAO,CAACS,KAAK,CAAC,6CAA6C,EAAEA,KAAK,CAAC;QACnE;QACA;MACF,UAAU;QACRxC,OAAO,CAACkC,KAAI,GAAI,KAAK;MACvB;IACF,CAAC;IAED,MAAMS,YAAW,GAAIA,CAAA,KAAM;MACzBF,SAAS,CAAC,CAAC;IACb,CAAC;IAEDnD,SAAS,CAAC,MAAM;MACd0B,YAAY,CAAC,CAAC;MACdyB,SAAS,CAAC,CAAC;IACb,CAAC,CAAC;IAEF,MAAMG,iBAAgB,GAAIA,CAAA,KAAM;MAC9B,IAAI,CAAC7C,QAAQ,CAACmC,KAAK,EAAE,OAAO,6BAA6B;MACzD,MAAMC,GAAE,GAAIpC,QAAQ,CAACmC,KAAK,CAACC,GAAE,IAAK,EAAE;MACpC,MAAME,MAAK,GAAItC,QAAQ,CAACmC,KAAK,CAACG,MAAK,IAAK,EAAE;MAC1C,OAAO,aAAaA,MAAM,IAAIF,GAAG,EAAE,CAACU,IAAI,CAAC,CAAC;IAC5C,CAAC;IAED,MAAMC,MAAK,GAAIA,CAAA,KAAM;MACnBjD,IAAI,CAACkD,SAAS,CAAC,CAAC;MAChBjD,MAAM,CAACyB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,MAAMyB,UAAS,GAAKC,IAAI,IAAK;MAC3B,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAChDC,OAAO,EAAE,MAAM;QACfC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,MAAM;QACbC,GAAG,EAAE;MACP,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,aAAY,GAAKC,UAAU,IAAK;MACpC,MAAMC,GAAE,GAAI,IAAIR,IAAI,CAAC,CAAC;MACtB,MAAMD,IAAG,GAAI,IAAIC,IAAI,CAACO,UAAU,CAAC;MACjC,MAAME,MAAK,GAAID,GAAE,GAAIT,IAAI;MACzB,MAAMW,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACH,MAAK,GAAI,IAAI,CAAC;MACzC,MAAMI,OAAM,GAAIF,IAAI,CAACC,KAAK,CAACF,OAAM,GAAI,EAAE,CAAC;MACxC,MAAMI,QAAO,GAAIH,IAAI,CAACC,KAAK,CAACC,OAAM,GAAI,EAAE,CAAC;MACzC,MAAME,OAAM,GAAIJ,IAAI,CAACC,KAAK,CAACE,QAAO,GAAI,EAAE,CAAC;MAEzC,IAAIC,OAAM,GAAI,CAAC,EAAE;QACf,OAAO,UAAUA,OAAO,QAAQA,OAAM,GAAI,IAAI,GAAE,GAAI,EAAE,EAAE;MAC1D,OAAO,IAAID,QAAO,GAAI,CAAC,EAAE;QACvB,OAAO,UAAUA,QAAQ,SAASA,QAAO,GAAI,IAAI,GAAE,GAAI,EAAE,EAAE;MAC7D,OAAO,IAAID,OAAM,GAAI,CAAC,EAAE;QACtB,OAAO,UAAUA,OAAO,UAAUA,OAAM,GAAI,IAAI,GAAE,GAAI,EAAE,EAAE;MAC5D,OAAO;QACL,OAAO,cAAc;MACvB;IACF,CAAC;IAED,MAAMG,gBAAe,GAAKC,MAAM,IAAK;MACnC,MAAMC,OAAM,GAAI;QACdC,SAAS,EAAE,WAAW;QACtBC,WAAW,EAAE,aAAa;QAC1BC,oBAAoB,EAAE,yBAAyB;QAC/CC,wBAAwB,EAAE,6BAA6B;QACvDC,uBAAuB,EAAE,4BAA4B;QACrDC,iBAAiB,EAAE,sBAAsB;QACzCC,YAAY,EAAE,iBAAiB;QAC/BC,gBAAgB,EAAE,qBAAqB;QACvCC,oBAAoB,EAAE,yBAAyB;QAC/CC,mBAAmB,EAAE,wBAAwB;QAC7CC,oBAAoB,EAAE,+BAA+B;QACrDC,sBAAsB,EAAE,kCAAkC;QAC1DC,gBAAgB,EAAE,qBAAqB;QACvCC,oBAAoB,EAAE,yBAAyB;QAC/CC,mBAAmB,EAAE,wBAAwB;QAC7CC,gBAAgB,EAAE,qBAAqB;QACvCC,mBAAmB,EAAE,yBAAyB;QAC9CC,cAAc,EAAE,mBAAmB;QACnCC,kBAAkB,EAAE,uBAAuB;QAC3CC,iBAAiB,EAAE,sBAAsB;QACzCC,iBAAiB,EAAE;MACrB,CAAC;MACD,OAAOrB,OAAO,CAACD,MAAM,KAAKA,MAAM;IAClC,CAAC;IAED,MAAMuB,oBAAmB,GAAKvB,MAAM,IAAK;MACvC,QAAQA,MAAM,CAACA,MAAM;QACnB,KAAK,cAAc;UACjB,OAAO,GAAGA,MAAM,CAACwB,OAAO,CAACC,OAAM,GAAI,IAAI,OAAM,GAAI,SAAS,OAAO/B,IAAI,CAACgC,GAAG,CAAC1B,MAAM,CAACwB,OAAO,CAACC,OAAO,CAAC,aAAazB,MAAM,CAACwB,OAAO,CAACrD,KAAI,IAAK,gBAAgB,EAAE;QAC1J,KAAK,sBAAsB;UACzB,OAAO,6BAA6B6B,MAAM,CAACwB,OAAO,CAACrD,KAAI,IAAK,SAAS,EAAE;QACzE,KAAK,WAAW;UACd,OAAO,yBAAyB6B,MAAM,CAACwB,OAAO,CAACrD,KAAI,IAAK,SAAS,EAAE;QACrE;UACE,OAAO,UAAU6B,MAAM,CAACA,MAAM,YAAY;MAC9C;IACF,CAAC;IAED,MAAM2B,aAAY,GAAK3B,MAAM,IAAK;MAChC,MAAM4B,KAAI,GAAI;QACZ1B,SAAS,EAAE,oBAAoB;QAC/BC,WAAW,EAAE,qBAAqB;QAClCC,oBAAoB,EAAE,kBAAkB;QACxCC,wBAAwB,EAAE,kBAAkB;QAC5CC,uBAAuB,EAAE,mBAAmB;QAC5CC,iBAAiB,EAAE,mBAAmB;QACtCC,YAAY,EAAE,cAAc;QAC5BC,gBAAgB,EAAE,aAAa;QAC/BC,oBAAoB,EAAE,aAAa;QACnCC,mBAAmB,EAAE,cAAc;QACnCC,oBAAoB,EAAE,kBAAkB;QACxCC,sBAAsB,EAAE,mBAAmB;QAC3CC,gBAAgB,EAAE,iBAAiB;QACnCC,oBAAoB,EAAE,aAAa;QACnCC,mBAAmB,EAAE,cAAc;QACnCC,gBAAgB,EAAE,aAAa;QAC/BC,mBAAmB,EAAE,gBAAgB;QACrCC,cAAc,EAAE,oBAAoB;QACpCC,kBAAkB,EAAE,aAAa;QACjCC,iBAAiB,EAAE,cAAc;QACjCC,iBAAiB,EAAE;MACrB,CAAC;MACD,OAAOM,KAAK,CAAC5B,MAAM,KAAK,gBAAgB;IAC1C,CAAC;IAED,MAAM6B,kBAAiB,GAAK7B,MAAM,IAAK;MACrC,MAAM8B,OAAM,GAAI;QACd5B,SAAS,EAAE,cAAc;QACzBC,WAAW,EAAE,eAAe;QAC5BC,oBAAoB,EAAE,eAAe;QACrCC,wBAAwB,EAAE,eAAe;QACzCC,uBAAuB,EAAE,eAAe;QACxCC,iBAAiB,EAAE,iBAAiB;QACpCC,YAAY,EAAE;MAChB,CAAC;MACD,OAAOsB,OAAO,CAAC9B,MAAM,KAAK,gBAAgB;IAC5C,CAAC;;IAED;IACA,MAAM+B,aAAY,GAAKC,KAAK,IAAK;MAC/B,MAAMC,MAAK,GAAI;QACb,UAAU,EAAE,SAAS;QAAI;QACzB,eAAe,EAAE,SAAS;QAAE;QAC5B,QAAQ,EAAE,SAAS;QAAM;QACzB,QAAQ,EAAE,SAAQ,CAAO;MAC3B,CAAC;MACD,OAAOA,MAAM,CAACD,KAAK,KAAK,SAAS;IACnC,CAAC;IAED,MAAME,gBAAe,GAAKF,KAAK,IAAK;MAClC,MAAMG,KAAI,GAAI;QACZ,UAAU,EAAE,UAAU;QACtB,eAAe,EAAE,eAAe;QAChC,QAAQ,EAAE,QAAQ;QAClB,QAAQ,EAAE;MACZ,CAAC;MACD,OAAOA,KAAK,CAACH,KAAK,KAAKA,KAAK;IAC9B,CAAC;IAED,MAAMI,uBAAsB,GAAIA,CAACJ,KAAK,EAAElE,IAAI,KAAK;MAC/C,MAAMmE,MAAK,GAAI;QACb,UAAU,EAAE,SAAS;QACrB,eAAe,EAAE,SAAS;QAC1B,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE;MACZ,CAAC;MAED,MAAMI,KAAI,GAAIC,MAAM,CAACC,MAAM,CAACzE,IAAI,CAAC,CAAC0E,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAE,GAAIC,GAAG,EAAE,CAAC,CAAC;MACpE,IAAIL,KAAI,KAAM,CAAC,EAAE,OAAO;QAAEM,OAAO,EAAE;MAAO,CAAC;MAE3C,MAAMC,MAAK,GAAIN,MAAM,CAACO,IAAI,CAAC/E,IAAI,CAAC;MAChC,MAAMgF,YAAW,GAAIF,MAAM,CAACG,OAAO,CAACf,KAAK,CAAC;MAE1C,IAAIgB,UAAS,GAAI,CAAC;MAClB,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIH,YAAY,EAAEG,CAAC,EAAE,EAAE;QACrCD,UAAS,IAAMlF,IAAI,CAAC8E,MAAM,CAACK,CAAC,CAAC,IAAIZ,KAAK,GAAI,GAAG;MAC/C;MAEA,MAAMa,KAAI,GAAKpF,IAAI,CAACkE,KAAK,IAAIK,KAAK,GAAI,GAAG;MACzC,MAAMc,QAAO,GAAIH,UAAS,GAAIE,KAAK;MAEnC,OAAO;QACLE,eAAe,EAAEnB,MAAM,CAACD,KAAK,CAAC;QAC9BqB,QAAQ,EAAE,uBAAuBL,UAAU,mBAAmBf,MAAM,CAACD,KAAK,CAAC,SAASkB,KAAK,oBAAoBA,KAAK,aAAa;QAC/HI,OAAO,EAAExF,IAAI,CAACkE,KAAK,IAAI,IAAI,IAAI,CAAC;QAChCuB,SAAS,EAAE,cAAc;QACzBC,SAAS,EAAE1F,IAAI,CAACkE,KAAK,IAAI,IAAI,0BAAyB,GAAI;MAC5D,CAAC;IACH,CAAC;;IAED;IACA,MAAMyB,eAAc,GAAK1F,KAAK,IAAK;MACjC;MACA,MAAM2F,QAAO,GAAIhE,IAAI,CAACiE,GAAG,CAAC,GAAG5H,KAAK,CAACgC,KAAK,CAACtB,gBAAgB,CAACmH,IAAI,CAAC,CAAC,CAAC;MACjE,IAAIF,QAAO,KAAM,CAAC,EAAE,OAAO,SAAS,EAAE;;MAEtC,MAAMG,SAAQ,GAAInE,IAAI,CAACoE,GAAG,CAAC/F,KAAI,GAAI2F,QAAQ,EAAE,CAAC,CAAC;;MAE/C;MACA,IAAIG,SAAQ,KAAM,CAAC,EAAE,OAAO,SAAS;MACrC,IAAIA,SAAQ,GAAI,GAAG,EAAE,OAAO,SAAS;MACrC,IAAIA,SAAQ,GAAI,GAAG,EAAE,OAAO,SAAS;MACrC,IAAIA,SAAQ,GAAI,GAAG,EAAE,OAAO,SAAS;MACrC,IAAIA,SAAQ,GAAI,GAAG,EAAE,OAAO,SAAS;MACrC,OAAO,SAAS;IAClB,CAAC;IAED,OAAO;MACLjI,QAAQ;MACR6C,iBAAiB;MACjBE,MAAM;MACNrD,aAAa;MACbQ,aAAa;MACbC,KAAK;MACLF,OAAO;MACPgD,UAAU;MACVQ,aAAa;MACbU,gBAAgB;MAChBwB,oBAAoB;MACpBI,aAAa;MACbE,kBAAkB;MAClBrD,YAAY;MACZuD,aAAa;MACbK,uBAAuB;MACvBqB,eAAe;MACfvB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}