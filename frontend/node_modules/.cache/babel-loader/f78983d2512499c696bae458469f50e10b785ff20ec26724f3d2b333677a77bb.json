{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'EditObject',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const object = ref(null);\n    const modesInput = ref('');\n    const form = ref({});\n    onMounted(async () => {\n      const id = route.params.id;\n      try {\n        const res = await api.get(`/objets/${id}`);\n        object.value = res.data;\n        form.value = {\n          nom: res.data.nom,\n          description: res.data.description,\n          type: res.data.type,\n          marque: res.data.marque,\n          connectivite: res.data.connectivite,\n          statut: res.data.statut,\n          niveauDanger: res.data.niveauDanger,\n          supporteTemperature: res.data.supporteTemperature,\n          supporteMode: res.data.supporteMode,\n          temperatureCible: res.data.temperatureCible || 22,\n          mode: res.data.mode || ''\n        };\n        modesInput.value = res.data.modesDisponibles?.join(', ') || '';\n      } catch (err) {\n        alert(\"Erreur lors du chargement de l'objet\");\n        console.error(err);\n      }\n    });\n    const updateObject = async () => {\n      const payload = {\n        ...form.value,\n        temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n        mode: form.value.supporteMode ? form.value.mode : null,\n        modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n      };\n      try {\n        await api.put(`/objets/${route.params.id}`, payload);\n        alert('✅ Modifications enregistrées avec succès');\n        router.push('/manage/objects');\n      } catch (err) {\n        console.error('Erreur MAJ objet :', err);\n        alert('Erreur lors de la sauvegarde.');\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      object,\n      modesInput,\n      form,\n      updateObject,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","api","AppLayout","route","router","object","modesInput","form","id","params","res","get","value","data","nom","description","type","marque","connectivite","statut","niveauDanger","supporteTemperature","supporteMode","temperatureCible","mode","modesDisponibles","join","err","alert","console","error","updateObject","payload","split","map","m","trim","filter","Boolean","put","push"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/EditObject.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"neo-container\">\n      <div class=\"neo-card\">\n        <div class=\"neo-header\">\n          <div class=\"neo-header-icon\">\n            <i class=\"fas fa-sliders-h\"></i>\n          </div>\n          <h1>Smart Control Center</h1>\n        </div>\n        \n        <div v-if=\"!object\" class=\"neo-loading\">\n          <div class=\"neo-spinner\"></div>\n          <p>Initialisation de l'interface...</p>\n        </div>\n        \n        <form v-else @submit.prevent=\"updateObject\" class=\"neo-form\">\n          <div class=\"neo-columns\">\n            <div class=\"neo-column\">\n              <!-- Colonne de gauche -->\n              <div class=\"neo-field\">\n                <input v-model=\"form.nom\" id=\"nom\" required />\n                <label for=\"nom\">Identifiant</label>\n              </div>\n              \n              <div class=\"neo-field\">\n                <textarea v-model=\"form.description\" id=\"description\" required></textarea>\n                <label for=\"description\">Description</label>\n              </div>\n              \n              <div class=\"neo-field\">\n                <input v-model=\"form.type\" id=\"type\" required />\n                <label for=\"type\">Catégorie</label>\n              </div>\n              \n              <div class=\"neo-field\">\n                <input v-model=\"form.marque\" id=\"marque\" />\n                <label for=\"marque\">Fabricant</label>\n              </div>\n            </div>\n            \n            <div class=\"neo-column\">\n              <!-- Colonne de droite -->\n              <div class=\"neo-field-select\">\n                <label>Connectivité</label>\n                <div class=\"neo-toggle-group\">\n                  <div \n                    :class=\"['neo-toggle', form.connectivite === 'Wi-Fi' ? 'active' : '']\"\n                    @click=\"form.connectivite = 'Wi-Fi'\"\n                  >\n                    <i class=\"fas fa-wifi\"></i> Wi-Fi\n                  </div>\n                  <div \n                    :class=\"['neo-toggle', form.connectivite === 'Bluetooth' ? 'active' : '']\"\n                    @click=\"form.connectivite = 'Bluetooth'\"\n                  >\n                    <i class=\"fas fa-bluetooth-b\"></i> Bluetooth\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"neo-field-select\">\n                <label>État</label>\n                <div class=\"neo-toggle-group\">\n                  <div \n                    :class=\"['neo-toggle', form.statut === 'Actif' ? 'active' : '']\"\n                    @click=\"form.statut = 'Actif'\"\n                  >\n                    <i class=\"fas fa-power-off\"></i> Actif\n                  </div>\n                  <div \n                    :class=\"['neo-toggle', form.statut === 'Inactif' ? 'active' : '']\"\n                    @click=\"form.statut = 'Inactif'\"\n                  >\n                    <i class=\"fas fa-power-off\"></i> Inactif\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"neo-field-select\">\n                <label>Niveau de risque</label>\n                <div class=\"neo-toggle-group\">\n                  <div \n                    :class=\"['neo-toggle', form.niveauDanger === 'faible' ? 'active-safe' : '']\"\n                    @click=\"form.niveauDanger = 'faible'\"\n                  >\n                    <i class=\"fas fa-shield-alt\"></i> Standard\n                  </div>\n                  <div \n                    :class=\"['neo-toggle', form.niveauDanger === 'élevé' ? 'active-danger' : '']\"\n                    @click=\"form.niveauDanger = 'élevé'\"\n                  >\n                    <i class=\"fas fa-exclamation-triangle\"></i> Élevé\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"neo-controls\">\n                <div class=\"neo-switch\">\n                  <input type=\"checkbox\" id=\"temp\" v-model=\"form.supporteTemperature\">\n                  <label for=\"temp\">Contrôle température</label>\n                </div>\n                \n                <div class=\"neo-switch\">\n                  <input type=\"checkbox\" id=\"mode\" v-model=\"form.supporteMode\">\n                  <label for=\"mode\">Contrôle des modes</label>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- Section conditionnelle en bas -->\n          <div class=\"neo-extended\" v-if=\"form.supporteTemperature || form.supporteMode\">\n            <div v-if=\"form.supporteTemperature\" class=\"neo-range\">\n              <label>Température cible: {{ form.temperatureCible }}°C</label>\n              <input \n                type=\"range\" \n                v-model=\"form.temperatureCible\" \n                min=\"0\" \n                max=\"100\" \n                step=\"1\"\n              />\n            </div>\n            \n            <div v-if=\"form.supporteMode\" class=\"neo-mode-group\">\n              <div class=\"neo-field\">\n                <input v-model=\"modesInput\" id=\"modes\" placeholder=\"Ex: Espresso, Rapide...\"/>\n                <label for=\"modes\">Modes (séparés par virgules)</label>\n              </div>\n              \n              <div class=\"neo-field\">\n                <input v-model=\"form.mode\" id=\"default-mode\" placeholder=\"Ex: Espresso...\"/>\n                <label for=\"default-mode\">Mode par défaut</label>\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"neo-actions\">\n            <button type=\"button\" @click=\"router.push('/manage/objects')\" class=\"neo-btn-cancel\">\n              <i class=\"fas fa-times\"></i> Annuler\n            </button>\n            <button type=\"submit\" class=\"neo-btn-save\">\n              <i class=\"fas fa-save\"></i> Sauvegarder\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport api from '@/services/api'\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\n\nconst route = useRoute()\nconst router = useRouter()\nconst object = ref(null)\nconst modesInput = ref('')\n\nconst form = ref({})\n\nonMounted(async () => {\n  const id = route.params.id\n  try {\n    const res = await api.get(`/objets/${id}`)\n    object.value = res.data\n    form.value = {\n      nom: res.data.nom,\n      description: res.data.description,\n      type: res.data.type,\n      marque: res.data.marque,\n      connectivite: res.data.connectivite,\n      statut: res.data.statut,\n      niveauDanger: res.data.niveauDanger,\n      supporteTemperature: res.data.supporteTemperature,\n      supporteMode: res.data.supporteMode,\n      temperatureCible: res.data.temperatureCible || 22,\n      mode: res.data.mode || '',\n    }\n    modesInput.value = res.data.modesDisponibles?.join(', ') || ''\n  } catch (err) {\n    alert(\"Erreur lors du chargement de l'objet\")\n    console.error(err)\n  }\n})\n\nconst updateObject = async () => {\n  const payload = {\n    ...form.value,\n    temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n    mode: form.value.supporteMode ? form.value.mode : null,\n    modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n  }\n\n  try {\n    await api.put(`/objets/${route.params.id}`, payload)\n    alert('✅ Modifications enregistrées avec succès')\n    router.push('/manage/objects')\n  } catch (err) {\n    console.error('Erreur MAJ objet :', err)\n    alert('Erreur lors de la sauvegarde.')\n  }\n}\n</script>\n\n<style scoped>\n/* Fondation */\n.neo-container {\n  min-height: 90vh;\n  padding: 3rem 2rem;\n  background: #ecf0f3;\n  font-family: 'Segoe UI', Tahoma, sans-serif;\n}\n\n.neo-card {\n  max-width: 1000px;\n  margin: 0 auto;\n  background: #ecf0f3;\n  border-radius: 20px;\n  box-shadow: 8px 8px 15px #d1d9e6, -8px -8px 15px #ffffff;\n  padding: 2rem;\n}\n\n/* En-tête */\n.neo-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 1px solid rgba(0,0,0,0.05);\n  text-align: center;\n}\n\n.neo-header-icon {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #ecf0f3;\n  box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1rem;\n}\n\n.neo-header-icon i {\n  color: #00a6fb;\n  font-size: 1.5rem;\n}\n\n.neo-header h1 {\n  font-size: 2rem;\n  color: #2d3748;\n  font-weight: 600;\n  margin: 0;\n}\n\n/* Colonnes */\n.neo-columns {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n}\n\n@media (max-width: 768px) {\n  .neo-columns {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Champs */\n.neo-field {\n  position: relative;\n  margin-bottom: 1.5rem;\n}\n\n.neo-field input, \n.neo-field textarea {\n  width: 100%;\n  padding: 15px;\n  font-size: 1rem;\n  color: #2d3748;\n  background: #ecf0f3;\n  border: none;\n  border-radius: 12px;\n  box-shadow: inset 2px 2px 5px #d1d9e6, inset -2px -2px 5px #ffffff;\n  outline: none;\n  transition: 0.3s;\n}\n\n.neo-field textarea {\n  min-height: 120px;\n  resize: vertical;\n}\n\n.neo-field label {\n  position: absolute;\n  top: -10px;\n  left: 15px;\n  padding: 0 5px;\n  background: #ecf0f3;\n  font-size: 0.9rem;\n  color: #00a6fb;\n  transition: 0.3s;\n}\n\n.neo-field input:focus,\n.neo-field textarea:focus {\n  box-shadow: inset 3px 3px 8px #d1d9e6, inset -3px -3px 8px #ffffff;\n}\n\n/* Groupes de toggles */\n.neo-field-select {\n  margin-bottom: 1.5rem;\n}\n\n.neo-field-select label {\n  display: block;\n  margin-bottom: 0.5rem;\n  color: #2d3748;\n  font-weight: 500;\n}\n\n.neo-toggle-group {\n  display: flex;\n  gap: 1rem;\n}\n\n.neo-toggle {\n  flex: 1;\n  padding: 0.8rem;\n  text-align: center;\n  border-radius: 10px;\n  background: #ecf0f3;\n  box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;\n  cursor: pointer;\n  transition: 0.3s;\n}\n\n.neo-toggle:hover {\n  transform: scale(1.02);\n}\n\n.neo-toggle.active {\n  background: #00a6fb;\n  color: white;\n  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);\n}\n\n.neo-toggle.active-safe {\n  background: #38b2ac;\n  color: white;\n  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);\n}\n\n.neo-toggle.active-danger {\n  background: #f56565;\n  color: white;\n  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);\n}\n\n/* Contrôles */\n.neo-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 2rem;\n}\n\n.neo-switch {\n  display: flex;\n  align-items: center;\n}\n\n.neo-switch input {\n  appearance: none;\n  width: 50px;\n  height: 25px;\n  background: #ecf0f3;\n  border-radius: 30px;\n  box-shadow: inset 2px 2px 5px #d1d9e6, inset -2px -2px 5px #ffffff;\n  cursor: pointer;\n  position: relative;\n  margin-right: 15px;\n  transition: 0.3s;\n}\n\n.neo-switch input::before {\n  content: '';\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  top: 2.5px;\n  left: 3px;\n  background: #ecf0f3;\n  box-shadow: 2px 2px 5px #d1d9e6;\n  transition: 0.3s;\n}\n\n.neo-switch input:checked {\n  background: #00a6fb;\n}\n\n.neo-switch input:checked::before {\n  left: 27px;\n  background: white;\n}\n\n.neo-switch label {\n  color: #2d3748;\n  font-weight: 500;\n}\n\n/* Section étendue */\n.neo-extended {\n  margin-top: 2rem;\n  padding: 1.5rem;\n  border-radius: 12px;\n  background: #ecf0f3;\n  box-shadow: inset 2px 2px 5px #d1d9e6, inset -2px -2px 5px #ffffff;\n}\n\n.neo-range {\n  margin-bottom: 1.5rem;\n}\n\n.neo-range label {\n  display: block;\n  color: #2d3748;\n  margin-bottom: 0.5rem;\n}\n\n.neo-range input[type=\"range\"] {\n  -webkit-appearance: none;\n  width: 100%;\n  height: 10px;\n  background: #ecf0f3;\n  border-radius: 5px;\n  box-shadow: inset 2px 2px 5px #d1d9e6, inset -2px -2px 5px #ffffff;\n  outline: none;\n}\n\n.neo-range input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 25px;\n  height: 25px;\n  border-radius: 50%;\n  background: #00a6fb;\n  box-shadow: 2px 2px 5px #d1d9e6;\n  cursor: pointer;\n}\n\n.neo-mode-group {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n\n@media (max-width: 768px) {\n  .neo-mode-group {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Boutons d'action */\n.neo-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 2rem;\n}\n\n.neo-btn-save,\n.neo-btn-cancel {\n  padding: 1rem 2rem;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: 0.3s;\n}\n\n.neo-btn-save {\n  background: #00a6fb;\n  color: white;\n  box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;\n}\n\n.neo-btn-cancel {\n  background: #ecf0f3;\n  color: #2d3748;\n  box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;\n}\n\n.neo-btn-save:hover,\n.neo-btn-cancel:hover {\n  transform: translateY(-3px);\n}\n\n.neo-btn-save:active,\n.neo-btn-cancel:active {\n  transform: translateY(0);\n  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.1);\n}\n\n/* Loading */\n.neo-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 40vh;\n}\n\n.neo-spinner {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  border: 5px solid #ecf0f3;\n  border-top-color: #00a6fb;\n  animation: spin 1s infinite linear;\n  box-shadow: 0px 0px 15px #d1d9e6;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}