{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'NewRecettes',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const form = ref({\n      titre: '',\n      description: '',\n      objetsUtilises: []\n    });\n    const allObjects = ref([]);\n    const ingredients = ref([]);\n    const newIngredient = ref('');\n    const etapes = ref([]);\n    const newEtape = ref('');\n    const addIngredient = () => {\n      if (newIngredient.value.trim()) {\n        ingredients.value.push(newIngredient.value.trim());\n        newIngredient.value = '';\n      }\n    };\n    const removeIngredient = index => {\n      ingredients.value.splice(index, 1);\n    };\n    const addEtape = () => {\n      if (newEtape.value.trim()) {\n        etapes.value.push(newEtape.value.trim());\n        newEtape.value = '';\n      }\n    };\n    const removeEtape = index => {\n      etapes.value.splice(index, 1);\n    };\n    const submitRecette = async () => {\n      try {\n        const payload = {\n          ...form.value,\n          ingredients: ingredients.value,\n          etapes: etapes.value\n        };\n        await api.post('/recettes', payload);\n        alert('✅ Recette ajoutée !');\n        router.push('/recettes');\n      } catch (err) {\n        alert('❌ Erreur lors de la création');\n        console.error(err);\n      }\n    };\n    onMounted(async () => {\n      const res = await api.get('/objets');\n      allObjects.value = res.data;\n    });\n    const __returned__ = {\n      router,\n      form,\n      allObjects,\n      ingredients,\n      newIngredient,\n      etapes,\n      newEtape,\n      addIngredient,\n      removeIngredient,\n      addEtape,\n      removeEtape,\n      submitRecette,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","api","AppLayout","router","form","titre","description","objetsUtilises","allObjects","ingredients","newIngredient","etapes","newEtape","addIngredient","value","trim","push","removeIngredient","index","splice","addEtape","removeEtape","submitRecette","payload","post","alert","err","console","error","res","get","data"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/NewRecettes.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport api from '@/services/api'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  titre: '',\r\n  description: '',\r\n  objetsUtilises: []\r\n})\r\n\r\nconst allObjects = ref([])\r\nconst ingredients = ref([])\r\nconst newIngredient = ref('')\r\nconst etapes = ref([])\r\nconst newEtape = ref('')\r\n\r\nconst addIngredient = () => {\r\n  if (newIngredient.value.trim()) {\r\n    ingredients.value.push(newIngredient.value.trim())\r\n    newIngredient.value = ''\r\n  }\r\n}\r\n\r\nconst removeIngredient = (index) => {\r\n  ingredients.value.splice(index, 1)\r\n}\r\n\r\nconst addEtape = () => {\r\n  if (newEtape.value.trim()) {\r\n    etapes.value.push(newEtape.value.trim())\r\n    newEtape.value = ''\r\n  }\r\n}\r\n\r\nconst removeEtape = (index) => {\r\n  etapes.value.splice(index, 1)\r\n}\r\n\r\nconst submitRecette = async () => {\r\n  try {\r\n    const payload = {\r\n      ...form.value,\r\n      ingredients: ingredients.value,\r\n      etapes: etapes.value\r\n    }\r\n    await api.post('/recettes', payload)\r\n    alert('✅ Recette ajoutée !')\r\n    router.push('/recettes')\r\n  } catch (err) {\r\n    alert('❌ Erreur lors de la création')\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  const res = await api.get('/objets')\r\n  allObjects.value = res.data\r\n})\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"nouvelle-recette-page\">\r\n      <h2>➕ Nouvelle Recette</h2>\r\n      <form @submit.prevent=\"submitRecette\" class=\"recette-form\">\r\n\r\n        <div class=\"form-group\">\r\n          <label>Titre</label>\r\n          <input v-model=\"form.titre\" required />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Description</label>\r\n          <textarea v-model=\"form.description\" required></textarea>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Objets utilisés</label>\r\n          <select v-model=\"form.objetsUtilises\" multiple>\r\n            <option v-for=\"obj in allObjects\" :value=\"obj._id\" :key=\"obj._id\">\r\n              {{ obj.nom }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Ingrédients</label>\r\n          <div class=\"dynamic-list\">\r\n            <div class=\"input-group\">\r\n              <input v-model=\"newIngredient\" placeholder=\"Ajouter un ingrédient\" />\r\n              <button type=\"button\" @click=\"addIngredient\">➕</button>\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"(item, index) in ingredients\" :key=\"index\">\r\n                {{ item }}\r\n                <button type=\"button\" @click=\"removeIngredient(index)\">❌</button>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Étapes</label>\r\n          <div class=\"dynamic-list\">\r\n            <div class=\"input-group\">\r\n              <input v-model=\"newEtape\" placeholder=\"Ajouter une étape\" />\r\n              <button type=\"button\" @click=\"addEtape\">➕</button>\r\n            </div>\r\n            <ol>\r\n              <li v-for=\"(etape, index) in etapes\" :key=\"index\">\r\n                {{ etape }}\r\n                <button type=\"button\" @click=\"removeEtape(index)\">❌</button>\r\n              </li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn-submit\">Créer</button>\r\n      </form>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.nouvelle-recette-page {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.recette-form {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\nlabel {\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\ninput,\r\ntextarea,\r\nselect {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ccc;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.dynamic-list ul,\r\n.dynamic-list ol {\r\n  margin-top: 1rem;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\nbutton {\r\n  background-color: #28a745;\r\n  color: white;\r\n  padding: 8px 14px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton.btn-submit {\r\n  width: 100%;\r\n  margin-top: 2rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\nbutton[type=\"button\"] {\r\n  background-color: #17a2b8;\r\n}\r\n</style>\r\n\r\n"],"mappings":";AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,GAAG,MAAM,gBAAgB;AAChC,OAAOC,SAAS,MAAM,8BAA8B;;;;;;;IAEpD,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;IAE1B,MAAMI,IAAI,GAAGN,GAAG,CAAC;MACfO,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,cAAc,EAAE;IAClB,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMW,WAAW,GAAGX,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMY,aAAa,GAAGZ,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMa,MAAM,GAAGb,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMc,QAAQ,GAAGd,GAAG,CAAC,EAAE,CAAC;IAExB,MAAMe,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIH,aAAa,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;QAC9BN,WAAW,CAACK,KAAK,CAACE,IAAI,CAACN,aAAa,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;QAClDL,aAAa,CAACI,KAAK,GAAG,EAAE;MAC1B;IACF,CAAC;IAED,MAAMG,gBAAgB,GAAIC,KAAK,IAAK;MAClCT,WAAW,CAACK,KAAK,CAACK,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IACpC,CAAC;IAED,MAAME,QAAQ,GAAGA,CAAA,KAAM;MACrB,IAAIR,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;QACzBJ,MAAM,CAACG,KAAK,CAACE,IAAI,CAACJ,QAAQ,CAACE,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;QACxCH,QAAQ,CAACE,KAAK,GAAG,EAAE;MACrB;IACF,CAAC;IAED,MAAMO,WAAW,GAAIH,KAAK,IAAK;MAC7BP,MAAM,CAACG,KAAK,CAACK,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IAC/B,CAAC;IAED,MAAMI,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,OAAO,GAAG;UACd,GAAGnB,IAAI,CAACU,KAAK;UACbL,WAAW,EAAEA,WAAW,CAACK,KAAK;UAC9BH,MAAM,EAAEA,MAAM,CAACG;QACjB,CAAC;QACD,MAAMb,GAAG,CAACuB,IAAI,CAAC,WAAW,EAAED,OAAO,CAAC;QACpCE,KAAK,CAAC,qBAAqB,CAAC;QAC5BtB,MAAM,CAACa,IAAI,CAAC,WAAW,CAAC;MAC1B,CAAC,CAAC,OAAOU,GAAG,EAAE;QACZD,KAAK,CAAC,8BAA8B,CAAC;QACrCE,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MACpB;IACF,CAAC;IAED3B,SAAS,CAAC,YAAY;MACpB,MAAM8B,GAAG,GAAG,MAAM5B,GAAG,CAAC6B,GAAG,CAAC,SAAS,CAAC;MACpCtB,UAAU,CAACM,KAAK,GAAGe,GAAG,CAACE,IAAI;IAC7B,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}