{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'EditObject',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const object = ref(null);\n    const modesInput = ref('');\n    const form = ref({});\n    onMounted(async () => {\n      const id = route.params.id;\n      try {\n        const res = await api.get(`/objets/${id}`);\n        object.value = res.data;\n        form.value = {\n          nom: res.data.nom,\n          description: res.data.description,\n          type: res.data.type,\n          marque: res.data.marque,\n          connectivite: res.data.connectivite,\n          statut: res.data.statut,\n          niveauDanger: res.data.niveauDanger,\n          supporteTemperature: res.data.supporteTemperature,\n          supporteMode: res.data.supporteMode,\n          temperatureCible: res.data.temperatureCible || 20,\n          mode: res.data.mode || ''\n        };\n        modesInput.value = res.data.modesDisponibles?.join(', ') || '';\n      } catch (err) {\n        alert(\"Erreur lors du chargement de l'objet\");\n        console.error(err);\n      }\n    });\n    const updateObject = async () => {\n      const payload = {\n        ...form.value,\n        temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n        mode: form.value.supporteMode ? form.value.mode : null,\n        modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n      };\n      try {\n        await api.put(`/objets/${route.params.id}`, payload);\n        alert('✅ Modifications enregistrées avec succès');\n        router.push('/manage/objects');\n      } catch (err) {\n        console.error('Erreur MAJ objet :', err);\n        alert('Erreur lors de la sauvegarde.');\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      object,\n      modesInput,\n      form,\n      updateObject,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","api","AppLayout","route","router","object","modesInput","form","id","params","res","get","value","data","nom","description","type","marque","connectivite","statut","niveauDanger","supporteTemperature","supporteMode","temperatureCible","mode","modesDisponibles","join","err","alert","console","error","updateObject","payload","split","map","m","trim","filter","Boolean","put","push"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/EditObject.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"edit-container\">\n      <div class=\"edit-card\">\n        <h1 class=\"edit-title\">\n          <i class=\"fas fa-pen-fancy\"></i> Modifier l'objet\n        </h1>\n        \n        <div v-if=\"!object\" class=\"loading\">\n          <div class=\"spinner\"></div>\n        </div>\n        \n        <form v-else @submit.prevent=\"updateObject\" class=\"edit-form\">\n          <div class=\"form-grid\">\n            <div class=\"form-group\">\n              <label>Nom</label>\n              <input v-model=\"form.nom\" required />\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Type</label>\n              <input v-model=\"form.type\" required />\n            </div>\n            \n            <div class=\"form-group span-2\">\n              <label>Description</label>\n              <textarea v-model=\"form.description\" required></textarea>\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Marque</label>\n              <input v-model=\"form.marque\" />\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Connectivité</label>\n              <select v-model=\"form.connectivite\">\n                <option value=\"Wi-Fi\">Wi-Fi</option>\n                <option value=\"Bluetooth\">Bluetooth</option>\n              </select>\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Statut</label>\n              <select v-model=\"form.statut\">\n                <option value=\"Actif\">Actif</option>\n                <option value=\"Inactif\">Inactif</option>\n              </select>\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Niveau de danger</label>\n              <select v-model=\"form.niveauDanger\" :class=\"form.niveauDanger === 'élevé' ? 'danger' : ''\">\n                <option value=\"faible\">Faible</option>\n                <option value=\"élevé\">Élevé</option>\n              </select>\n            </div>\n          </div>\n          \n          <div class=\"features-section\">\n            <h2 class=\"section-title\">Fonctionnalités supplémentaires</h2>\n            <div class=\"checkboxes\">\n              <label class=\"checkbox\">\n                <input type=\"checkbox\" v-model=\"form.supporteTemperature\" />\n                <span class=\"checkbox-text\">Contrôle de température</span>\n              </label>\n              \n              <label class=\"checkbox\">\n                <input type=\"checkbox\" v-model=\"form.supporteMode\" />\n                <span class=\"checkbox-text\">Modes d'utilisation</span>\n              </label>\n            </div>\n          </div>\n          \n          <div class=\"optional-settings\" v-if=\"form.supporteTemperature || form.supporteMode\">\n            <div v-if=\"form.supporteTemperature\" class=\"form-group\">\n              <label>Température cible (°C)</label>\n              <input v-model=\"form.temperatureCible\" type=\"number\" min=\"0\" />\n            </div>\n            \n            <div v-if=\"form.supporteMode\" class=\"form-group\">\n              <label>Modes disponibles <span class=\"hint\">(séparés par virgules)</span></label>\n              <input v-model=\"modesInput\" placeholder=\"Ex: Espresso, Rapide...\" />\n            </div>\n            \n            <div v-if=\"form.supporteMode\" class=\"form-group\">\n              <label>Mode par défaut</label>\n              <input v-model=\"form.mode\" placeholder=\"Ex: Espresso...\" />\n            </div>\n          </div>\n          \n          <div class=\"form-actions\">\n            <button type=\"button\" @click=\"router.push('/manage/objects')\" class=\"btn-cancel\">\n              <i class=\"fas fa-times\"></i> Annuler\n            </button>\n            <button type=\"submit\" class=\"btn-save\">\n              <i class=\"fas fa-save\"></i> Enregistrer\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport api from '@/services/api'\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\n\nconst route = useRoute()\nconst router = useRouter()\nconst object = ref(null)\nconst modesInput = ref('')\n\nconst form = ref({})\n\nonMounted(async () => {\n  const id = route.params.id\n  try {\n    const res = await api.get(`/objets/${id}`)\n    object.value = res.data\n    form.value = {\n      nom: res.data.nom,\n      description: res.data.description,\n      type: res.data.type,\n      marque: res.data.marque,\n      connectivite: res.data.connectivite,\n      statut: res.data.statut,\n      niveauDanger: res.data.niveauDanger,\n      supporteTemperature: res.data.supporteTemperature,\n      supporteMode: res.data.supporteMode,\n      temperatureCible: res.data.temperatureCible || 20,\n      mode: res.data.mode || '',\n    }\n    modesInput.value = res.data.modesDisponibles?.join(', ') || ''\n  } catch (err) {\n    alert(\"Erreur lors du chargement de l'objet\")\n    console.error(err)\n  }\n})\n\nconst updateObject = async () => {\n  const payload = {\n    ...form.value,\n    temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n    mode: form.value.supporteMode ? form.value.mode : null,\n    modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n  }\n\n  try {\n    await api.put(`/objets/${route.params.id}`, payload)\n    alert('✅ Modifications enregistrées avec succès')\n    router.push('/manage/objects')\n  } catch (err) {\n    console.error('Erreur MAJ objet :', err)\n    alert('Erreur lors de la sauvegarde.')\n  }\n}\n</script>\n\n<style scoped>\n.edit-container {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 0 1rem;\n}\n\n.edit-card {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);\n  padding: 1.5rem;\n  margin-top: 1rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.edit-title {\n  font-size: 1.5rem;\n  color: #2c5038;\n  margin-bottom: 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border-bottom: 1px solid rgba(44, 80, 56, 0.1);\n  padding-bottom: 0.6rem;\n}\n\n.edit-title i {\n  color: #036672;\n}\n\n.edit-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n}\n\n.form-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.span-2 {\n  grid-column: span 2;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n}\n\n.form-group label {\n  margin-bottom: 0.3rem;\n  font-weight: 500;\n  color: #2c5038;\n  font-size: 0.9rem;\n}\n\n.hint {\n  font-size: 0.75rem;\n  font-weight: normal;\n  color: #666;\n  font-style: italic;\n}\n\n.form-group input,\n.form-group select,\n.form-group textarea {\n  padding: 0.5rem 0.7rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n  font-size: 0.95rem;\n  transition: all 0.25s;\n  background-color: #f8fafc;\n}\n\n.form-group textarea {\n  min-height: 90px;\n  resize: vertical;\n}\n\n.form-group input:focus,\n.form-group select:focus,\n.form-group textarea:focus {\n  outline: none;\n  border-color: #2c5038;\n  box-shadow: 0 0 0 2px rgba(44, 80, 56, 0.1);\n  background-color: white;\n}\n\n.features-section {\n  background-color: #f8fafc;\n  padding: 1rem;\n  border-radius: 6px;\n  border-left: 3px solid #2c5038;\n}\n\n.section-title {\n  margin-top: 0;\n  margin-bottom: 0.5rem;\n  font-size: 0.95rem;\n  color: #2c5038;\n}\n\n.checkboxes {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.checkbox {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox input {\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  accent-color: #2c5038;\n}\n\n.checkbox-text {\n  color: #1f2a36;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n.optional-settings {\n  background-color: #f0f9ff;\n  padding: 1rem;\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  animation: slideDown 0.3s ease-out;\n  border-left: 3px solid #036672;\n}\n\n@keyframes slideDown {\n  from { opacity: 0; transform: translateY(-10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.7rem;\n  margin-top: 1rem;\n}\n\n.btn-save, .btn-cancel {\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  font-weight: 500;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.btn-save {\n  background: #2c5038;\n  color: white;\n  border: none;\n}\n\n.btn-cancel {\n  background: white;\n  color: #1f2a36;\n  border: 1px solid #e2e8f0;\n}\n\n.btn-save:hover {\n  background: #1e3725;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 6px rgba(44, 80, 56, 0.2);\n}\n\n.btn-cancel:hover {\n  background: #f7fafc;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.loading {\n  display: flex;\n  justify-content: center;\n  padding: 2rem 0;\n}\n\n.spinner {\n  width: 30px;\n  height: 30px;\n  border: 3px solid rgba(44, 80, 56, 0.1);\n  border-top-color: #2c5038;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.danger {\n  border-color: #e53e3e;\n  color: #c53030;\n}\n\n.danger:focus {\n  border-color: #e53e3e;\n  box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.1);\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n@media (max-width: 600px) {\n  .edit-card {\n    padding: 1rem;\n  }\n  \n  .form-grid {\n    grid-template-columns: 1fr;\n    gap: 0.8rem;\n  }\n  \n  .span-2 {\n    grid-column: span 1;\n  }\n  \n  .edit-title {\n    font-size: 1.3rem;\n    margin-bottom: 1rem;\n  }\n  \n  .form-actions {\n    flex-direction: column-reverse;\n  }\n  \n  .btn-save, .btn-cancel {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}