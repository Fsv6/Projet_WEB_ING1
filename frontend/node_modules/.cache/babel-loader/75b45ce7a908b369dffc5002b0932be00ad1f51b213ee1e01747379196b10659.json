{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport api from '@/services/api';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'EditObject',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const object = ref(null);\n    const modesInput = ref('');\n    const form = ref({});\n    onMounted(async () => {\n      const id = route.params.id;\n      try {\n        const res = await api.get(`/objets/${id}`);\n        object.value = res.data;\n        form.value = {\n          nom: res.data.nom,\n          description: res.data.description,\n          type: res.data.type,\n          marque: res.data.marque,\n          connectivite: res.data.connectivite,\n          statut: res.data.statut,\n          niveauDanger: res.data.niveauDanger,\n          supporteTemperature: res.data.supporteTemperature,\n          supporteMode: res.data.supporteMode,\n          temperatureCible: res.data.temperatureCible || 20,\n          mode: res.data.mode || ''\n        };\n        modesInput.value = res.data.modesDisponibles?.join(', ') || '';\n      } catch (err) {\n        alert(\"Erreur lors du chargement de l'objet\");\n        console.error(err);\n      }\n    });\n    const updateObject = async () => {\n      const payload = {\n        ...form.value,\n        temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n        mode: form.value.supporteMode ? form.value.mode : null,\n        modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n      };\n      try {\n        await api.put(`/objets/${route.params.id}`, payload);\n        alert('✅ Modifications enregistrées avec succès');\n        router.push('/manage/objects');\n      } catch (err) {\n        console.error('Erreur MAJ objet :', err);\n        alert('Erreur lors de la sauvegarde.');\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      object,\n      modesInput,\n      form,\n      updateObject,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","api","AppLayout","route","router","object","modesInput","form","id","params","res","get","value","data","nom","description","type","marque","connectivite","statut","niveauDanger","supporteTemperature","supporteMode","temperatureCible","mode","modesDisponibles","join","err","alert","console","error","updateObject","payload","split","map","m","trim","filter","Boolean","put","push"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/EditObject.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"edit-container\">\n      <div class=\"edit-card\">\n        <h1 class=\"edit-title\">\n          <i class=\"fas fa-pen\"></i> Modifier l'objet\n        </h1>\n        \n        <div v-if=\"!object\" class=\"loading\">\n          <div class=\"spinner\"></div>\n        </div>\n        \n        <form v-else @submit.prevent=\"updateObject\" class=\"edit-form\">\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label>Nom</label>\n              <input v-model=\"form.nom\" required />\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Type</label>\n              <input v-model=\"form.type\" required />\n            </div>\n          </div>\n          \n          <div class=\"form-group\">\n            <label>Description</label>\n            <textarea v-model=\"form.description\" required></textarea>\n          </div>\n          \n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label>Marque</label>\n              <input v-model=\"form.marque\" />\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Connectivité</label>\n              <select v-model=\"form.connectivite\">\n                <option value=\"Wi-Fi\">Wi-Fi</option>\n                <option value=\"Bluetooth\">Bluetooth</option>\n              </select>\n            </div>\n          </div>\n          \n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label>Statut</label>\n              <select v-model=\"form.statut\">\n                <option value=\"Actif\">Actif</option>\n                <option value=\"Inactif\">Inactif</option>\n              </select>\n            </div>\n            \n            <div class=\"form-group\">\n              <label>Niveau de danger</label>\n              <select v-model=\"form.niveauDanger\" :class=\"form.niveauDanger === 'élevé' ? 'danger' : ''\">\n                <option value=\"faible\">Faible</option>\n                <option value=\"élevé\">Élevé</option>\n              </select>\n            </div>\n          </div>\n          \n          <div class=\"checkboxes\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" v-model=\"form.supporteTemperature\" />\n              <span>Supporte la température</span>\n            </label>\n            \n            <label class=\"checkbox\">\n              <input type=\"checkbox\" v-model=\"form.supporteMode\" />\n              <span>Supporte les modes</span>\n            </label>\n          </div>\n          \n          <div v-if=\"form.supporteTemperature\" class=\"form-group\">\n            <label>Température cible (en °C)</label>\n            <input v-model=\"form.temperatureCible\" type=\"number\" min=\"0\" />\n          </div>\n          \n          <div v-if=\"form.supporteMode\" class=\"form-group\">\n            <label>Modes disponibles (séparés par virgules)</label>\n            <input v-model=\"modesInput\" placeholder=\"Ex: Espresso, Rapide...\" />\n          </div>\n          \n          <div v-if=\"form.supporteMode\" class=\"form-group\">\n            <label>Mode par défaut</label>\n            <input v-model=\"form.mode\" placeholder=\"Ex: Espresso...\" />\n          </div>\n          \n          <div class=\"buttons\">\n            <button type=\"button\" @click=\"router.push('/manage/objects')\" class=\"btn-cancel\">Annuler</button>\n            <button type=\"submit\" class=\"btn-save\">Enregistrer</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport api from '@/services/api'\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\n\nconst route = useRoute()\nconst router = useRouter()\nconst object = ref(null)\nconst modesInput = ref('')\n\nconst form = ref({})\n\nonMounted(async () => {\n  const id = route.params.id\n  try {\n    const res = await api.get(`/objets/${id}`)\n    object.value = res.data\n    form.value = {\n      nom: res.data.nom,\n      description: res.data.description,\n      type: res.data.type,\n      marque: res.data.marque,\n      connectivite: res.data.connectivite,\n      statut: res.data.statut,\n      niveauDanger: res.data.niveauDanger,\n      supporteTemperature: res.data.supporteTemperature,\n      supporteMode: res.data.supporteMode,\n      temperatureCible: res.data.temperatureCible || 20,\n      mode: res.data.mode || '',\n    }\n    modesInput.value = res.data.modesDisponibles?.join(', ') || ''\n  } catch (err) {\n    alert(\"Erreur lors du chargement de l'objet\")\n    console.error(err)\n  }\n})\n\nconst updateObject = async () => {\n  const payload = {\n    ...form.value,\n    temperatureCible: form.value.supporteTemperature ? form.value.temperatureCible || 0 : null,\n    mode: form.value.supporteMode ? form.value.mode : null,\n    modesDisponibles: form.value.supporteMode ? modesInput.value.split(',').map(m => m.trim()).filter(Boolean) : []\n  }\n\n  try {\n    await api.put(`/objets/${route.params.id}`, payload)\n    alert('✅ Modifications enregistrées avec succès')\n    router.push('/manage/objects')\n  } catch (err) {\n    console.error('Erreur MAJ objet :', err)\n    alert('Erreur lors de la sauvegarde.')\n  }\n}\n</script>\n\n<style scoped>\n.edit-container {\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 0 1rem;\n}\n\n.edit-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  padding: 2rem;\n}\n\n.edit-title {\n  font-size: 1.8rem;\n  color: #3182ce;\n  margin-bottom: 2rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.edit-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.2rem;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n}\n\n.form-group label {\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: #4a5568;\n}\n\n.form-group input,\n.form-group select,\n.form-group textarea {\n  padding: 0.7rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 1rem;\n  transition: all 0.2s;\n}\n\n.form-group textarea {\n  min-height: 120px;\n  resize: vertical;\n}\n\n.form-group input:focus,\n.form-group select:focus,\n.form-group textarea:focus {\n  outline: none;\n  border-color: #3182ce;\n  box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);\n}\n\n.checkboxes {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1.2rem;\n  margin: 0.5rem 0;\n}\n\n.checkbox {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox input {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n}\n\n.checkbox span {\n  color: #4a5568;\n  font-weight: 500;\n}\n\n.buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.btn-save, .btn-cancel {\n  padding: 0.7rem 1.5rem;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn-save {\n  background: #3182ce;\n  color: white;\n  border: none;\n}\n\n.btn-cancel {\n  background: white;\n  color: #4a5568;\n  border: 1px solid #e2e8f0;\n}\n\n.btn-save:hover {\n  background: #2c5282;\n}\n\n.btn-cancel:hover {\n  background: #f7fafc;\n}\n\n.loading {\n  display: flex;\n  justify-content: center;\n  padding: 3rem 0;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(49, 130, 206, 0.2);\n  border-top-color: #3182ce;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.danger {\n  border-color: #f56565;\n  color: #c53030;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n@media (max-width: 640px) {\n  .edit-card {\n    padding: 1.5rem;\n  }\n  \n  .buttons {\n    flex-direction: column;\n  }\n  \n  .btn-save, .btn-cancel {\n    width: 100%;\n    text-align: center;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}