{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { onMounted, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useRecettesStore } from '@/stores/recettesStore';\nimport { useAuthStore } from '@/stores/auth';\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nexport default {\n  __name: 'RecettesView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const recettesStore = useRecettesStore();\n    const auth = useAuthStore();\n    const router = useRouter();\n    const isVisiteur = computed(() => auth.role === 'visiteur');\n    const isIntermediaireOrMore = computed(() => {\n      const niveaux = ['d√©butant', 'interm√©diaire', 'avanc√©', 'expert'];\n      return niveaux.indexOf(auth.niveau) >= 1;\n    });\n    const recettesPerso = computed(() => recettesStore.recettes.filter(r => r.auteur === auth.userId));\n    const autresRecettes = computed(() => recettesStore.recettes.filter(r => r.auteur !== auth.userId));\n    const peutModifier = recette => auth.userId === recette.auteur && isIntermediaireOrMore.value;\n    const goToDetails = id => {\n      router.push(`/recettes/${id}`);\n    };\n    const goToEdit = id => {\n      router.push(`/recettes/${id}/edit`);\n    };\n    const goToNew = () => {\n      router.push('/recettes/new');\n    };\n    onMounted(() => {\n      recettesStore.fetchRecettes();\n    });\n    const __returned__ = {\n      recettesStore,\n      auth,\n      router,\n      isVisiteur,\n      isIntermediaireOrMore,\n      recettesPerso,\n      autresRecettes,\n      peutModifier,\n      goToDetails,\n      goToEdit,\n      goToNew,\n      onMounted,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRecettesStore() {\n        return useRecettesStore;\n      },\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      AppLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","computed","useRouter","useRecettesStore","useAuthStore","AppLayout","recettesStore","auth","router","isVisiteur","role","isIntermediaireOrMore","niveaux","indexOf","niveau","recettesPerso","recettes","filter","r","auteur","userId","autresRecettes","peutModifier","recette","value","goToDetails","id","push","goToEdit","goToNew","fetchRecettes"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/views/RecettesView.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useRecettesStore } from '@/stores/recettesStore'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst recettesStore = useRecettesStore()\r\nconst auth = useAuthStore()\r\nconst router = useRouter()\r\n\r\nconst isVisiteur = computed(() => auth.role === 'visiteur')\r\nconst isIntermediaireOrMore = computed(() => {\r\n  const niveaux = ['d√©butant', 'interm√©diaire', 'avanc√©', 'expert']\r\n  return niveaux.indexOf(auth.niveau) >= 1\r\n})\r\n\r\nconst recettesPerso = computed(() =>\r\n    recettesStore.recettes.filter(r => r.auteur === auth.userId)\r\n)\r\n\r\nconst autresRecettes = computed(() =>\r\n    recettesStore.recettes.filter(r => r.auteur !== auth.userId)\r\n)\r\n\r\nconst peutModifier = (recette) =>\r\n    auth.userId === recette.auteur && isIntermediaireOrMore.value\r\n\r\nconst goToDetails = (id) => {\r\n  router.push(`/recettes/${id}`)\r\n}\r\n\r\nconst goToEdit = (id) => {\r\n  router.push(`/recettes/${id}/edit`)\r\n}\r\n\r\nconst goToNew = () => {\r\n  router.push('/recettes/new')\r\n}\r\n\r\nonMounted(() => {\r\n  recettesStore.fetchRecettes()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"recettes-page\">\r\n      <h1>Recettes √† tester dans votre cuisine connect√©e</h1>\r\n\r\n      <!-- Bouton pour ajouter une recette -->\r\n      <div v-if=\"!isVisiteur && isIntermediaireOrMore\" class=\"btn-new-container\">\r\n        <button @click=\"goToNew\" class=\"btn-new\">‚ûï Nouvelle recette</button>\r\n      </div>\r\n\r\n      <!-- Recettes personnelles -->\r\n      <h2 v-if=\"recettesPerso.length\">üìå Vos recettes</h2>\r\n      <div\r\n          class=\"recette-card\"\r\n          v-for=\"recette in recettesPerso\"\r\n          :key=\"recette._id\"\r\n      >\r\n        <h3>{{ recette.titre }}</h3>\r\n        <p>{{ recette.description }}</p>\r\n        <button @click=\"goToDetails(recette._id)\" class=\"btn-view\">üëÄ Consulter</button>\r\n\r\n        <button\r\n            class=\"btn-edit\"\r\n            :disabled=\"!peutModifier(recette)\"\r\n            :title=\"!peutModifier(recette) ? 'Tu n‚Äôas pas les droits pour modifier cette recette' : 'Modifier la recette'\"\r\n            @click=\"goToEdit(recette._id)\"\r\n        >\r\n          ‚úèÔ∏è Modifier\r\n        </button>\r\n      </div>\r\n\r\n\r\n      <!-- Autres recettes -->\r\n      <h2 v-if=\"autresRecettes.length\">üçΩÔ∏è Autres recettes</h2>\r\n      <div\r\n          class=\"recette-card\"\r\n          v-for=\"recette in autresRecettes\"\r\n          :key=\"recette._id\"\r\n      >\r\n        <h3>{{ recette.titre }}</h3>\r\n        <p v-if=\"!isVisiteur\">{{ recette.description }}</p>\r\n        <p v-else class=\"blur\">Contenu r√©serv√© aux utilisateurs inscrits</p>\r\n        <button\r\n            v-if=\"!isVisiteur\"\r\n            class=\"btn-view\"\r\n            @click=\"goToDetails(recette._id)\"\r\n        >\r\n          üëÄ Consulter\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.recettes-page {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.recette-card {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 10px;\r\n  margin-bottom: 1.5rem;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.btn-view, .btn-new, .btn-edit {\r\n  background-color: #007bff;\r\n  color: white;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n  margin-right: 8px;\r\n  font-weight: bold;\r\n}\r\n\r\n.btn-edit {\r\n  background-color: #f0ad4e;\r\n}\r\n\r\n.btn-new-container {\r\n  text-align: right;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.blur {\r\n  filter: blur(4px);\r\n  color: #888;\r\n}\r\n\r\n.blocked-msg {\r\n  font-size: 0.8rem;\r\n  color: #888;\r\n  text-align: center;\r\n  margin-top: 5px;\r\n}\r\n</style>\r\n"],"mappings":";;;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AACzC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,SAASC,YAAY,QAAQ,eAAe;AAC5C,OAAOC,SAAS,MAAM,8BAA8B;;;;;;;IAEpD,MAAMC,aAAa,GAAGH,gBAAgB,CAAC,CAAC;IACxC,MAAMI,IAAI,GAAGH,YAAY,CAAC,CAAC;IAC3B,MAAMI,MAAM,GAAGN,SAAS,CAAC,CAAC;IAE1B,MAAMO,UAAU,GAAGR,QAAQ,CAAC,MAAMM,IAAI,CAACG,IAAI,KAAK,UAAU,CAAC;IAC3D,MAAMC,qBAAqB,GAAGV,QAAQ,CAAC,MAAM;MAC3C,MAAMW,OAAO,GAAG,CAAC,UAAU,EAAE,eAAe,EAAE,QAAQ,EAAE,QAAQ,CAAC;MACjE,OAAOA,OAAO,CAACC,OAAO,CAACN,IAAI,CAACO,MAAM,CAAC,IAAI,CAAC;IAC1C,CAAC,CAAC;IAEF,MAAMC,aAAa,GAAGd,QAAQ,CAAC,MAC3BK,aAAa,CAACU,QAAQ,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKZ,IAAI,CAACa,MAAM,CAC/D,CAAC;IAED,MAAMC,cAAc,GAAGpB,QAAQ,CAAC,MAC5BK,aAAa,CAACU,QAAQ,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKZ,IAAI,CAACa,MAAM,CAC/D,CAAC;IAED,MAAME,YAAY,GAAIC,OAAO,IACzBhB,IAAI,CAACa,MAAM,KAAKG,OAAO,CAACJ,MAAM,IAAIR,qBAAqB,CAACa,KAAK;IAEjE,MAAMC,WAAW,GAAIC,EAAE,IAAK;MAC1BlB,MAAM,CAACmB,IAAI,CAAC,aAAaD,EAAE,EAAE,CAAC;IAChC,CAAC;IAED,MAAME,QAAQ,GAAIF,EAAE,IAAK;MACvBlB,MAAM,CAACmB,IAAI,CAAC,aAAaD,EAAE,OAAO,CAAC;IACrC,CAAC;IAED,MAAMG,OAAO,GAAGA,CAAA,KAAM;MACpBrB,MAAM,CAACmB,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED3B,SAAS,CAAC,MAAM;MACdM,aAAa,CAACwB,aAAa,CAAC,CAAC;IAC/B,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}