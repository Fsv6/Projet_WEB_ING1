{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"control-object-page\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"object-form\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"AppLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[9] || (_cache[9] = _createElementVNode(\"h1\", null, \"Contrôler l'objet\", -1 /* HOISTED */)), $setup.object ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, _toDisplayString($setup.object.nom), 1 /* TEXT */), _createCommentVNode(\" Température \"), $setup.showTemperature ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", null, \"Température cible (°C)\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.temperatureCible = $event),\n      type: \"number\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.temperatureCible]])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Mode \"), $setup.showMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"Mode\", -1 /* HOISTED */)), $setup.object.modesDisponibles.length > 0 ? _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n      key: 0,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.mode = $event)\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.object.modesDisponibles, option => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: option,\n        value: option\n      }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_5);\n    }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */)), [[_vModelSelect, $setup.form.mode]]) : _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n      key: 1,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.mode = $event),\n      type: \"text\",\n      placeholder: \"Entrer un mode manuellement\"\n    }, null, 512 /* NEED_PATCH */)), [[_vModelText, $setup.form.mode]])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Statut \"), _createElementVNode(\"div\", _hoisted_6, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Statut\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.statut = $event)\n    }, _cache[6] || (_cache[6] = [_createElementVNode(\"option\", {\n      value: \"Actif\"\n    }, \"Actif\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"Inactif\"\n    }, \"Inactif\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.statut]])]), _createElementVNode(\"button\", {\n      onClick: $setup.applyChanges,\n      class: \"btn-apply\"\n    }, \"Appliquer les changements\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[8] || (_cache[8] = [_createElementVNode(\"p\", null, \"Chargement de l'objet...\", -1 /* HOISTED */)])))])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","$setup","default","_withCtx","_createElementVNode","_hoisted_1","object","_createElementBlock","_hoisted_2","_toDisplayString","nom","_createCommentVNode","showTemperature","_hoisted_3","_cache","$event","form","temperatureCible","type","showMode","_hoisted_4","modesDisponibles","length","mode","_Fragment","_renderList","option","value","_hoisted_5","placeholder","_hoisted_6","statut","onClick","applyChanges","_hoisted_7","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\ControlObjectView.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, ref, computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport api from '@/services/api'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst route = useRoute()\r\nconst object = ref(null)\r\nconst form = ref({\r\n  temperatureCible: 0,\r\n  mode: '',\r\n  statut: 'Actif'\r\n})\r\n\r\n// Ces computed doivent être en dehors de onMounted\r\nconst showTemperature = computed(() => object.value?.supporteTemperature)\r\nconst showMode = computed(() => object.value?.supporteMode)\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const id = route.params.id\r\n    const res = await api.get(`/objets/${id}`)\r\n    const data = res.data\r\n\r\n    object.value = {\r\n      _id: data._id,\r\n      nom: data.nom,\r\n      temperatureCible: data.temperatureCible,\r\n      mode: data.mode,\r\n      statut: data.statut,\r\n      supporteTemperature: data.supporteTemperature,\r\n      supporteMode: data.supporteMode,\r\n      modesDisponibles: data.modesDisponibles || []\r\n    }\r\n\r\n    form.value.temperatureCible = object.value.temperatureCible || 0\r\n    form.value.mode = object.value.mode || ''\r\n    form.value.statut = object.value.statut || 'Actif'\r\n\r\n  } catch (error) {\r\n    console.error('Erreur lors du chargement de l\\'objet:', error)\r\n  }\r\n})\r\n\r\nconst applyChanges = async () => {\r\n  try {\r\n    const id = route.params.id\r\n    await api.put(`/objets/${id}/control`, {\r\n      temperatureCible: form.value.temperatureCible,\r\n      mode: form.value.mode,\r\n      statut: form.value.statut\r\n    });\r\n    alert('✅ Modifications enregistrées avec succès !')\r\n  } catch (error) {\r\n    console.error('❌ Erreur API PUT:', error)\r\n    alert('Erreur lors de la mise à jour de l\\'objet.')\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"control-object-page\">\r\n      <h1>Contrôler l'objet</h1>\r\n\r\n      <div v-if=\"object\" class=\"object-form\">\r\n        <h2>{{ object.nom }}</h2>\r\n\r\n        <!-- Température -->\r\n        <div v-if=\"showTemperature\" class=\"form-group\">\r\n          <label>Température cible (°C)</label>\r\n          <input v-model=\"form.temperatureCible\" type=\"number\" />\r\n        </div>\r\n\r\n        <!-- Mode -->\r\n        <div v-if=\"showMode\" class=\"form-group\">\r\n          <label>Mode</label>\r\n\r\n          <select v-if=\"object.modesDisponibles.length > 0\" v-model=\"form.mode\">\r\n            <option v-for=\"option in object.modesDisponibles\" :key=\"option\" :value=\"option\">\r\n              {{ option }}\r\n            </option>\r\n          </select>\r\n\r\n          <input\r\n              v-else\r\n              v-model=\"form.mode\"\r\n              type=\"text\"\r\n              placeholder=\"Entrer un mode manuellement\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Statut -->\r\n        <div class=\"form-group\">\r\n          <label>Statut</label>\r\n          <select v-model=\"form.statut\">\r\n            <option value=\"Actif\">Actif</option>\r\n            <option value=\"Inactif\">Inactif</option>\r\n          </select>\r\n        </div>\r\n\r\n        <button @click=\"applyChanges\" class=\"btn-apply\">Appliquer les changements</button>\r\n      </div>\r\n\r\n      <div v-else>\r\n        <p>Chargement de l'objet...</p>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.object-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\ninput, select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.btn-apply {\r\n  padding: 10px 20px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n\r\n\r\n\r\n<style scoped>\r\n.object-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\ninput, select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-top: 5px;\r\n}\r\n.btn-apply {\r\n  padding: 10px 20px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\n</style>"],"mappings":";;EA8DSA,KAAK,EAAC;AAAqB;;EA9DpCC,GAAA;EAiEyBD,KAAK,EAAC;;;EAjE/BC,GAAA;EAqEoCD,KAAK,EAAC;;;EArE1CC,GAAA;EA2E6BD,KAAK,EAAC;;mBA3EnC;;EA6FaA,KAAK,EAAC;AAAY;;EA7F/BC,GAAA;AAAA;;uBA6DEC,YAAA,CA+CYC,MAAA;IA5GdC,OAAA,EAAAC,QAAA,CA8DI,MA6CM,CA7CNC,mBAAA,CA6CM,OA7CNC,UA6CM,G,0BA5CJD,mBAAA,CAA0B,YAAtB,mBAAiB,sBAEVH,MAAA,CAAAK,MAAM,I,cAAjBC,mBAAA,CAqCM,OArCNC,UAqCM,GApCJJ,mBAAA,CAAyB,YAAAK,gBAAA,CAAlBR,MAAA,CAAAK,MAAM,CAACI,GAAG,kBAEjBC,mBAAA,iBAAoB,EACTV,MAAA,CAAAW,eAAe,I,cAA1BL,mBAAA,CAGM,OAHNM,UAGM,G,0BAFJT,mBAAA,CAAqC,eAA9B,wBAAsB,sB,gBAC7BA,mBAAA,CAAuD;MAvEjE,uBAAAU,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAuE0Bd,MAAA,CAAAe,IAAI,CAACC,gBAAgB,GAAAF,MAAA;MAAEG,IAAI,EAAC;mDAA5BjB,MAAA,CAAAe,IAAI,CAACC,gBAAgB,E,OAvE/CN,mBAAA,gBA0EQA,mBAAA,UAAa,EACFV,MAAA,CAAAkB,QAAQ,I,cAAnBZ,mBAAA,CAeM,OAfNa,UAeM,G,0BAdJhB,mBAAA,CAAmB,eAAZ,MAAI,sBAEGH,MAAA,CAAAK,MAAM,CAACe,gBAAgB,CAACC,MAAM,O,+BAA5Cf,mBAAA,CAIS;MAlFnBR,GAAA;MAAA,uBAAAe,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA8EqEd,MAAA,CAAAe,IAAI,CAACO,IAAI,GAAAR,MAAA;2BAClER,mBAAA,CAESiB,SAAA,QAjFrBC,WAAA,CA+EqCxB,MAAA,CAAAK,MAAM,CAACe,gBAAgB,EAAjCK,MAAM;2BAArBnB,mBAAA,CAES;QAF0CR,GAAG,EAAE2B,MAAM;QAAGC,KAAK,EAAED;0BACnEA,MAAM,wBAhFvBE,UAAA;8EA8EqE3B,MAAA,CAAAe,IAAI,CAACO,IAAI,E,mCAMpEhB,mBAAA,CAKE;MAzFZR,GAAA;MAAA,uBAAAe,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAsFuBd,MAAA,CAAAe,IAAI,CAACO,IAAI,GAAAR,MAAA;MAClBG,IAAI,EAAC,MAAM;MACXW,WAAW,EAAC;oDAFH5B,MAAA,CAAAe,IAAI,CAACO,IAAI,E,OAtFhCZ,mBAAA,gBA4FQA,mBAAA,YAAe,EACfP,mBAAA,CAMM,OANN0B,UAMM,G,0BALJ1B,mBAAA,CAAqB,eAAd,QAAM,sB,gBACbA,mBAAA,CAGS;MAlGnB,uBAAAU,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+F2Bd,MAAA,CAAAe,IAAI,CAACe,MAAM,GAAAhB,MAAA;kCAC1BX,mBAAA,CAAoC;MAA5BuB,KAAK,EAAC;IAAO,GAAC,OAAK,qBAC3BvB,mBAAA,CAAwC;MAAhCuB,KAAK,EAAC;IAAS,GAAC,SAAO,oB,2CAFhB1B,MAAA,CAAAe,IAAI,CAACe,MAAM,E,KAM9B3B,mBAAA,CAAkF;MAAzE4B,OAAK,EAAE/B,MAAA,CAAAgC,YAAY;MAAEnC,KAAK,EAAC;OAAY,2BAAyB,E,oBAG3ES,mBAAA,CAEM,OA1GZ2B,UAAA,EAAApB,MAAA,QAAAA,MAAA,OAyGQV,mBAAA,CAA+B,WAA5B,0BAAwB,oB;IAzGnC+B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}