{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, vModelSelect as _vModelSelect, withModifiers as _withModifiers, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"admin-users-container\"\n};\nconst _hoisted_2 = {\n  class: \"actions-bar\"\n};\nconst _hoisted_3 = {\n  class: \"search-box\"\n};\nconst _hoisted_4 = {\n  class: \"users-table\"\n};\nconst _hoisted_5 = [\"src\", \"alt\"];\nconst _hoisted_6 = {\n  class: \"points-cell\"\n};\nconst _hoisted_7 = {\n  class: \"points-badge\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  class: \"actions-cell\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_14 = {\n  class: \"modal-content\"\n};\nconst _hoisted_15 = {\n  class: \"form-row\"\n};\nconst _hoisted_16 = {\n  class: \"form-row\"\n};\nconst _hoisted_17 = {\n  class: \"form-row\"\n};\nconst _hoisted_18 = {\n  class: \"form-row\"\n};\nconst _hoisted_19 = [\"value\"];\nconst _hoisted_20 = {\n  class: \"form-row\"\n};\nconst _hoisted_21 = {\n  class: \"form-row\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"form-row\"\n};\nconst _hoisted_23 = {\n  class: \"form-row\"\n};\nconst _hoisted_24 = {\n  class: \"modal-actions\"\n};\nconst _hoisted_25 = {\n  key: 1,\n  class: \"modal\"\n};\nconst _hoisted_26 = {\n  class: \"modal-content\"\n};\nconst _hoisted_27 = {\n  class: \"form-row\"\n};\nconst _hoisted_28 = {\n  class: \"form-row\"\n};\nconst _hoisted_29 = {\n  class: \"form-row\"\n};\nconst _hoisted_30 = {\n  class: \"modal-actions\"\n};\nconst _hoisted_31 = {\n  key: 2,\n  class: \"modal\"\n};\nconst _hoisted_32 = {\n  class: \"modal-content points-history-modal\"\n};\nconst _hoisted_33 = {\n  class: \"modal-header\"\n};\nconst _hoisted_34 = {\n  class: \"modal-body\"\n};\nconst _hoisted_35 = {\n  class: \"user-points-summary\"\n};\nconst _hoisted_36 = {\n  class: \"total-points\"\n};\nconst _hoisted_37 = {\n  class: \"points-value\"\n};\nconst _hoisted_38 = {\n  class: \"points-history-list\"\n};\nconst _hoisted_39 = {\n  key: 0,\n  class: \"no-history\"\n};\nconst _hoisted_40 = {\n  key: 1,\n  class: \"points-history-table\"\n};\nconst _hoisted_41 = {\n  key: 3,\n  class: \"modal\"\n};\nconst _hoisted_42 = {\n  class: \"modal-content\"\n};\nconst _hoisted_43 = {\n  class: \"modal-header\"\n};\nconst _hoisted_44 = {\n  class: \"modal-body\"\n};\nconst _hoisted_45 = {\n  class: \"points-info\"\n};\nconst _hoisted_46 = {\n  class: \"form-row\"\n};\nconst _hoisted_47 = {\n  class: \"form-row\"\n};\nconst _hoisted_48 = {\n  class: \"modal-actions\"\n};\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = {\n  key: 0\n};\nconst _hoisted_51 = {\n  key: 1\n};\nconst _hoisted_52 = {\n  key: 4,\n  class: \"modal\"\n};\nconst _hoisted_53 = {\n  class: \"modal-content level-change-modal\"\n};\nconst _hoisted_54 = {\n  class: \"modal-header\"\n};\nconst _hoisted_55 = {\n  class: \"modal-body\"\n};\nconst _hoisted_56 = {\n  class: \"level-change-content\"\n};\nconst _hoisted_57 = {\n  class: \"user-info-header\"\n};\nconst _hoisted_58 = {\n  class: \"user-login\"\n};\nconst _hoisted_59 = {\n  key: 0,\n  class: \"change-item\"\n};\nconst _hoisted_60 = {\n  class: \"change-details\"\n};\nconst _hoisted_61 = {\n  class: \"before-change\"\n};\nconst _hoisted_62 = {\n  class: \"value\"\n};\nconst _hoisted_63 = {\n  class: \"after-change\"\n};\nconst _hoisted_64 = {\n  class: \"value highlight\"\n};\nconst _hoisted_65 = {\n  key: 1,\n  class: \"change-item\"\n};\nconst _hoisted_66 = {\n  class: \"change-details\"\n};\nconst _hoisted_67 = {\n  class: \"before-change\"\n};\nconst _hoisted_68 = {\n  class: \"value\"\n};\nconst _hoisted_69 = {\n  class: \"after-change\"\n};\nconst _hoisted_70 = {\n  class: \"value highlight\"\n};\nconst _hoisted_71 = {\n  class: \"points-summary\"\n};\nconst _hoisted_72 = {\n  class: \"points-value\"\n};\nconst _hoisted_73 = {\n  class: \"congratulations-message\"\n};\nconst _hoisted_74 = {\n  key: 0\n};\nconst _hoisted_75 = {\n  class: \"modal-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UserHistoryModal = _resolveComponent(\"UserHistoryModal\");\n  const _component_AppLayout = _resolveComponent(\"AppLayout\");\n  return _openBlock(), _createBlock(_component_AppLayout, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[32] || (_cache[32] = _createElementVNode(\"h1\", {\n      class: \"page-title\"\n    }, \"Gestion des utilisateurs\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n      placeholder: \"Rechercher...\",\n      class: \"search-input\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchQuery]])]), _createElementVNode(\"button\", {\n      onClick: _cache[1] || (_cache[1] = (...args) => $setup.openAddUserModal && $setup.openAddUserModal(...args)),\n      class: \"add-user-btn\"\n    }, \" Ajouter un utilisateur \")]), _ctx.deleteMessage ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: _normalizeClass({\n        'success-msg': _ctx.deleteSuccess,\n        'error-msg': !_ctx.deleteSuccess\n      })\n    }, _toDisplayString(_ctx.deleteMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", null, [_cache[31] || (_cache[31] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Photo\"), _createElementVNode(\"th\", null, \"Nom\"), _createElementVNode(\"th\", null, \"Prénom\"), _createElementVNode(\"th\", null, \"Famille\"), _createElementVNode(\"th\", null, \"Login\"), _createElementVNode(\"th\", null, \"Rôle\"), _createElementVNode(\"th\", null, \"Niveau\"), _createElementVNode(\"th\", null, \"Points\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredUsers, user => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: user._id\n      }, [_createElementVNode(\"td\", null, [_createElementVNode(\"img\", {\n        src: $setup.getPhotoUrl(user.photo, user._id),\n        alt: user.login,\n        class: \"user-avatar\",\n        onError: _cache[2] || (_cache[2] = (...args) => $setup.handleImageError && $setup.handleImageError(...args))\n      }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_5)]), _createElementVNode(\"td\", null, _toDisplayString(user.nom), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.prenom), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.famille?.codeFamille || '-'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.login), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n        class: _normalizeClass($setup.getRoleBadgeClass(user.role))\n      }, _toDisplayString(user.role), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", null, _toDisplayString(user.niveau), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(user.points || 0), 1 /* TEXT */), _createElementVNode(\"button\", {\n        onClick: $event => $setup.adjustPoints(user),\n        class: \"points-adjust-btn\",\n        title: \"Ajuster les points\"\n      }, [...(_cache[27] || (_cache[27] = [_createElementVNode(\"i\", {\n        class: \"fas fa-plus-circle\"\n      }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_8)]), _createElementVNode(\"td\", _hoisted_9, [_createElementVNode(\"button\", {\n        onClick: $event => $setup.editUser(user),\n        class: \"action-btn edit\",\n        title: \"Modifier\"\n      }, [...(_cache[28] || (_cache[28] = [_createElementVNode(\"i\", {\n        class: \"fas fa-edit\"\n      }, null, -1 /* HOISTED */), _createElementVNode(\"span\", {\n        class: \"tooltip\"\n      }, \"Modifier\", -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_10), _createElementVNode(\"button\", {\n        onClick: $event => $setup.confirmDelete(user),\n        class: \"action-btn delete\",\n        title: \"Supprimer\"\n      }, [...(_cache[29] || (_cache[29] = [_createElementVNode(\"i\", {\n        class: \"fas fa-trash\"\n      }, null, -1 /* HOISTED */), _createElementVNode(\"span\", {\n        class: \"tooltip\"\n      }, \"Supprimer\", -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n        onClick: $event => $setup.showHistory(user),\n        class: \"btn btn-history\"\n      }, [...(_cache[30] || (_cache[30] = [_createElementVNode(\"i\", {\n        class: \"fas fa-history\"\n      }, null, -1 /* HOISTED */), _createTextVNode(\" Voir historique \")]))], 8 /* PROPS */, _hoisted_12)])]);\n    }), 128 /* KEYED_FRAGMENT */))])])])]), _createCommentVNode(\" Modal pour éditer/ajouter un utilisateur \"), $setup.showModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"h2\", null, _toDisplayString($setup.editingUser ? 'Modifier' : 'Ajouter') + \" un utilisateur\", 1 /* TEXT */), _createElementVNode(\"form\", {\n      onSubmit: _cache[13] || (_cache[13] = _withModifiers((...args) => $setup.saveUser && $setup.saveUser(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_15, [_cache[33] || (_cache[33] = _createElementVNode(\"label\", null, \"Nom :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.nom = $event),\n      type: \"text\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.nom]])]), _createElementVNode(\"div\", _hoisted_16, [_cache[34] || (_cache[34] = _createElementVNode(\"label\", null, \"Prénom :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.prenom = $event),\n      type: \"text\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.prenom]])]), _createElementVNode(\"div\", _hoisted_17, [_cache[36] || (_cache[36] = _createElementVNode(\"label\", null, \"Genre :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.form.genre = $event),\n      required: \"\"\n    }, _cache[35] || (_cache[35] = [_createElementVNode(\"option\", {\n      value: \"Homme\"\n    }, \"Homme\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"Femme\"\n    }, \"Femme\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"Non spécifié\"\n    }, \"Non spécifié\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.genre]])]), _createElementVNode(\"div\", _hoisted_18, [_cache[39] || (_cache[39] = _createElementVNode(\"label\", null, \"Famille :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.form.codeFamille = $event),\n      required: \"\"\n    }, [_cache[37] || (_cache[37] = _createElementVNode(\"option\", {\n      value: \"\"\n    }, \"Sélectionner une famille\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.familles, famille => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: famille._id,\n        value: famille.codeFamille\n      }, _toDisplayString(famille.codeFamille), 9 /* TEXT, PROPS */, _hoisted_19);\n    }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.codeFamille]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[7] || (_cache[7] = (...args) => $setup.openAddFamilleModal && $setup.openAddFamilleModal(...args)),\n      class: \"add-famille-btn\"\n    }, _cache[38] || (_cache[38] = [_createElementVNode(\"i\", {\n      class: \"fas fa-plus\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" Nouvelle famille \")]))]), _createElementVNode(\"div\", _hoisted_20, [_cache[40] || (_cache[40] = _createElementVNode(\"label\", null, \"Login :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.form.login = $event),\n      type: \"text\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.login]])]), _createElementVNode(\"div\", _hoisted_21, [_cache[42] || (_cache[42] = _createElementVNode(\"label\", null, \"Rôle :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.form.role = $event),\n      required: \"\"\n    }, _cache[41] || (_cache[41] = [_createElementVNode(\"option\", {\n      value: \"simple\"\n    }, \"Simple\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"admin\"\n    }, \"Admin\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.role]])]), !$setup.editingUser ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [_cache[43] || (_cache[43] = _createElementVNode(\"label\", null, \"Mot de passe :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.form.password = $event),\n      type: \"password\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.password]])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_23, [_cache[45] || (_cache[45] = _createElementVNode(\"label\", null, \"Niveau :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => $setup.form.niveau = $event),\n      required: \"\"\n    }, _cache[44] || (_cache[44] = [_createElementVNode(\"option\", {\n      value: \"débutant\"\n    }, \"Débutant\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"intermédiaire\"\n    }, \"Intermédiaire\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"avancé\"\n    }, \"Avancé\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n      value: \"expert\"\n    }, \"Expert\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.niveau]])]), _createElementVNode(\"div\", _hoisted_24, [_cache[46] || (_cache[46] = _createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"save-btn\"\n    }, \"Enregistrer\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[12] || (_cache[12] = (...args) => $setup.closeModal && $setup.closeModal(...args)),\n      class: \"cancel-btn\"\n    }, \"Annuler\")])], 32 /* NEED_HYDRATION */), $setup.formMessage ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: _normalizeClass({\n        'success-msg': $setup.formSuccess,\n        'error-msg': !$setup.formSuccess\n      })\n    }, _toDisplayString($setup.formMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Modal pour ajouter une famille \"), $setup.showFamilleModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_cache[51] || (_cache[51] = _createElementVNode(\"h2\", null, \"Ajouter une famille\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n      onSubmit: _cache[18] || (_cache[18] = _withModifiers((...args) => $setup.saveFamille && $setup.saveFamille(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_27, [_cache[47] || (_cache[47] = _createElementVNode(\"label\", null, \"Code Famille :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[14] || (_cache[14] = $event => $setup.familleForm.codeFamille = $event),\n      type: \"text\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.familleForm.codeFamille]])]), _createElementVNode(\"div\", _hoisted_28, [_cache[48] || (_cache[48] = _createElementVNode(\"label\", null, \"Nom de la famille :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[15] || (_cache[15] = $event => $setup.familleForm.nom = $event),\n      type: \"text\",\n      required: \"\",\n      placeholder: \"Ex: Famille Dupont\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.familleForm.nom]])]), _createElementVNode(\"div\", _hoisted_29, [_cache[49] || (_cache[49] = _createElementVNode(\"label\", null, \"Description :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[16] || (_cache[16] = $event => $setup.familleForm.description = $event),\n      placeholder: \"Description de la famille (optionnelle)\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.familleForm.description]])]), _createElementVNode(\"div\", _hoisted_30, [_cache[50] || (_cache[50] = _createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"save-btn\"\n    }, \"Enregistrer\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[17] || (_cache[17] = (...args) => $setup.closeFamilleModal && $setup.closeFamilleModal(...args)),\n      class: \"cancel-btn\"\n    }, \"Annuler\")])], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_UserHistoryModal, {\n      show: $setup.showHistoryModal,\n      user: $setup.selectedUser,\n      onClose: $setup.closeHistoryModal\n    }, null, 8 /* PROPS */, [\"show\", \"user\", \"onClose\"]), _createCommentVNode(\" Modal pour l'historique des points \"), $setup.showPointsHistoryModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"h2\", null, \"Historique des points - \" + _toDisplayString($setup.selectedUser?.login), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"close-btn\",\n      onClick: _cache[19] || (_cache[19] = (...args) => $setup.closePointsHistoryModal && $setup.closePointsHistoryModal(...args))\n    }, _cache[52] || (_cache[52] = [_createElementVNode(\"i\", {\n      class: \"fas fa-times\"\n    }, null, -1 /* HOISTED */)]))]), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"p\", _hoisted_36, [_cache[53] || (_cache[53] = _createTextVNode(\" Points actuels: \")), _createElementVNode(\"span\", _hoisted_37, _toDisplayString($setup.selectedUser?.points || 0), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_38, [$setup.pointsHistory.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_39, \" Aucun historique de points disponible \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_40, [_createElementVNode(\"table\", null, [_cache[54] || (_cache[54] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Date\"), _createElementVNode(\"th\", null, \"Action\"), _createElementVNode(\"th\", null, \"Montant\"), _createElementVNode(\"th\", null, \"Avant\"), _createElementVNode(\"th\", null, \"Après\"), _createElementVNode(\"th\", null, \"Raison\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.pointsHistory, (entry, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: index\n      }, [_createElementVNode(\"td\", null, _toDisplayString($setup.formatDate(entry.date)), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($setup.formatAction(entry.action)), 1 /* TEXT */), _createElementVNode(\"td\", {\n        class: _normalizeClass($setup.getPointsClass(entry.details.montant))\n      }, _toDisplayString($setup.formatPointsChange(entry.details.montant)), 3 /* TEXT, CLASS */), _createElementVNode(\"td\", null, _toDisplayString(entry.details.pointsAvant), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(entry.details.pointsApres), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(entry.details.raison), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */))])])]))])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Modal pour ajuster les points \"), $setup.showPointsAdjustModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [_createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"h2\", null, \"Ajuster les points - \" + _toDisplayString($setup.selectedUser?.login), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"close-btn\",\n      onClick: _cache[20] || (_cache[20] = (...args) => $setup.closePointsAdjustModal && $setup.closePointsAdjustModal(...args))\n    }, _cache[55] || (_cache[55] = [_createElementVNode(\"i\", {\n      class: \"fas fa-times\"\n    }, null, -1 /* HOISTED */)]))]), _createElementVNode(\"div\", _hoisted_44, [_createElementVNode(\"div\", _hoisted_45, [_createElementVNode(\"p\", null, [_cache[56] || (_cache[56] = _createTextVNode(\"Points actuels: \")), _createElementVNode(\"strong\", null, _toDisplayString($setup.selectedUser?.points || 0), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[57] || (_cache[57] = _createTextVNode(\"Niveau actuel: \")), _createElementVNode(\"strong\", null, _toDisplayString($setup.selectedUser?.niveau), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[58] || (_cache[58] = _createTextVNode(\"Rôle actuel: \")), _createElementVNode(\"strong\", null, _toDisplayString($setup.selectedUser?.role), 1 /* TEXT */)])]), _createElementVNode(\"form\", {\n      onSubmit: _cache[24] || (_cache[24] = _withModifiers((...args) => $setup.savePointsAdjustment && $setup.savePointsAdjustment(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_46, [_cache[59] || (_cache[59] = _createElementVNode(\"label\", null, \"Montant des points:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": _cache[21] || (_cache[21] = $event => $setup.pointsForm.amount = $event),\n      step: \"0.5\",\n      placeholder: \"Entrez un nombre positif ou négatif\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.pointsForm.amount]])]), _createElementVNode(\"div\", _hoisted_47, [_cache[60] || (_cache[60] = _createElementVNode(\"label\", null, \"Raison:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[22] || (_cache[22] = $event => $setup.pointsForm.reason = $event),\n      placeholder: \"Ex: Participation à un événement\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.pointsForm.reason]])]), _createElementVNode(\"div\", _hoisted_48, [_createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"save-btn\",\n      disabled: $setup.loading\n    }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_50, \"Traitement...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_51, \"Confirmer\"))], 8 /* PROPS */, _hoisted_49), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[23] || (_cache[23] = (...args) => $setup.closePointsAdjustModal && $setup.closePointsAdjustModal(...args)),\n      class: \"cancel-btn\"\n    }, \"Annuler\")])], 32 /* NEED_HYDRATION */)])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Modal de notification pour changement de niveau/rôle \"), $setup.showLevelChangeModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [_createElementVNode(\"div\", _hoisted_53, [_createElementVNode(\"div\", _hoisted_54, [_cache[62] || (_cache[62] = _createElementVNode(\"h2\", null, \"Évolution de l'utilisateur\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n      class: \"close-btn\",\n      onClick: _cache[25] || (_cache[25] = (...args) => $setup.closeLevelChangeModal && $setup.closeLevelChangeModal(...args))\n    }, _cache[61] || (_cache[61] = [_createElementVNode(\"i\", {\n      class: \"fas fa-times\"\n    }, null, -1 /* HOISTED */)]))]), _createElementVNode(\"div\", _hoisted_55, [_createElementVNode(\"div\", _hoisted_56, [_createElementVNode(\"div\", _hoisted_57, [_createElementVNode(\"span\", _hoisted_58, _toDisplayString($setup.selectedUser?.login), 1 /* TEXT */)]), $setup.levelChangeData.niveauChanged ? (_openBlock(), _createElementBlock(\"div\", _hoisted_59, [_cache[65] || (_cache[65] = _createElementVNode(\"div\", {\n      class: \"change-label\"\n    }, \"Changement de niveau\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_60, [_createElementVNode(\"div\", _hoisted_61, [_cache[63] || (_cache[63] = _createElementVNode(\"span\", {\n      class: \"label\"\n    }, \"Avant:\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_62, _toDisplayString($setup.levelChangeData.niveauAvant), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_63, [_cache[64] || (_cache[64] = _createElementVNode(\"span\", {\n      class: \"label\"\n    }, \"Après:\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_64, _toDisplayString($setup.levelChangeData.niveauApres), 1 /* TEXT */)])])])) : _createCommentVNode(\"v-if\", true), $setup.levelChangeData.roleChanged ? (_openBlock(), _createElementBlock(\"div\", _hoisted_65, [_cache[68] || (_cache[68] = _createElementVNode(\"div\", {\n      class: \"change-label\"\n    }, \"Changement de rôle\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_66, [_createElementVNode(\"div\", _hoisted_67, [_cache[66] || (_cache[66] = _createElementVNode(\"span\", {\n      class: \"label\"\n    }, \"Avant:\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_68, _toDisplayString($setup.levelChangeData.roleAvant), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_69, [_cache[67] || (_cache[67] = _createElementVNode(\"span\", {\n      class: \"label\"\n    }, \"Après:\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_70, _toDisplayString($setup.levelChangeData.roleApres), 1 /* TEXT */)])])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_71, [_cache[69] || (_cache[69] = _createElementVNode(\"div\", {\n      class: \"points-label\"\n    }, \"Points actuels:\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_72, _toDisplayString($setup.selectedUser?.points), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_73, [$setup.levelChangeData.niveauChanged || $setup.levelChangeData.roleChanged ? (_openBlock(), _createElementBlock(\"p\", _hoisted_74, [$setup.isLevelUpgrade($setup.levelChangeData.niveauAvant, $setup.levelChangeData.niveauApres) || $setup.isRoleUpgrade($setup.levelChangeData.roleAvant, $setup.levelChangeData.roleApres) ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_createTextVNode(\" 🎉 Félicitations ! L'utilisateur a progressé ! \")], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createTextVNode(\" ⚠️ Attention ! L'utilisateur a régressé suite à la perte de points. \")], 64 /* STABLE_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"div\", _hoisted_75, [_createElementVNode(\"button\", {\n      class: \"btn primary\",\n      onClick: _cache[26] || (_cache[26] = (...args) => $setup.closeLevelChangeModal && $setup.closeLevelChangeModal(...args))\n    }, \"Fermer\")])])])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_AppLayout","default","_withCtx","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","type","_cache","$event","$setup","searchQuery","placeholder","onClick","args","openAddUserModal","_ctx","deleteMessage","_createElementBlock","_normalizeClass","deleteSuccess","_createCommentVNode","_hoisted_4","_Fragment","_renderList","filteredUsers","user","_id","src","getPhotoUrl","photo","alt","login","onError","handleImageError","_hoisted_5","_toDisplayString","nom","prenom","famille","codeFamille","getRoleBadgeClass","role","niveau","_hoisted_6","_hoisted_7","points","adjustPoints","title","_hoisted_8","_hoisted_9","editUser","_hoisted_10","confirmDelete","_hoisted_11","showHistory","_createTextVNode","_hoisted_12","showModal","_hoisted_13","_hoisted_14","editingUser","onSubmit","_withModifiers","saveUser","_hoisted_15","form","required","_hoisted_16","_hoisted_17","genre","value","_hoisted_18","familles","_hoisted_19","openAddFamilleModal","_hoisted_20","_hoisted_21","_hoisted_22","password","_hoisted_23","_hoisted_24","closeModal","formMessage","formSuccess","showFamilleModal","_hoisted_25","_hoisted_26","saveFamille","_hoisted_27","familleForm","_hoisted_28","_hoisted_29","description","_hoisted_30","closeFamilleModal","_createVNode","_component_UserHistoryModal","show","showHistoryModal","selectedUser","onClose","closeHistoryModal","showPointsHistoryModal","_hoisted_31","_hoisted_32","_hoisted_33","closePointsHistoryModal","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","pointsHistory","length","_hoisted_39","_hoisted_40","entry","index","formatDate","date","formatAction","action","getPointsClass","details","montant","formatPointsChange","pointsAvant","pointsApres","raison","showPointsAdjustModal","_hoisted_41","_hoisted_42","_hoisted_43","closePointsAdjustModal","_hoisted_44","_hoisted_45","savePointsAdjustment","_hoisted_46","pointsForm","amount","step","_hoisted_47","reason","_hoisted_48","disabled","loading","_hoisted_50","_hoisted_51","_hoisted_49","showLevelChangeModal","_hoisted_52","_hoisted_53","_hoisted_54","closeLevelChangeModal","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","levelChangeData","niveauChanged","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","niveauAvant","_hoisted_63","_hoisted_64","niveauApres","roleChanged","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","roleAvant","_hoisted_69","_hoisted_70","roleApres","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","isLevelUpgrade","isRoleUpgrade","_hoisted_75","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\AdminUsers.vue"],"sourcesContent":["<template>\r\n  <AppLayout>\r\n    <div class=\"admin-users-container\">\r\n      <h1 class=\"page-title\">Gestion des utilisateurs</h1>\r\n\r\n      <div class=\"actions-bar\">\r\n        <div class=\"search-box\">\r\n          <input\r\n              type=\"text\"\r\n              v-model=\"searchQuery\"\r\n              placeholder=\"Rechercher...\"\r\n              class=\"search-input\"\r\n          />\r\n        </div>\r\n        <button @click=\"openAddUserModal\" class=\"add-user-btn\">\r\n          Ajouter un utilisateur\r\n        </button>\r\n      </div>\r\n      <div v-if=\"deleteMessage\" :class=\"{'success-msg': deleteSuccess, 'error-msg': !deleteSuccess}\">\r\n        {{ deleteMessage }}\r\n      </div>\r\n\r\n      <div class=\"users-table\">\r\n        <table>\r\n          <thead>\r\n          <tr>\r\n            <th>Photo</th>\r\n            <th>Nom</th>\r\n            <th>Prénom</th>\r\n            <th>Famille</th>\r\n            <th>Login</th>\r\n            <th>Rôle</th>\r\n            <th>Niveau</th>\r\n            <th>Points</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr v-for=\"user in filteredUsers\" :key=\"user._id\">\r\n            <td>\r\n              <img\r\n                  :src=\"getPhotoUrl(user.photo, user._id)\"\r\n                  :alt=\"user.login\"\r\n                  class=\"user-avatar\"\r\n                  @error=\"handleImageError\"\r\n              />\r\n            </td>\r\n            <td>{{ user.nom }}</td>\r\n            <td>{{ user.prenom }}</td>\r\n            <td>{{ user.famille?.codeFamille || '-' }}</td>\r\n            <td>{{ user.login }}</td>\r\n            <td>\r\n                <span :class=\"getRoleBadgeClass(user.role)\">\r\n                  {{ user.role }}\r\n                </span>\r\n            </td>\r\n            <td>{{ user.niveau }}</td>\r\n            <td class=\"points-cell\">\r\n              <span class=\"points-badge\">{{ user.points || 0 }}</span>\r\n              <button @click=\"adjustPoints(user)\" class=\"points-adjust-btn\" title=\"Ajuster les points\">\r\n                <i class=\"fas fa-plus-circle\"></i>\r\n              </button>\r\n            </td>\r\n            <td class=\"actions-cell\">\r\n              <button @click=\"editUser(user)\" class=\"action-btn edit\" title=\"Modifier\">\r\n                <i class=\"fas fa-edit\"></i>\r\n                <span class=\"tooltip\">Modifier</span>\r\n              </button>\r\n              <button @click=\"confirmDelete(user)\" class=\"action-btn delete\" title=\"Supprimer\">\r\n                <i class=\"fas fa-trash\"></i>\r\n                <span class=\"tooltip\">Supprimer</span>\r\n              </button>\r\n              <button @click=\"showHistory(user)\" class=\"btn btn-history\">\r\n                <i class=\"fas fa-history\"></i> Voir historique\r\n              </button>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal pour éditer/ajouter un utilisateur -->\r\n    <div v-if=\"showModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <h2>{{ editingUser ? 'Modifier' : 'Ajouter' }} un utilisateur</h2>\r\n        <form @submit.prevent=\"saveUser\">\r\n          <div class=\"form-row\">\r\n            <label>Nom :</label>\r\n            <input v-model=\"form.nom\" type=\"text\" required />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Prénom :</label>\r\n            <input v-model=\"form.prenom\" type=\"text\" required />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Genre :</label>\r\n            <select v-model=\"form.genre\" required>\r\n              <option value=\"Homme\">Homme</option>\r\n              <option value=\"Femme\">Femme</option>\r\n              <option value=\"Non spécifié\">Non spécifié</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Famille :</label>\r\n            <select v-model=\"form.codeFamille\" required>\r\n              <option value=\"\">Sélectionner une famille</option>\r\n              <option v-for=\"famille in familles\" :key=\"famille._id\" :value=\"famille.codeFamille\">\r\n                {{ famille.codeFamille }}\r\n              </option>\r\n            </select>\r\n            <button type=\"button\" @click=\"openAddFamilleModal\" class=\"add-famille-btn\">\r\n              <i class=\"fas fa-plus\"></i> Nouvelle famille\r\n            </button>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Login :</label>\r\n            <input v-model=\"form.login\" type=\"text\" required />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Rôle :</label>\r\n            <select v-model=\"form.role\" required>\r\n              <option value=\"simple\">Simple</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"form-row\" v-if=\"!editingUser\">\r\n            <label>Mot de passe :</label>\r\n            <input v-model=\"form.password\" type=\"password\" required />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Niveau :</label>\r\n            <select v-model=\"form.niveau\" required>\r\n              <option value=\"débutant\">Débutant</option>\r\n              <option value=\"intermédiaire\">Intermédiaire</option>\r\n              <option value=\"avancé\">Avancé</option>\r\n              <option value=\"expert\">Expert</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"modal-actions\">\r\n            <button type=\"submit\" class=\"save-btn\">Enregistrer</button>\r\n            <button type=\"button\" @click=\"closeModal\" class=\"cancel-btn\">Annuler</button>\r\n          </div>\r\n        </form>\r\n        <div v-if=\"formMessage\" :class=\"{'success-msg': formSuccess, 'error-msg': !formSuccess}\">{{ formMessage }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal pour ajouter une famille -->\r\n    <div v-if=\"showFamilleModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <h2>Ajouter une famille</h2>\r\n        <form @submit.prevent=\"saveFamille\">\r\n          <div class=\"form-row\">\r\n            <label>Code Famille :</label>\r\n            <input v-model=\"familleForm.codeFamille\" type=\"text\" required />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Nom de la famille :</label>\r\n            <input v-model=\"familleForm.nom\" type=\"text\" required placeholder=\"Ex: Famille Dupont\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Description :</label>\r\n            <textarea v-model=\"familleForm.description\" placeholder=\"Description de la famille (optionnelle)\"></textarea>\r\n          </div>\r\n          <div class=\"modal-actions\">\r\n            <button type=\"submit\" class=\"save-btn\">Enregistrer</button>\r\n            <button type=\"button\" @click=\"closeFamilleModal\" class=\"cancel-btn\">Annuler</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <UserHistoryModal\r\n        :show=\"showHistoryModal\"\r\n        :user=\"selectedUser\"\r\n        @close=\"closeHistoryModal\"\r\n    />\r\n\r\n    <!-- Modal pour l'historique des points -->\r\n    <div v-if=\"showPointsHistoryModal\" class=\"modal\">\r\n      <div class=\"modal-content points-history-modal\">\r\n        <div class=\"modal-header\">\r\n          <h2>Historique des points - {{ selectedUser?.login }}</h2>\r\n          <button class=\"close-btn\" @click=\"closePointsHistoryModal\">\r\n            <i class=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"user-points-summary\">\r\n            <p class=\"total-points\">\r\n              Points actuels: <span class=\"points-value\">{{ selectedUser?.points || 0 }}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"points-history-list\">\r\n            <div v-if=\"pointsHistory.length === 0\" class=\"no-history\">\r\n              Aucun historique de points disponible\r\n            </div>\r\n            <div v-else class=\"points-history-table\">\r\n              <table>\r\n                <thead>\r\n                <tr>\r\n                  <th>Date</th>\r\n                  <th>Action</th>\r\n                  <th>Montant</th>\r\n                  <th>Avant</th>\r\n                  <th>Après</th>\r\n                  <th>Raison</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"(entry, index) in pointsHistory\" :key=\"index\">\r\n                  <td>{{ formatDate(entry.date) }}</td>\r\n                  <td>{{ formatAction(entry.action) }}</td>\r\n                  <td :class=\"getPointsClass(entry.details.montant)\">\r\n                    {{ formatPointsChange(entry.details.montant) }}\r\n                  </td>\r\n                  <td>{{ entry.details.pointsAvant }}</td>\r\n                  <td>{{ entry.details.pointsApres }}</td>\r\n                  <td>{{ entry.details.raison }}</td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal pour ajuster les points -->\r\n    <div v-if=\"showPointsAdjustModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h2>Ajuster les points - {{ selectedUser?.login }}</h2>\r\n          <button class=\"close-btn\" @click=\"closePointsAdjustModal\">\r\n            <i class=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"points-info\">\r\n            <p>Points actuels: <strong>{{ selectedUser?.points || 0 }}</strong></p>\r\n            <p>Niveau actuel: <strong>{{ selectedUser?.niveau }}</strong></p>\r\n            <p>Rôle actuel: <strong>{{ selectedUser?.role }}</strong></p>\r\n          </div>\r\n          <form @submit.prevent=\"savePointsAdjustment\">\r\n            <div class=\"form-row\">\r\n              <label>Montant des points:</label>\r\n              <input\r\n                  type=\"number\"\r\n                  v-model=\"pointsForm.amount\"\r\n                  step=\"0.5\"\r\n                  placeholder=\"Entrez un nombre positif ou négatif\"\r\n                  required\r\n              />\r\n            </div>\r\n            <div class=\"form-row\">\r\n              <label>Raison:</label>\r\n              <input\r\n                  type=\"text\"\r\n                  v-model=\"pointsForm.reason\"\r\n                  placeholder=\"Ex: Participation à un événement\"\r\n              />\r\n            </div>\r\n            <div class=\"modal-actions\">\r\n              <button type=\"submit\" class=\"save-btn\" :disabled=\"loading\">\r\n                <span v-if=\"loading\">Traitement...</span>\r\n                <span v-else>Confirmer</span>\r\n              </button>\r\n              <button type=\"button\" @click=\"closePointsAdjustModal\" class=\"cancel-btn\">Annuler</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal de notification pour changement de niveau/rôle -->\r\n    <div v-if=\"showLevelChangeModal\" class=\"modal\">\r\n      <div class=\"modal-content level-change-modal\">\r\n        <div class=\"modal-header\">\r\n          <h2>Évolution de l'utilisateur</h2>\r\n          <button class=\"close-btn\" @click=\"closeLevelChangeModal\">\r\n            <i class=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"level-change-content\">\r\n            <div class=\"user-info-header\">\r\n              <span class=\"user-login\">{{ selectedUser?.login }}</span>\r\n            </div>\r\n\r\n            <div v-if=\"levelChangeData.niveauChanged\" class=\"change-item\">\r\n              <div class=\"change-label\">Changement de niveau</div>\r\n              <div class=\"change-details\">\r\n                <div class=\"before-change\">\r\n                  <span class=\"label\">Avant:</span>\r\n                  <span class=\"value\">{{ levelChangeData.niveauAvant }}</span>\r\n                </div>\r\n                <div class=\"after-change\">\r\n                  <span class=\"label\">Après:</span>\r\n                  <span class=\"value highlight\">{{ levelChangeData.niveauApres }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div v-if=\"levelChangeData.roleChanged\" class=\"change-item\">\r\n              <div class=\"change-label\">Changement de rôle</div>\r\n              <div class=\"change-details\">\r\n                <div class=\"before-change\">\r\n                  <span class=\"label\">Avant:</span>\r\n                  <span class=\"value\">{{ levelChangeData.roleAvant }}</span>\r\n                </div>\r\n                <div class=\"after-change\">\r\n                  <span class=\"label\">Après:</span>\r\n                  <span class=\"value highlight\">{{ levelChangeData.roleApres }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"points-summary\">\r\n              <div class=\"points-label\">Points actuels:</div>\r\n              <div class=\"points-value\">{{ selectedUser?.points }}</div>\r\n            </div>\r\n\r\n            <div class=\"congratulations-message\">\r\n              <p v-if=\"levelChangeData.niveauChanged || levelChangeData.roleChanged\">\r\n                <template v-if=\"isLevelUpgrade(levelChangeData.niveauAvant, levelChangeData.niveauApres) || isRoleUpgrade(levelChangeData.roleAvant, levelChangeData.roleApres)\">\r\n                  🎉 Félicitations ! L'utilisateur a progressé !\r\n                </template>\r\n                <template v-else>\r\n                  ⚠️ Attention ! L'utilisateur a régressé suite à la perte de points.\r\n                </template>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn primary\" @click=\"closeLevelChangeModal\">Fermer</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\r\nimport api from '@/services/api';\r\nimport defaultAvatar from '@/assets/default-avatar.png';\r\nimport { getPhotoUrl } from '@/utils/photo';\r\nimport UserHistoryModal from '@/components/UserHistoryModal.vue';\r\n\r\nexport default {\r\n  name: 'AdminUsers',\r\n  components: {\r\n    AppLayout,\r\n    UserHistoryModal\r\n  },\r\n  setup() {\r\n    const users = ref([]);\r\n    const familles = ref([]);\r\n    const searchQuery = ref('');\r\n    const showModal = ref(false);\r\n    const showFamilleModal = ref(false);\r\n    const editingUser = ref(null);\r\n    const form = ref({\r\n      nom: '',\r\n      prenom: '',\r\n      genre: 'Non spécifié',\r\n      codeFamille: '',\r\n      login: '',\r\n      password: '',\r\n      role: 'simple',\r\n      niveau: 'débutant'\r\n    });\r\n    const familleForm = ref({\r\n      codeFamille: '',\r\n      nom: '',\r\n      description: ''\r\n    });\r\n    const formMessage = ref('');\r\n    const formSuccess = ref(false);\r\n    const showHistoryModal = ref(false);\r\n    const selectedUser = ref(null);\r\n    const loading = ref(false);\r\n\r\n    // Nouvelles variables pour la gestion des points\r\n    const showPointsHistoryModal = ref(false);\r\n    const showPointsAdjustModal = ref(false);\r\n    const pointsHistory = ref([]);\r\n    const pointsForm = ref({\r\n      amount: null,\r\n      reason: ''\r\n    });\r\n\r\n    // Ajout des variables pour gérer le changement de niveau\r\n    const showLevelChangeModal = ref(false);\r\n    const levelChangeData = ref({\r\n      niveauChanged: false,\r\n      roleChanged: false,\r\n      niveauAvant: '',\r\n      niveauApres: '',\r\n      roleAvant: '',\r\n      roleApres: ''\r\n    });\r\n\r\n    const loadFamilles = async () => {\r\n      try {\r\n        const response = await api.get('/familles');\r\n        familles.value = response.data;\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement des familles:', error);\r\n      }\r\n    };\r\n\r\n    const loadUsers = async () => {\r\n      try {\r\n        const response = await api.get('/users');\r\n        users.value = response.data.map(user => ({\r\n          _id: user._id,\r\n          nom: user.personne?.nom || 'Non défini',\r\n          prenom: user.personne?.prenom || 'Non défini',\r\n          login: user.login || 'Non défini',\r\n          role: user.role || 'simple',\r\n          niveau: user.niveau || 'débutant',\r\n          photo: user.photo || null,\r\n          points: user.points || 0,\r\n          genre: user.personne?.genre || 'Non spécifié',\r\n          famille: user.famille\r\n        }));\r\n        console.log('Utilisateurs chargés :', users.value);\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement des utilisateurs:', error);\r\n      }\r\n    };\r\n\r\n    const filteredUsers = computed(() => {\r\n      if (!searchQuery.value) return users.value;\r\n      const query = searchQuery.value.toLowerCase();\r\n      return users.value.filter(user =>\r\n          user.login?.toLowerCase().includes(query) ||\r\n          user.nom?.toLowerCase().includes(query) ||\r\n          user.prenom?.toLowerCase().includes(query) ||\r\n          user.famille?.codeFamille?.toLowerCase().includes(query)\r\n      );\r\n    });\r\n\r\n    const handleImageError = (event) => {\r\n      event.target.src = defaultAvatar;\r\n    };\r\n\r\n    const getRoleBadgeClass = (role) => {\r\n      return `role-badge role-${role}`;\r\n    };\r\n\r\n    const editUser = (user) => {\r\n      editingUser.value = user;\r\n      form.value = {\r\n        nom: user.nom,\r\n        prenom: user.prenom,\r\n        codeFamille: user.famille?.codeFamille || '',\r\n        login: user.login,\r\n        role: user.role,\r\n        niveau: user.niveau,\r\n        genre: user.genre || 'Non spécifié',\r\n        password: ''\r\n      };\r\n      formMessage.value = '';\r\n      showModal.value = true;\r\n    };\r\n\r\n    const openAddUserModal = () => {\r\n      editingUser.value = null;\r\n      showModal.value = true;\r\n      form.value = {\r\n        nom: '',\r\n        prenom: '',\r\n        genre: 'Non spécifié',\r\n        codeFamille: '',\r\n        login: '',\r\n        password: '',\r\n        role: 'simple',\r\n        niveau: 'débutant'\r\n      };\r\n      formMessage.value = '';\r\n    };\r\n\r\n    const openAddFamilleModal = () => {\r\n      showFamilleModal.value = true;\r\n      familleForm.value = {\r\n        codeFamille: '',\r\n        nom: '',\r\n        description: ''\r\n      };\r\n    };\r\n\r\n    const closeFamilleModal = () => {\r\n      showFamilleModal.value = false;\r\n    };\r\n\r\n    const saveFamille = async () => {\r\n      try {\r\n        await api.post('/familles', familleForm.value);\r\n        await loadFamilles();\r\n        closeFamilleModal();\r\n      } catch (error) {\r\n        console.error('Erreur lors de la création de la famille:', error);\r\n      }\r\n    };\r\n\r\n    const deleteMessage = ref('');\r\n    const deleteSuccess = ref(false);\r\n\r\n    const closeModal = () => {\r\n      showModal.value = false;\r\n      editingUser.value = null;\r\n    };\r\n\r\n    const confirmDelete = async (user) => {\r\n      if (confirm(`Êtes-vous sûr de vouloir supprimer l'utilisateur ${user.login} ?`)) {\r\n        try {\r\n          await api.delete(`/users/${user._id}`);\r\n          deleteMessage.value = 'Utilisateur supprimé avec succès !';\r\n          deleteSuccess.value = true;\r\n          await loadUsers();\r\n          setTimeout(() => {\r\n            deleteMessage.value = '';\r\n          }, 2000);\r\n        } catch (error) {\r\n          deleteMessage.value = error.response?.data?.message || \"Erreur lors de la suppression de l'utilisateur.\";\r\n          deleteSuccess.value = false;\r\n        }\r\n      }\r\n    };\r\n\r\n    const saveUser = async () => {\r\n      try {\r\n        formMessage.value = '';\r\n\r\n        if (!form.value.password && !editingUser.value) {\r\n          formMessage.value = 'Le mot de passe est requis pour un nouvel utilisateur';\r\n          formSuccess.value = false;\r\n          return;\r\n        }\r\n\r\n        const userData = {\r\n          nom: form.value.nom.trim(),\r\n          prenom: form.value.prenom.trim(),\r\n          codeFamille: form.value.codeFamille,\r\n          login: form.value.login.trim(),\r\n          role: form.value.role,\r\n          niveau: form.value.niveau,\r\n          personne: {\r\n            nom: form.value.nom.trim(),\r\n            prenom: form.value.prenom.trim(),\r\n            genre: form.value.genre\r\n          }\r\n        };\r\n\r\n        if (!editingUser.value) {\r\n          userData.password = form.value.password;\r\n        }\r\n\r\n        let response;\r\n        if (editingUser.value) {\r\n          response = await api.put(`/users/${editingUser.value._id}`, userData);\r\n        } else {\r\n          response = await api.post('/users', userData);\r\n        }\r\n\r\n        if (response.data) {\r\n          formMessage.value = editingUser.value ?\r\n              'Utilisateur modifié avec succès !' :\r\n              'Utilisateur ajouté avec succès !';\r\n          formSuccess.value = true;\r\n          await loadUsers();\r\n          setTimeout(() => closeModal(), 1500);\r\n        }\r\n      } catch (err) {\r\n        let errorMessage = editingUser.value ?\r\n            'Erreur lors de la modification de l\\'utilisateur' :\r\n            'Erreur lors de la création de l\\'utilisateur';\r\n\r\n        if (err.response?.status === 404) {\r\n          errorMessage = 'Erreur de connexion au serveur. Vérifiez que le serveur backend est démarré.';\r\n        } else if (err.response?.status === 403) {\r\n          errorMessage = 'Vous n\\'avez pas les droits nécessaires.';\r\n        } else if (err.response?.data?.message) {\r\n          errorMessage = err.response.data.message;\r\n        }\r\n\r\n        formMessage.value = errorMessage;\r\n        formSuccess.value = false;\r\n      }\r\n    };\r\n\r\n    const showHistory = (user) => {\r\n      selectedUser.value = user;\r\n      showHistoryModal.value = true;\r\n    };\r\n\r\n    const closeHistoryModal = () => {\r\n      showHistoryModal.value = false;\r\n    };\r\n\r\n    // Nouvelle fonction pour afficher l'historique des points\r\n    const fetchPointsHistory = async (userId) => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await api.get(`/history?search=${userId}`);\r\n        // Filtrer pour ne garder que les actions liées aux points\r\n        pointsHistory.value = response.data.histories.filter(\r\n            entry => entry.action === 'ajout_points' &&\r\n                entry.details.userId === userId\r\n        );\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement de l\\'historique des points:', error);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // Fonctions pour gérer l'affichage de l'historique des points\r\n    const viewPointsHistory = async (user) => {\r\n      selectedUser.value = user;\r\n      await fetchPointsHistory(user._id);\r\n      showPointsHistoryModal.value = true;\r\n    };\r\n\r\n    const closePointsHistoryModal = () => {\r\n      showPointsHistoryModal.value = false;\r\n      pointsHistory.value = [];\r\n    };\r\n\r\n    // Fonctions pour gérer l'ajustement des points\r\n    const adjustPoints = (user) => {\r\n      selectedUser.value = user;\r\n      pointsForm.value = {\r\n        amount: null,\r\n        reason: ''\r\n      };\r\n      showPointsAdjustModal.value = true;\r\n    };\r\n\r\n    const closePointsAdjustModal = () => {\r\n      showPointsAdjustModal.value = false;\r\n    };\r\n\r\n    const savePointsAdjustment = async () => {\r\n      if (!pointsForm.value.amount) return;\r\n\r\n      try {\r\n        loading.value = true;\r\n\r\n        const response = await api.post(`/users/${selectedUser.value._id}/points`, {\r\n          amount: parseFloat(pointsForm.value.amount),\r\n          reason: pointsForm.value.reason\r\n        });\r\n\r\n        // Mettre à jour les points de l'utilisateur dans la liste\r\n        const userIndex = users.value.findIndex(u => u._id === selectedUser.value._id);\r\n        if (userIndex !== -1) {\r\n          const oldNiveau = users.value[userIndex].niveau;\r\n          const oldRole = users.value[userIndex].role;\r\n\r\n          // Mettre à jour les points\r\n          users.value[userIndex].points = response.data.points;\r\n          selectedUser.value.points = response.data.points;\r\n\r\n          // Vérifier s'il y a eu changement de niveau ou de rôle\r\n          if (response.data.niveauChanged || response.data.roleChanged) {\r\n            // Mettre à jour le niveau et le rôle\r\n            users.value[userIndex].niveau = response.data.niveau;\r\n            users.value[userIndex].role = response.data.role;\r\n            selectedUser.value.niveau = response.data.niveau;\r\n            selectedUser.value.role = response.data.role;\r\n\r\n            // Préparer les données pour le modal de notification\r\n            levelChangeData.value = {\r\n              niveauChanged: response.data.niveauChanged,\r\n              roleChanged: response.data.roleChanged,\r\n              niveauAvant: oldNiveau,\r\n              niveauApres: response.data.niveau,\r\n              roleAvant: oldRole,\r\n              roleApres: response.data.role\r\n            };\r\n\r\n            // Fermer le modal d'ajustement et afficher celui de notification\r\n            showPointsAdjustModal.value = false;\r\n            showLevelChangeModal.value = true;\r\n          } else {\r\n            // Rafraîchir l'historique des points et afficher\r\n            await fetchPointsHistory(selectedUser.value._id);\r\n            showPointsAdjustModal.value = false;\r\n            showPointsHistoryModal.value = true;\r\n          }\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Erreur lors de l\\'ajustement des points:', error);\r\n        alert('Une erreur est survenue lors de l\\'ajustement des points.');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // Fonctions d'aide pour l'affichage\r\n    const formatDate = (dateString) => {\r\n      return new Date(dateString).toLocaleString('fr-FR');\r\n    };\r\n\r\n    const formatAction = (action) => {\r\n      const actions = {\r\n        'ajout_points': 'Ajustement de points',\r\n        'upgrade_niveau': 'Changement de niveau'\r\n      };\r\n      return actions[action] || action;\r\n    };\r\n\r\n    const formatPointsChange = (amount) => {\r\n      if (amount > 0) return `+${amount}`;\r\n      return amount;\r\n    };\r\n\r\n    const getPointsClass = (amount) => {\r\n      if (amount > 0) return 'points-positive';\r\n      if (amount < 0) return 'points-negative';\r\n      return '';\r\n    };\r\n\r\n    // Fonction pour déterminer si un changement de niveau est une progression ou une régression\r\n    const isLevelUpgrade = (before, after) => {\r\n      const niveauxOrder = {\r\n        'débutant': 1,\r\n        'intermédiaire': 2,\r\n        'avancé': 3,\r\n        'expert': 4\r\n      };\r\n      return niveauxOrder[after] > niveauxOrder[before];\r\n    };\r\n\r\n    // Fonction pour déterminer si un changement de rôle est une progression ou une régression\r\n    const isRoleUpgrade = (before, after) => {\r\n      const rolesOrder = {\r\n        'visiteur': 1,\r\n        'simple': 2,\r\n        'complexe': 3,\r\n        'admin': 4\r\n      };\r\n      return rolesOrder[after] > rolesOrder[before];\r\n    };\r\n\r\n    // Fonction pour fermer le modal de changement de niveau\r\n    const closeLevelChangeModal = () => {\r\n      showLevelChangeModal.value = false;\r\n    };\r\n\r\n    onMounted(() => {\r\n      loadUsers();\r\n      loadFamilles();\r\n    });\r\n\r\n    return {\r\n      users,\r\n      familles,\r\n      searchQuery,\r\n      filteredUsers,\r\n      showModal,\r\n      showFamilleModal,\r\n      editingUser,\r\n      defaultAvatar,\r\n      getPhotoUrl,\r\n      handleImageError,\r\n      editUser,\r\n      openAddUserModal,\r\n      openAddFamilleModal,\r\n      closeModal,\r\n      closeFamilleModal,\r\n      confirmDelete,\r\n      saveUser,\r\n      saveFamille,\r\n      getRoleBadgeClass,\r\n      form,\r\n      familleForm,\r\n      formMessage,\r\n      formSuccess,\r\n      showHistoryModal,\r\n      selectedUser,\r\n      showHistory,\r\n      closeHistoryModal,\r\n\r\n      // Nouvelles variables pour les points\r\n      showPointsHistoryModal,\r\n      showPointsAdjustModal,\r\n      pointsHistory,\r\n      pointsForm,\r\n      loading,\r\n\r\n      // Nouvelles variables pour le changement de niveau\r\n      showLevelChangeModal,\r\n      levelChangeData,\r\n      closeLevelChangeModal,\r\n\r\n      // Nouvelles fonctions pour la comparaison\r\n      isLevelUpgrade,\r\n      isRoleUpgrade,\r\n\r\n      // Fonctions pour les points\r\n      viewPointsHistory,\r\n      closePointsHistoryModal,\r\n      adjustPoints,\r\n      closePointsAdjustModal,\r\n      savePointsAdjustment,\r\n      formatDate,\r\n      formatAction,\r\n      formatPointsChange,\r\n      getPointsClass\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-users-container {\r\n  padding: 15px;\r\n}\r\n\r\n.page-title {\r\n  color: #2c5038;\r\n  margin-bottom: 20px;\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.actions-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.search-input {\r\n  padding: 6px 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  width: 250px;\r\n}\r\n\r\n.add-user-btn {\r\n  background-color: #2c5038;\r\n  color: white;\r\n  padding: 6px 12px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.users-table {\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  margin-top: 20px;\r\n}\r\n\r\n.users-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  table-layout: fixed;\r\n}\r\n\r\n.users-table th, .users-table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.users-table th {\r\n  background-color: #f8fafc;\r\n  font-weight: 600;\r\n  color: #2c5038;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n}\r\n\r\n.users-table tbody tr:hover {\r\n  background-color: #f1f5f9;\r\n}\r\n\r\n.user-avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  border: 2px solid #4a7c59;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* Ajustement des largeurs de colonnes */\r\n.users-table th:nth-child(1), .users-table td:nth-child(1) { width: 60px; }  /* Photo */\r\n.users-table th:nth-child(2), .users-table td:nth-child(2) { width: 12%; }   /* Nom */\r\n.users-table th:nth-child(3), .users-table td:nth-child(3) { width: 12%; }   /* Prénom */\r\n.users-table th:nth-child(4), .users-table td:nth-child(4) { width: 10%; }   /* Famille */\r\n.users-table th:nth-child(5), .users-table td:nth-child(5) { width: 12%; }   /* Login */\r\n.users-table th:nth-child(6), .users-table td:nth-child(6) { width: 8%; }    /* Rôle */\r\n.users-table th:nth-child(7), .users-table td:nth-child(7) { width: 12%; }   /* Niveau */\r\n.users-table th:nth-child(8), .users-table td:nth-child(8) { width: 8%; }    /* Points */\r\n.users-table th:nth-child(9), .users-table td:nth-child(9) { width: 16%; }   /* Actions */\r\n\r\n/* Style des badges de rôle */\r\n.role-badge {\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n  text-transform: capitalize;\r\n  display: inline-block;\r\n}\r\n\r\n.role-admin {\r\n  background-color: #fee2e2;\r\n  color: #b91c1c;\r\n}\r\n\r\n.role-simple {\r\n  background-color: #e0f2fe;\r\n  color: #0369a1;\r\n}\r\n\r\n.role-complexe {\r\n  background-color: #dcfce7;\r\n  color: #166534;\r\n}\r\n\r\n.role-visiteur {\r\n  background-color: #fef3c7;\r\n  color: #92400e;\r\n}\r\n\r\n/* Messages de succès et d'erreur */\r\n.success-msg, .error-msg {\r\n  padding: 10px 15px;\r\n  margin: 10px 0;\r\n  border-radius: 5px;\r\n  font-weight: 500;\r\n}\r\n\r\n.success-msg {\r\n  background-color: #dcfce7;\r\n  color: #166534;\r\n  border: 1px solid #86efac;\r\n}\r\n\r\n.error-msg {\r\n  background-color: #fee2e2;\r\n  color: #b91c1c;\r\n  border: 1px solid #fca5a5;\r\n}\r\n\r\n.actions-cell {\r\n  display: flex;\r\n  gap: 8px;\r\n  justify-content: flex-start;\r\n  padding: 4px !important;\r\n}\r\n\r\n.action-btn {\r\n  width: 28px;\r\n  height: 28px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.action-btn i {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.action-btn.edit {\r\n  background-color: #2c5038;\r\n  color: white;\r\n}\r\n\r\n.action-btn.delete {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.action-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\n.action-btn.edit:hover {\r\n  background-color: #1e3725;\r\n}\r\n\r\n.action-btn.delete:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.action-btn .tooltip {\r\n  position: absolute;\r\n  bottom: -30px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: #333;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: all 0.3s ease;\r\n  white-space: nowrap;\r\n  z-index: 1000;\r\n}\r\n\r\n.action-btn:hover .tooltip {\r\n  opacity: 1;\r\n  visibility: visible;\r\n  bottom: -35px;\r\n}\r\n\r\n/* Ajout d'une petite flèche au tooltip */\r\n.action-btn .tooltip::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  border-width: 0 4px 4px 4px;\r\n  border-style: solid;\r\n  border-color: transparent transparent #333 transparent;\r\n}\r\n\r\n/* Style pour la colonne Actions dans le header */\r\nth:last-child {\r\n  text-align: center !important;\r\n}\r\n\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  min-width: 400px;\r\n}\r\n\r\n.modal-actions {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.save-btn {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #9e9e9e;\r\n  color: white;\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 12px;\r\n}\r\n.form-row label {\r\n  font-weight: 500;\r\n  margin-bottom: 4px;\r\n  color: #2c5038;\r\n}\r\n.form-row input, .form-row select {\r\n  padding: 7px 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n.avatar-homme {\r\n  border: 3px solid #007bff; /* Bleu */\r\n  padding: 2px;\r\n}\r\n\r\n.avatar-femme {\r\n  border: 3px solid #ff9800; /* Orange */\r\n  padding: 2px;\r\n}\r\n\r\n.avatar-neutre {\r\n  border: 3px solid #ccc; /* Gris */\r\n  padding: 2px;\r\n}\r\n\r\n.btn-history {\r\n  background-color: #2c5038;\r\n  color: white;\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  transition: background-color 0.3s;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.btn-history:hover {\r\n  background-color: #1a3022;\r\n}\r\n\r\n.btn-history i {\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.add-famille-btn {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n  font-size: 0.9rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.add-famille-btn i {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.add-famille-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.points-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.points-badge {\r\n  background-color: #2c5038;\r\n  color: white;\r\n  padding: 3px 8px;\r\n  border-radius: 12px;\r\n  font-weight: bold;\r\n  font-size: 0.9rem;\r\n  min-width: 30px;\r\n  text-align: center;\r\n}\r\n\r\n.points-adjust-btn {\r\n  background: none;\r\n  border: none;\r\n  color: #2c5038;\r\n  cursor: pointer;\r\n  font-size: 1.1rem;\r\n  padding: 2px;\r\n  opacity: 0.7;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.points-adjust-btn:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.points-history-modal {\r\n  max-width: 800px;\r\n  width: 90%;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  background-color: #2c5038;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.modal-header h2 {\r\n  margin: 0;\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.2rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.user-points-summary {\r\n  background-color: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.total-points {\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n}\r\n\r\n.points-value {\r\n  font-weight: bold;\r\n  color: #2c5038;\r\n}\r\n\r\n.points-history-table {\r\n  width: 100%;\r\n  overflow-x: auto;\r\n}\r\n\r\n.points-history-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.points-history-table th,\r\n.points-history-table td {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #ddd;\r\n  text-align: left;\r\n}\r\n\r\n.points-history-table th {\r\n  background-color: #f8f9fa;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.points-positive {\r\n  color: green;\r\n  font-weight: bold;\r\n}\r\n\r\n.points-negative {\r\n  color: red;\r\n  font-weight: bold;\r\n}\r\n\r\n.no-history {\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n.level-change-modal {\r\n  max-width: 400px;\r\n  width: 90%;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  background-color: #2c5038;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.modal-header h2 {\r\n  margin: 0;\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.2rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.level-change-content {\r\n  padding: 20px;\r\n}\r\n\r\n.user-info-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.user-login {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.change-item {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.change-label {\r\n  font-weight: bold;\r\n}\r\n\r\n.change-details {\r\n  margin-top: 5px;\r\n}\r\n\r\n.before-change {\r\n  margin-right: 10px;\r\n}\r\n\r\n.after-change {\r\n  font-weight: bold;\r\n}\r\n\r\n.highlight {\r\n  font-weight: bold;\r\n  color: #2c5038;\r\n}\r\n\r\n.points-summary {\r\n  margin-top: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.points-label {\r\n  font-weight: bold;\r\n}\r\n\r\n.congratulations-message {\r\n  text-align: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.modal-footer {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.btn {\r\n  background-color: #2c5038;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn:hover {\r\n  background-color: #1a3022;\r\n}\r\n\r\n.primary {\r\n  background-color: #4CAF50;\r\n}\r\n\r\n.primary:hover {\r\n  background-color: #45a049;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}