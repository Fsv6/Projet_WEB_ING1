{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport Login from '../views/Login.vue';\nimport Register from '../views/Register.vue';\nimport AccueilAdmin from '../views/AccueilAdmin.vue';\nimport VisitorsView from '@/views/VisitorsView.vue';\nconst routes = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/visitors',\n  component: VisitorsView,\n  children: [{\n    path: '',\n    redirect: '/explore'\n  }]\n}, {\n  path: '/admin',\n  name: 'AccueilAdmin',\n  component: AccueilAdmin,\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/register',\n  name: 'RegisterPage',\n  component: Register\n}, {\n  path: '/validation',\n  name: 'Validation',\n  component: () => import('@/views/ValidationInscription.vue')\n}, {\n  path: '/explore',\n  name: 'Explore',\n  component: () => import('@/views/ExploreApp.vue')\n}, {\n  path: '/recettes',\n  name: 'Recettes',\n  component: () => import('@/views/RecettesView.vue')\n}, {\n  path: '/dashboard',\n  name: 'Dashboard',\n  component: () => import('@/views/ExploreApp.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/profile',\n  name: 'Profile',\n  component: () => import('@/views/ProfileView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/objects/:id',\n  name: 'ObjectDetails',\n  component: () => import('@/views/ObjectDetails.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/level',\n  name: 'LevelView',\n  component: () => import('@/views/LevelView.vue'),\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/profile/:id',\n  name: 'OtherProfile',\n  component: () => import('@/views/OtherProfiles.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/objects/:id/control',\n  name: 'control-object',\n  component: () => import('@/views/ControlObjectView.vue')\n}, {\n  path: '/manage/objects/new',\n  name: 'create-object',\n  component: () => import('@/views/CreateObjectView.vue'),\n  meta: {\n    requiresRole: ['complexe', 'admin']\n  }\n}, {\n  path: '/manage/objects',\n  name: 'objects-management',\n  component: () => import('@/views/ObjectsManagementView.vue'),\n  meta: {\n    requiresRole: ['complexe', 'admin']\n  }\n}, {\n  path: '/manage/objects/:id/edit',\n  name: 'EditObject',\n  component: () => import('@/views/EditObject.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/recettes/new',\n  name: 'NewRecettes',\n  component: () => import('@/views/NewRecettes.vue')\n}, {\n  path: '/recettes/:id',\n  name: 'RecetteDetails',\n  component: () => import('@/views/RecetteDetails.vue')\n}, {\n  path: '/recettes/:id/edit',\n  name: 'EditRecette',\n  component: () => import('@/views/EditRecette.vue')\n}, {\n  path: '/admin/users',\n  name: 'AdminUsers',\n  component: () => import('@/views/AdminUsers.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/admin/history',\n  name: 'AdminHistory',\n  component: () => import('@/views/AdminHistory.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/admin/families',\n  name: 'AdminFamilies',\n  component: () => import('@/views/AdminFamilies.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/admin/user-points',\n  name: 'AdminUserPoints',\n  component: () => import('@/views/AdminUserPoints.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/family-members',\n  name: 'FamilyMembers',\n  component: () => import('@/views/FamilyMembers.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// Navigation guard\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('token');\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      next('/login');\n    } else if (to.matched.some(record => record.meta.requiresAdmin) && user.role !== 'admin') {\n      next('/login');\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Login","Register","AccueilAdmin","VisitorsView","routes","path","redirect","name","component","children","meta","requiresAuth","requiresAdmin","requiresRole","router","history","process","env","BASE_URL","beforeEach","to","from","next","token","localStorage","getItem","user","JSON","parse","matched","some","record","role"],"sources":["C:/Users/benab/Desktop/COURS 24_25/S2/WEB/V4/Projet_WEB_ING1/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport Login from '../views/Login.vue'\r\nimport Register from '../views/Register.vue'\r\nimport AccueilAdmin from '../views/AccueilAdmin.vue'\r\nimport VisitorsView from '@/views/VisitorsView.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: '/login'\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login\r\n  },\r\n  {\r\n    path: '/visitors',\r\n    component: VisitorsView,\r\n    children: [\r\n      {\r\n        path: '',\r\n        redirect: '/explore'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    path: '/admin',\r\n    name: 'AccueilAdmin',\r\n    component: AccueilAdmin,\r\n    meta: { \r\n      requiresAuth: true,\r\n      requiresAdmin: true \r\n    }\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'RegisterPage',\r\n    component: Register\r\n  },\r\n  {\r\n    path: '/validation',\r\n    name: 'Validation',\r\n    component: () => import('@/views/ValidationInscription.vue')\r\n  },\r\n  {\r\n    path: '/explore',\r\n    name: 'Explore',\r\n    component: () => import('@/views/ExploreApp.vue')\r\n  },\r\n  {\r\n    path: '/recettes',\r\n    name: 'Recettes',\r\n    component: () => import('@/views/RecettesView.vue')\r\n  },\r\n  {\r\n    path: '/dashboard',\r\n    name: 'Dashboard',\r\n    component: () => import('@/views/ExploreApp.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/profile',\r\n    name: 'Profile',\r\n    component: () => import('@/views/ProfileView.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/objects/:id',\r\n    name: 'ObjectDetails',\r\n    component: () => import('@/views/ObjectDetails.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/level',\r\n        name: 'LevelView',\r\n      component: () => import('@/views/LevelView.vue'),\r\n      meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/profile/:id',\r\n    name: 'OtherProfile',\r\n    component: () => import('@/views/OtherProfiles.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/objects/:id/control',\r\n    name: 'control-object',\r\n    component: () => import('@/views/ControlObjectView.vue')\r\n  },\r\n  {\r\n    path: '/manage/objects/new',\r\n    name: 'create-object',\r\n    component: () => import('@/views/CreateObjectView.vue'),\r\n    meta: { requiresRole: ['complexe', 'admin'] }\r\n  },\r\n  {\r\n    path: '/manage/objects',\r\n    name: 'objects-management',\r\n    component: () => import('@/views/ObjectsManagementView.vue'),\r\n    meta: { requiresRole: ['complexe', 'admin'] }\r\n  },\r\n  {\r\n    path: '/manage/objects/:id/edit',\r\n    name: 'EditObject',\r\n    component: () => import('@/views/EditObject.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/recettes/new',\r\n    name: 'NewRecettes',\r\n    component: () => import('@/views/NewRecettes.vue')\r\n  },\r\n  {\r\n    path: '/recettes/:id',\r\n    name: 'RecetteDetails',\r\n    component: () => import('@/views/RecetteDetails.vue')\r\n  },\r\n  {\r\n    path: '/recettes/:id/edit',\r\n    name: 'EditRecette',\r\n    component: () => import('@/views/EditRecette.vue')\r\n  },\r\n  {\r\n    path: '/admin/users',\r\n    name: 'AdminUsers',\r\n    component: () => import('@/views/AdminUsers.vue'),\r\n    meta: { requiresAuth: true, requiresAdmin: true }\r\n  },\r\n  {\r\n    path: '/admin/history',\r\n    name: 'AdminHistory',\r\n    component: () => import('@/views/AdminHistory.vue'),\r\n    meta: { requiresAuth: true, requiresAdmin: true }\r\n  },\r\n  {\r\n    path: '/admin/families',\r\n    name: 'AdminFamilies',\r\n    component: () => import('@/views/AdminFamilies.vue'),\r\n    meta: { requiresAuth: true, requiresAdmin: true }\r\n  },\r\n  {\r\n    path: '/admin/user-points',\r\n    name: 'AdminUserPoints',\r\n    component: () => import('@/views/AdminUserPoints.vue'),\r\n    meta: { requiresAuth: true, requiresAdmin: true }\r\n  },\r\n  {\r\n    path: '/family-members',\r\n    name: 'FamilyMembers',\r\n    component: () => import('@/views/FamilyMembers.vue'),\r\n    meta: { requiresAuth: true }\r\n  }\r\n\r\n\r\n\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// Navigation guard\r\nrouter.beforeEach((to, from, next) => {\r\n  const token = localStorage.getItem('token');\r\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    if (!token) {\r\n      next('/login');\r\n    } else if (to.matched.some(record => record.meta.requiresAdmin) && user.role !== 'admin') {\r\n      next('/login');\r\n    } else {\r\n      next();\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\nexport default router "],"mappings":";;AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,YAAY,MAAM,2BAA2B;AACpD,OAAOC,YAAY,MAAM,0BAA0B;AAEnD,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,QAAQ,EAAE;AACZ,CAAC,EACD;EACED,IAAI,EAAE,QAAQ;EACdE,IAAI,EAAE,OAAO;EACbC,SAAS,EAAER;AACb,CAAC,EACD;EACEK,IAAI,EAAE,WAAW;EACjBG,SAAS,EAAEL,YAAY;EACvBM,QAAQ,EAAE,CACR;IACEJ,IAAI,EAAE,EAAE;IACRC,QAAQ,EAAE;EACZ,CAAC;AAEL,CAAC,EACD;EACED,IAAI,EAAE,QAAQ;EACdE,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEN,YAAY;EACvBQ,IAAI,EAAE;IACJC,YAAY,EAAE,IAAI;IAClBC,aAAa,EAAE;EACjB;AACF,CAAC,EACD;EACEP,IAAI,EAAE,WAAW;EACjBE,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEP;AACb,CAAC,EACD;EACEI,IAAI,EAAE,aAAa;EACnBE,IAAI,EAAE,YAAY;EAClBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,mCAAmC;AAC7D,CAAC,EACD;EACEH,IAAI,EAAE,UAAU;EAChBE,IAAI,EAAE,SAAS;EACfC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,wBAAwB;AAClD,CAAC,EACD;EACEH,IAAI,EAAE,WAAW;EACjBE,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,0BAA0B;AACpD,CAAC,EACD;EACEH,IAAI,EAAE,YAAY;EAClBE,IAAI,EAAE,WAAW;EACjBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,wBAAwB,CAAC;EACjDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAE,UAAU;EAChBE,IAAI,EAAE,SAAS;EACfC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,yBAAyB,CAAC;EAClDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAE,cAAc;EACpBE,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B,CAAC;EACpDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAE,QAAQ;EACVE,IAAI,EAAE,WAAW;EACnBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,uBAAuB,CAAC;EAChDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAChC,CAAC,EACD;EACEN,IAAI,EAAE,cAAc;EACpBE,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B,CAAC;EACpDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAE,sBAAsB;EAC5BE,IAAI,EAAE,gBAAgB;EACtBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,+BAA+B;AACzD,CAAC,EACD;EACEH,IAAI,EAAE,qBAAqB;EAC3BE,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,8BAA8B,CAAC;EACvDE,IAAI,EAAE;IAAEG,YAAY,EAAE,CAAC,UAAU,EAAE,OAAO;EAAE;AAC9C,CAAC,EACD;EACER,IAAI,EAAE,iBAAiB;EACvBE,IAAI,EAAE,oBAAoB;EAC1BC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,mCAAmC,CAAC;EAC5DE,IAAI,EAAE;IAAEG,YAAY,EAAE,CAAC,UAAU,EAAE,OAAO;EAAE;AAC9C,CAAC,EACD;EACER,IAAI,EAAE,0BAA0B;EAChCE,IAAI,EAAE,YAAY;EAClBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,wBAAwB,CAAC;EACjDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEN,IAAI,EAAE,eAAe;EACrBE,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,yBAAyB;AACnD,CAAC,EACD;EACEH,IAAI,EAAE,eAAe;EACrBE,IAAI,EAAE,gBAAgB;EACtBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,4BAA4B;AACtD,CAAC,EACD;EACEH,IAAI,EAAE,oBAAoB;EAC1BE,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,yBAAyB;AACnD,CAAC,EACD;EACEH,IAAI,EAAE,cAAc;EACpBE,IAAI,EAAE,YAAY;EAClBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,wBAAwB,CAAC;EACjDE,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEP,IAAI,EAAE,gBAAgB;EACtBE,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,0BAA0B,CAAC;EACnDE,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEP,IAAI,EAAE,iBAAiB;EACvBE,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B,CAAC;EACpDE,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEP,IAAI,EAAE,oBAAoB;EAC1BE,IAAI,EAAE,iBAAiB;EACvBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,6BAA6B,CAAC;EACtDE,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEP,IAAI,EAAE,iBAAiB;EACvBE,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B,CAAC;EACpDE,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,CAIF;AAED,MAAMG,MAAM,GAAGhB,YAAY,CAAC;EAC1BiB,OAAO,EAAEhB,gBAAgB,CAACiB,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/Cd;AACF,CAAC,CAAC;;AAEF;AACAU,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;EAE7D,IAAIL,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACrB,IAAI,CAACC,YAAY,CAAC,EAAE;IACvD,IAAI,CAACY,KAAK,EAAE;MACVD,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM,IAAIF,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACrB,IAAI,CAACE,aAAa,CAAC,IAAIc,IAAI,CAACM,IAAI,KAAK,OAAO,EAAE;MACxFV,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC;IACR;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeR,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}