{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, withModifiers as _withModifiers, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"nouvelle-recette-page\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"dynamic-list\"\n};\nconst _hoisted_8 = {\n  class: \"input-group\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = {\n  class: \"dynamic-list\"\n};\nconst _hoisted_12 = {\n  class: \"input-group\"\n};\nconst _hoisted_13 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"AppLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"➕ Nouvelle Recette\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($setup.submitRecette, [\"prevent\"]),\n      class: \"recette-form\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"Titre\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.titre = $event),\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.titre]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"Description\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.description = $event),\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.description]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Objets utilisés\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.objetsUtilises = $event),\n      multiple: \"\"\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.allObjects, obj => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        value: obj._id,\n        key: obj._id\n      }, _toDisplayString(obj.nom), 9 /* TEXT, PROPS */, _hoisted_5);\n    }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.objetsUtilises]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Ingrédients\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.newIngredient = $event),\n      placeholder: \"Ajouter un ingrédient\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newIngredient]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $setup.addIngredient\n    }, \"➕\")]), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ingredients, (item, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, [_createTextVNode(_toDisplayString(item) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: $event => $setup.removeIngredient(index)\n      }, \"❌\", 8 /* PROPS */, _hoisted_9)]);\n    }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_10, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Étapes\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.newEtape = $event),\n      placeholder: \"Ajouter une étape\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newEtape]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $setup.addEtape\n    }, \"➕\")]), _createElementVNode(\"ol\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.etapes, (etape, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, [_createTextVNode(_toDisplayString(etape) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: $event => $setup.removeEtape(index)\n      }, \"❌\", 8 /* PROPS */, _hoisted_13)]);\n    }), 128 /* KEYED_FRAGMENT */))])])]), _cache[10] || (_cache[10] = _createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"btn-submit\"\n    }, \"Créer\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","$setup","default","_withCtx","_createElementVNode","_hoisted_1","onSubmit","_withModifiers","submitRecette","_hoisted_2","_cache","$event","form","titre","required","_hoisted_3","description","_hoisted_4","objetsUtilises","multiple","_createElementBlock","_Fragment","_renderList","allObjects","obj","value","_id","key","nom","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","newIngredient","placeholder","type","onClick","addIngredient","ingredients","item","index","_createTextVNode","_toDisplayString","removeIngredient","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","newEtape","addEtape","etapes","etape","removeEtape","_hoisted_13","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\NewRecettes.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport api from '@/services/api'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  titre: '',\r\n  description: '',\r\n  objetsUtilises: []\r\n})\r\n\r\nconst allObjects = ref([])\r\nconst ingredients = ref([])\r\nconst newIngredient = ref('')\r\nconst etapes = ref([])\r\nconst newEtape = ref('')\r\n\r\nconst addIngredient = () => {\r\n  if (newIngredient.value.trim()) {\r\n    ingredients.value.push(newIngredient.value.trim())\r\n    newIngredient.value = ''\r\n  }\r\n}\r\n\r\nconst removeIngredient = (index) => {\r\n  ingredients.value.splice(index, 1)\r\n}\r\n\r\nconst addEtape = () => {\r\n  if (newEtape.value.trim()) {\r\n    etapes.value.push(newEtape.value.trim())\r\n    newEtape.value = ''\r\n  }\r\n}\r\n\r\nconst removeEtape = (index) => {\r\n  etapes.value.splice(index, 1)\r\n}\r\n\r\nconst submitRecette = async () => {\r\n  try {\r\n    const payload = {\r\n      ...form.value,\r\n      ingredients: ingredients.value,\r\n      etapes: etapes.value\r\n    }\r\n    await api.post('/recettes', payload)\r\n    alert('✅ Recette ajoutée !')\r\n    router.push('/recettes')\r\n  } catch (err) {\r\n    alert('❌ Erreur lors de la création')\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  const res = await api.get('/objets')\r\n  allObjects.value = res.data\r\n})\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"nouvelle-recette-page\">\r\n      <h2>➕ Nouvelle Recette</h2>\r\n      <form @submit.prevent=\"submitRecette\" class=\"recette-form\">\r\n\r\n        <div class=\"form-group\">\r\n          <label>Titre</label>\r\n          <input v-model=\"form.titre\" required />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Description</label>\r\n          <textarea v-model=\"form.description\" required></textarea>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Objets utilisés</label>\r\n          <select v-model=\"form.objetsUtilises\" multiple>\r\n            <option v-for=\"obj in allObjects\" :value=\"obj._id\" :key=\"obj._id\">\r\n              {{ obj.nom }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Ingrédients</label>\r\n          <div class=\"dynamic-list\">\r\n            <div class=\"input-group\">\r\n              <input v-model=\"newIngredient\" placeholder=\"Ajouter un ingrédient\" />\r\n              <button type=\"button\" @click=\"addIngredient\">➕</button>\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"(item, index) in ingredients\" :key=\"index\">\r\n                {{ item }}\r\n                <button type=\"button\" @click=\"removeIngredient(index)\">❌</button>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Étapes</label>\r\n          <div class=\"dynamic-list\">\r\n            <div class=\"input-group\">\r\n              <input v-model=\"newEtape\" placeholder=\"Ajouter une étape\" />\r\n              <button type=\"button\" @click=\"addEtape\">➕</button>\r\n            </div>\r\n            <ol>\r\n              <li v-for=\"(etape, index) in etapes\" :key=\"index\">\r\n                {{ etape }}\r\n                <button type=\"button\" @click=\"removeEtape(index)\">❌</button>\r\n              </li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn-submit\">Créer</button>\r\n      </form>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.nouvelle-recette-page {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.recette-form {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\nlabel {\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\ninput,\r\ntextarea,\r\nselect {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ccc;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.dynamic-list ul,\r\n.dynamic-list ol {\r\n  margin-top: 1rem;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\nbutton {\r\n  background-color: #28a745;\r\n  color: white;\r\n  padding: 8px 14px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton.btn-submit {\r\n  width: 100%;\r\n  margin-top: 2rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\nbutton[type=\"button\"] {\r\n  background-color: #17a2b8;\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}