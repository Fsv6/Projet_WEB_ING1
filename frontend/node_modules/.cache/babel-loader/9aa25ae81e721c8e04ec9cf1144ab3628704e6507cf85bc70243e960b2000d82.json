{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\nimport { ref, reactive } from 'vue';\nimport api from '@/services/api';\nimport { saveAs } from 'file-saver';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nexport default {\n  name: 'AdminReportsPage',\n  components: {\n    AppLayout\n  },\n  setup() {\n    const filters = reactive({\n      period: '30',\n      includeUsers: true,\n      includeObjects: true,\n      includeFamilies: true,\n      includeActivity: true,\n      exportFormat: 'csv'\n    });\n    const isGenerating = ref(false);\n    const reportData = ref(null);\n\n    // Fonction pour générer le rapport\n    const generateReport = async () => {\n      try {\n        isGenerating.value = true;\n\n        // Récupérer le token d'authentification\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('Non authentifié');\n        }\n\n        // Configurer l'en-tête d'authentification\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Appel API pour récupérer les données pour le rapport\n        const params = {\n          period: filters.period\n        };\n        const response = await api.get('/api/history/admin-report', {\n          params\n        });\n\n        // Traitement des données (simulé ici)\n        // En pratique, on utiliserait les données réelles de l'API\n        reportData.value = {\n          users: {\n            total: response.data.usersCount || 5,\n            byLevel: response.data.usersByLevel || {\n              'débutant': 2,\n              'intermédiaire': 0,\n              'avancé': 1,\n              'expert': 2\n            },\n            new: response.data.newUsers || 1,\n            active: response.data.activeUsers || 4,\n            avgLoginsPerDay: response.data.avgLoginsPerDay || 3.5\n          },\n          objects: {\n            total: response.data.objectsCount || 8,\n            byType: response.data.objectsByType || {\n              'Four': 2,\n              'Réfrigérateur': 1,\n              'Robot': 2,\n              'Micro-ondes': 1,\n              'Mixeur': 2\n            },\n            totalUsage: response.data.totalObjectsUsage || 124,\n            avgUsagePerDay: response.data.avgObjectsUsagePerDay || 12.4,\n            mostUsed: response.data.mostUsedObject || 'Four principal'\n          },\n          families: {\n            total: response.data.familiesCount || 3,\n            avgSize: response.data.avgFamilySize || 2.7,\n            withPoints: response.data.familiesWithPoints || 2,\n            totalPoints: response.data.totalPoints || 350,\n            avgPointsPerFamily: response.data.avgPointsPerFamily || 116.7,\n            recentPoints: response.data.recentPointsDistributed || 50\n          },\n          activity: {\n            total: response.data.actionsCount || 250,\n            byType: response.data.actionsByType || {\n              'connexion': 45,\n              'utilisation_objet': 124,\n              'ajout_points': 15,\n              'creation_recette': 8,\n              'modification_utilisateur': 12,\n              'autre': 46\n            },\n            byTime: response.data.actionsByTime || {\n              'Matin (00h-08h)': 25,\n              'Journée (08h-16h)': 120,\n              'Soir (16h-00h)': 105\n            }\n          }\n        };\n      } catch (error) {\n        console.error('Erreur lors de la génération du rapport:', error);\n        alert('Erreur lors de la génération du rapport. Veuillez réessayer.');\n      } finally {\n        isGenerating.value = false;\n      }\n    };\n\n    // Fonction pour exporter le rapport\n    const exportReport = format => {\n      if (!reportData.value) return;\n      try {\n        const timestamp = new Date().toISOString().slice(0, 10);\n        const fileName = `rapport_admin_${timestamp}`;\n        if (format === 'csv') {\n          exportToCSV(fileName);\n        } else if (format === 'pdf') {\n          exportToPDF(fileName);\n        } else if (format === 'json') {\n          exportToJSON(fileName);\n        }\n      } catch (error) {\n        console.error('Erreur lors de l\\'exportation du rapport:', error);\n        alert('Erreur lors de l\\'exportation du rapport. Veuillez réessayer.');\n      }\n    };\n\n    // Fonction pour exporter en CSV\n    const exportToCSV = fileName => {\n      let csvContent = 'data:text/csv;charset=utf-8,';\n\n      // En-tête du CSV\n      csvContent += 'Rapport d\\'administration - ' + new Date().toLocaleDateString('fr-FR') + '\\r\\n\\r\\n';\n\n      // Ajouter les données selon les sections incluses\n      if (filters.includeUsers) {\n        csvContent += 'STATISTIQUES UTILISATEURS\\r\\n';\n        csvContent += 'Niveau,Nombre,Pourcentage\\r\\n';\n        Object.entries(reportData.value.users.byLevel).forEach(([level, count]) => {\n          const percentage = (count / reportData.value.users.total * 100).toFixed(1);\n          csvContent += `${getNiceLevelName(level)},${count},${percentage}%\\r\\n`;\n        });\n        csvContent += '\\r\\nActivité utilisateurs\\r\\n';\n        csvContent += `Nouveaux utilisateurs,${reportData.value.users.new}\\r\\n`;\n        csvContent += `Utilisateurs actifs,${reportData.value.users.active}\\r\\n`;\n        csvContent += `Moyenne de connexions par jour,${reportData.value.users.avgLoginsPerDay.toFixed(1)}\\r\\n\\r\\n`;\n      }\n\n      // Continuer avec les autres sections...\n      // (Objets, Familles, Activité - selon le même modèle)\n\n      // Créer le lien de téléchargement\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement('a');\n      link.setAttribute('href', encodedUri);\n      link.setAttribute('download', `${fileName}.csv`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    };\n\n    // Fonction pour exporter en PDF\n    const exportToPDF = fileName => {\n      const doc = new jsPDF();\n\n      // Titre\n      doc.setFontSize(18);\n      doc.text('Rapport d\\'administration', 105, 15, {\n        align: 'center'\n      });\n      doc.setFontSize(12);\n      doc.text(new Date().toLocaleDateString('fr-FR'), 105, 22, {\n        align: 'center'\n      });\n      let yPos = 30;\n\n      // Utilisateurs\n      if (filters.includeUsers) {\n        doc.setFontSize(14);\n        doc.text('Statistiques utilisateurs', 14, yPos);\n        yPos += 10;\n\n        // Tableau par niveau\n        const userLevelData = Object.entries(reportData.value.users.byLevel).map(([level, count]) => {\n          const percentage = (count / reportData.value.users.total * 100).toFixed(1);\n          return [getNiceLevelName(level), count.toString(), `${percentage}%`];\n        });\n        doc.autoTable({\n          startY: yPos,\n          head: [['Niveau', 'Nombre', 'Pourcentage']],\n          body: userLevelData,\n          theme: 'grid',\n          headStyles: {\n            fillColor: [44, 80, 56]\n          }\n        });\n        yPos = doc.lastAutoTable.finalY + 10;\n\n        // Activité\n        const userActivityData = [['Nouveaux utilisateurs', reportData.value.users.new.toString()], ['Utilisateurs actifs', reportData.value.users.active.toString()], ['Moyenne connexions/jour', reportData.value.users.avgLoginsPerDay.toFixed(1)]];\n        doc.autoTable({\n          startY: yPos,\n          head: [['Métrique', 'Valeur']],\n          body: userActivityData,\n          theme: 'grid',\n          headStyles: {\n            fillColor: [44, 80, 56]\n          }\n        });\n        yPos = doc.lastAutoTable.finalY + 15;\n      }\n\n      // Continuer avec les autres sections...\n      // (Objets, Familles, Activité)\n\n      doc.save(`${fileName}.pdf`);\n    };\n\n    // Fonction pour exporter en JSON\n    const exportToJSON = fileName => {\n      const jsonData = JSON.stringify(reportData.value, null, 2);\n      const blob = new Blob([jsonData], {\n        type: 'application/json'\n      });\n      saveAs(blob, `${fileName}.json`);\n    };\n\n    // Fonctions utilitaires\n    const getNiceLevelName = level => {\n      const names = {\n        'débutant': 'Débutant',\n        'intermédiaire': 'Intermédiaire',\n        'avancé': 'Avancé',\n        'expert': 'Expert'\n      };\n      return names[level] || level;\n    };\n    const formatActionName = action => {\n      const actions = {\n        'connexion': 'Connexion',\n        'deconnexion': 'Déconnexion',\n        'creation_utilisateur': 'Création d\\'utilisateur',\n        'modification_utilisateur': 'Modification d\\'utilisateur',\n        'utilisation_objet': 'Utilisation d\\'objet',\n        'ajout_points': 'Ajout de points',\n        'creation_recette': 'Création de recette',\n        'autre': 'Autre action'\n      };\n      return actions[action] || action;\n    };\n    return {\n      filters,\n      isGenerating,\n      reportData,\n      generateReport,\n      exportReport,\n      getNiceLevelName,\n      formatActionName\n    };\n  }\n};","map":{"version":3,"names":["AppLayout","ref","reactive","api","saveAs","jsPDF","name","components","setup","filters","period","includeUsers","includeObjects","includeFamilies","includeActivity","exportFormat","isGenerating","reportData","generateReport","value","token","localStorage","getItem","Error","defaults","headers","common","params","response","get","users","total","data","usersCount","byLevel","usersByLevel","new","newUsers","active","activeUsers","avgLoginsPerDay","objects","objectsCount","byType","objectsByType","totalUsage","totalObjectsUsage","avgUsagePerDay","avgObjectsUsagePerDay","mostUsed","mostUsedObject","families","familiesCount","avgSize","avgFamilySize","withPoints","familiesWithPoints","totalPoints","avgPointsPerFamily","recentPoints","recentPointsDistributed","activity","actionsCount","actionsByType","byTime","actionsByTime","error","console","alert","exportReport","format","timestamp","Date","toISOString","slice","fileName","exportToCSV","exportToPDF","exportToJSON","csvContent","toLocaleDateString","Object","entries","forEach","level","count","percentage","toFixed","getNiceLevelName","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","removeChild","doc","setFontSize","text","align","yPos","userLevelData","map","toString","autoTable","startY","head","theme","headStyles","fillColor","lastAutoTable","finalY","userActivityData","save","jsonData","JSON","stringify","blob","Blob","type","names","formatActionName","action","actions"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\AdminReports.vue"],"sourcesContent":["<template>\r\n  <AppLayout>\r\n    <div class=\"reports-container\">\r\n      <div class=\"header\">\r\n        <h1><i class=\"fas fa-chart-bar\"></i> Rapports d'administration</h1>\r\n        <p>Générez et exportez des rapports détaillés sur l'utilisation de la plateforme.</p>\r\n      </div>\r\n\r\n      <div class=\"filters-card\">\r\n        <h2>Filtres et options</h2>\r\n        <div class=\"filters-grid\">\r\n          <div class=\"filter-group\">\r\n            <label>Période</label>\r\n            <select v-model=\"filters.period\">\r\n              <option value=\"7\">7 derniers jours</option>\r\n              <option value=\"30\">30 derniers jours</option>\r\n              <option value=\"90\">90 derniers jours</option>\r\n              <option value=\"365\">12 derniers mois</option>\r\n              <option value=\"all\">Tout l'historique</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"filter-group\">\r\n            <label>Type de données</label>\r\n            <div class=\"checkbox-group\">\r\n              <label>\r\n                <input type=\"checkbox\" v-model=\"filters.includeUsers\"> Utilisateurs\r\n              </label>\r\n              <label>\r\n                <input type=\"checkbox\" v-model=\"filters.includeObjects\"> Objets connectés\r\n              </label>\r\n              <label>\r\n                <input type=\"checkbox\" v-model=\"filters.includeFamilies\"> Familles\r\n              </label>\r\n              <label>\r\n                <input type=\"checkbox\" v-model=\"filters.includeActivity\"> Activités\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class=\"filter-group\">\r\n            <label>Format d'exportation</label>\r\n            <select v-model=\"filters.exportFormat\">\r\n              <option value=\"csv\">CSV</option>\r\n              <option value=\"pdf\">PDF</option>\r\n              <option value=\"json\">JSON</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"button-row\">\r\n          <button @click=\"generateReport\" class=\"generate-btn\" :disabled=\"isGenerating\">\r\n            <i class=\"fas fa-file-export\"></i> \r\n            {{ isGenerating ? 'Génération en cours...' : 'Générer le rapport' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Aperçu du rapport -->\r\n      <div v-if=\"isGenerating\" class=\"loading-container\">\r\n        <div class=\"spinner\"></div>\r\n        <p>Génération du rapport en cours...</p>\r\n      </div>\r\n      <div v-else-if=\"reportData\" class=\"report-preview\">\r\n        <div class=\"preview-header\">\r\n          <h2>Aperçu du rapport</h2>\r\n          <div class=\"export-actions\">\r\n            <button @click=\"exportReport('csv')\" class=\"export-btn\">\r\n              <i class=\"fas fa-file-csv\"></i> Exporter en CSV\r\n            </button>\r\n            <button @click=\"exportReport('pdf')\" class=\"export-btn\">\r\n              <i class=\"fas fa-file-pdf\"></i> Exporter en PDF\r\n            </button>\r\n            <button @click=\"exportReport('json')\" class=\"export-btn\">\r\n              <i class=\"fas fa-file-code\"></i> Exporter en JSON\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Section Utilisateurs -->\r\n        <div v-if=\"filters.includeUsers\" class=\"report-section\">\r\n          <h3>Statistiques des Utilisateurs</h3>\r\n          <div class=\"report-grid\">\r\n            <div class=\"report-item\">\r\n              <h4>Répartition par niveau</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Niveau</th>\r\n                    <th>Nombre</th>\r\n                    <th>Pourcentage</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(count, level) in reportData.users.byLevel\" :key=\"level\">\r\n                    <td>{{ getNiceLevelName(level) }}</td>\r\n                    <td>{{ count }}</td>\r\n                    <td>{{ ((count / reportData.users.total) * 100).toFixed(1) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"report-item\">\r\n              <h4>Activité des utilisateurs</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Métrique</th>\r\n                    <th>Valeur</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Nouveaux utilisateurs</td>\r\n                    <td>{{ reportData.users.new }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Utilisateurs actifs</td>\r\n                    <td>{{ reportData.users.active }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Moyenne de connexions par jour</td>\r\n                    <td>{{ reportData.users.avgLoginsPerDay.toFixed(1) }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Section Objets -->\r\n        <div v-if=\"filters.includeObjects\" class=\"report-section\">\r\n          <h3>Statistiques des Objets Connectés</h3>\r\n          <div class=\"report-grid\">\r\n            <div class=\"report-item\">\r\n              <h4>Objets par type</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Type</th>\r\n                    <th>Nombre</th>\r\n                    <th>Pourcentage</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(count, type) in reportData.objects.byType\" :key=\"type\">\r\n                    <td>{{ type }}</td>\r\n                    <td>{{ count }}</td>\r\n                    <td>{{ ((count / reportData.objects.total) * 100).toFixed(1) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"report-item\">\r\n              <h4>Utilisation des objets</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Métrique</th>\r\n                    <th>Valeur</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Total des utilisations</td>\r\n                    <td>{{ reportData.objects.totalUsage }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Moyenne par jour</td>\r\n                    <td>{{ reportData.objects.avgUsagePerDay.toFixed(1) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Objet le plus utilisé</td>\r\n                    <td>{{ reportData.objects.mostUsed }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Section Familles -->\r\n        <div v-if=\"filters.includeFamilies\" class=\"report-section\">\r\n          <h3>Statistiques des Familles</h3>\r\n          <div class=\"report-grid\">\r\n            <div class=\"report-item\">\r\n              <h4>Informations générales</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Métrique</th>\r\n                    <th>Valeur</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Nombre total de familles</td>\r\n                    <td>{{ reportData.families.total }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Taille moyenne (membres)</td>\r\n                    <td>{{ reportData.families.avgSize.toFixed(1) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Familles avec points</td>\r\n                    <td>{{ reportData.families.withPoints }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"report-item\">\r\n              <h4>Distribution des points</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Métrique</th>\r\n                    <th>Valeur</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Total des points</td>\r\n                    <td>{{ reportData.families.totalPoints }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Moyenne par famille</td>\r\n                    <td>{{ reportData.families.avgPointsPerFamily.toFixed(1) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Points distribués récemment</td>\r\n                    <td>{{ reportData.families.recentPoints }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Section Activité -->\r\n        <div v-if=\"filters.includeActivity\" class=\"report-section\">\r\n          <h3>Statistiques d'Activité</h3>\r\n          <div class=\"report-grid\">\r\n            <div class=\"report-item\">\r\n              <h4>Répartition par type d'action</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Type d'action</th>\r\n                    <th>Nombre</th>\r\n                    <th>Pourcentage</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(count, action) in reportData.activity.byType\" :key=\"action\">\r\n                    <td>{{ formatActionName(action) }}</td>\r\n                    <td>{{ count }}</td>\r\n                    <td>{{ ((count / reportData.activity.total) * 100).toFixed(1) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"report-item\">\r\n              <h4>Répartition temporelle</h4>\r\n              <table class=\"report-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Période</th>\r\n                    <th>Nombre d'actions</th>\r\n                    <th>Pourcentage</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(count, period) in reportData.activity.byTime\" :key=\"period\">\r\n                    <td>{{ period }}</td>\r\n                    <td>{{ count }}</td>\r\n                    <td>{{ ((count / reportData.activity.total) * 100).toFixed(1) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<script>\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\r\nimport { ref, reactive } from 'vue';\r\nimport api from '@/services/api';\r\nimport { saveAs } from 'file-saver';\r\nimport { jsPDF } from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nexport default {\r\n  name: 'AdminReportsPage',\r\n  components: {\r\n    AppLayout\r\n  },\r\n  setup() {\r\n    const filters = reactive({\r\n      period: '30',\r\n      includeUsers: true,\r\n      includeObjects: true,\r\n      includeFamilies: true,\r\n      includeActivity: true,\r\n      exportFormat: 'csv'\r\n    });\r\n\r\n    const isGenerating = ref(false);\r\n    const reportData = ref(null);\r\n\r\n    // Fonction pour générer le rapport\r\n    const generateReport = async () => {\r\n      try {\r\n        isGenerating.value = true;\r\n        \r\n        // Récupérer le token d'authentification\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n          throw new Error('Non authentifié');\r\n        }\r\n        \r\n        // Configurer l'en-tête d'authentification\r\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n        \r\n        // Appel API pour récupérer les données pour le rapport\r\n        const params = { period: filters.period };\r\n        const response = await api.get('/api/history/admin-report', { params });\r\n        \r\n        // Traitement des données (simulé ici)\r\n        // En pratique, on utiliserait les données réelles de l'API\r\n        reportData.value = {\r\n          users: {\r\n            total: response.data.usersCount || 5,\r\n            byLevel: response.data.usersByLevel || {\r\n              'débutant': 2,\r\n              'intermédiaire': 0,\r\n              'avancé': 1,\r\n              'expert': 2\r\n            },\r\n            new: response.data.newUsers || 1,\r\n            active: response.data.activeUsers || 4,\r\n            avgLoginsPerDay: response.data.avgLoginsPerDay || 3.5\r\n          },\r\n          objects: {\r\n            total: response.data.objectsCount || 8,\r\n            byType: response.data.objectsByType || {\r\n              'Four': 2,\r\n              'Réfrigérateur': 1,\r\n              'Robot': 2,\r\n              'Micro-ondes': 1,\r\n              'Mixeur': 2\r\n            },\r\n            totalUsage: response.data.totalObjectsUsage || 124,\r\n            avgUsagePerDay: response.data.avgObjectsUsagePerDay || 12.4,\r\n            mostUsed: response.data.mostUsedObject || 'Four principal'\r\n          },\r\n          families: {\r\n            total: response.data.familiesCount || 3,\r\n            avgSize: response.data.avgFamilySize || 2.7,\r\n            withPoints: response.data.familiesWithPoints || 2,\r\n            totalPoints: response.data.totalPoints || 350,\r\n            avgPointsPerFamily: response.data.avgPointsPerFamily || 116.7,\r\n            recentPoints: response.data.recentPointsDistributed || 50\r\n          },\r\n          activity: {\r\n            total: response.data.actionsCount || 250,\r\n            byType: response.data.actionsByType || {\r\n              'connexion': 45,\r\n              'utilisation_objet': 124,\r\n              'ajout_points': 15,\r\n              'creation_recette': 8,\r\n              'modification_utilisateur': 12,\r\n              'autre': 46\r\n            },\r\n            byTime: response.data.actionsByTime || {\r\n              'Matin (00h-08h)': 25,\r\n              'Journée (08h-16h)': 120,\r\n              'Soir (16h-00h)': 105\r\n            }\r\n          }\r\n        };\r\n      } catch (error) {\r\n        console.error('Erreur lors de la génération du rapport:', error);\r\n        alert('Erreur lors de la génération du rapport. Veuillez réessayer.');\r\n      } finally {\r\n        isGenerating.value = false;\r\n      }\r\n    };\r\n\r\n    // Fonction pour exporter le rapport\r\n    const exportReport = (format) => {\r\n      if (!reportData.value) return;\r\n\r\n      try {\r\n        const timestamp = new Date().toISOString().slice(0, 10);\r\n        const fileName = `rapport_admin_${timestamp}`;\r\n\r\n        if (format === 'csv') {\r\n          exportToCSV(fileName);\r\n        } else if (format === 'pdf') {\r\n          exportToPDF(fileName);\r\n        } else if (format === 'json') {\r\n          exportToJSON(fileName);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur lors de l\\'exportation du rapport:', error);\r\n        alert('Erreur lors de l\\'exportation du rapport. Veuillez réessayer.');\r\n      }\r\n    };\r\n\r\n    // Fonction pour exporter en CSV\r\n    const exportToCSV = (fileName) => {\r\n      let csvContent = 'data:text/csv;charset=utf-8,';\r\n      \r\n      // En-tête du CSV\r\n      csvContent += 'Rapport d\\'administration - ' + new Date().toLocaleDateString('fr-FR') + '\\r\\n\\r\\n';\r\n      \r\n      // Ajouter les données selon les sections incluses\r\n      if (filters.includeUsers) {\r\n        csvContent += 'STATISTIQUES UTILISATEURS\\r\\n';\r\n        csvContent += 'Niveau,Nombre,Pourcentage\\r\\n';\r\n        \r\n        Object.entries(reportData.value.users.byLevel).forEach(([level, count]) => {\r\n          const percentage = ((count / reportData.value.users.total) * 100).toFixed(1);\r\n          csvContent += `${getNiceLevelName(level)},${count},${percentage}%\\r\\n`;\r\n        });\r\n        \r\n        csvContent += '\\r\\nActivité utilisateurs\\r\\n';\r\n        csvContent += `Nouveaux utilisateurs,${reportData.value.users.new}\\r\\n`;\r\n        csvContent += `Utilisateurs actifs,${reportData.value.users.active}\\r\\n`;\r\n        csvContent += `Moyenne de connexions par jour,${reportData.value.users.avgLoginsPerDay.toFixed(1)}\\r\\n\\r\\n`;\r\n      }\r\n      \r\n      // Continuer avec les autres sections...\r\n      // (Objets, Familles, Activité - selon le même modèle)\r\n      \r\n      // Créer le lien de téléchargement\r\n      const encodedUri = encodeURI(csvContent);\r\n      const link = document.createElement('a');\r\n      link.setAttribute('href', encodedUri);\r\n      link.setAttribute('download', `${fileName}.csv`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    };\r\n\r\n    // Fonction pour exporter en PDF\r\n    const exportToPDF = (fileName) => {\r\n      const doc = new jsPDF();\r\n      \r\n      // Titre\r\n      doc.setFontSize(18);\r\n      doc.text('Rapport d\\'administration', 105, 15, { align: 'center' });\r\n      doc.setFontSize(12);\r\n      doc.text(new Date().toLocaleDateString('fr-FR'), 105, 22, { align: 'center' });\r\n      \r\n      let yPos = 30;\r\n      \r\n      // Utilisateurs\r\n      if (filters.includeUsers) {\r\n        doc.setFontSize(14);\r\n        doc.text('Statistiques utilisateurs', 14, yPos);\r\n        yPos += 10;\r\n        \r\n        // Tableau par niveau\r\n        const userLevelData = Object.entries(reportData.value.users.byLevel).map(([level, count]) => {\r\n          const percentage = ((count / reportData.value.users.total) * 100).toFixed(1);\r\n          return [getNiceLevelName(level), count.toString(), `${percentage}%`];\r\n        });\r\n        \r\n        doc.autoTable({\r\n          startY: yPos,\r\n          head: [['Niveau', 'Nombre', 'Pourcentage']],\r\n          body: userLevelData,\r\n          theme: 'grid',\r\n          headStyles: { fillColor: [44, 80, 56] }\r\n        });\r\n        \r\n        yPos = doc.lastAutoTable.finalY + 10;\r\n        \r\n        // Activité\r\n        const userActivityData = [\r\n          ['Nouveaux utilisateurs', reportData.value.users.new.toString()],\r\n          ['Utilisateurs actifs', reportData.value.users.active.toString()],\r\n          ['Moyenne connexions/jour', reportData.value.users.avgLoginsPerDay.toFixed(1)]\r\n        ];\r\n        \r\n        doc.autoTable({\r\n          startY: yPos,\r\n          head: [['Métrique', 'Valeur']],\r\n          body: userActivityData,\r\n          theme: 'grid',\r\n          headStyles: { fillColor: [44, 80, 56] }\r\n        });\r\n        \r\n        yPos = doc.lastAutoTable.finalY + 15;\r\n      }\r\n      \r\n      // Continuer avec les autres sections...\r\n      // (Objets, Familles, Activité)\r\n      \r\n      doc.save(`${fileName}.pdf`);\r\n    };\r\n\r\n    // Fonction pour exporter en JSON\r\n    const exportToJSON = (fileName) => {\r\n      const jsonData = JSON.stringify(reportData.value, null, 2);\r\n      const blob = new Blob([jsonData], { type: 'application/json' });\r\n      saveAs(blob, `${fileName}.json`);\r\n    };\r\n\r\n    // Fonctions utilitaires\r\n    const getNiceLevelName = (level) => {\r\n      const names = {\r\n        'débutant': 'Débutant',\r\n        'intermédiaire': 'Intermédiaire',\r\n        'avancé': 'Avancé',\r\n        'expert': 'Expert'\r\n      };\r\n      return names[level] || level;\r\n    };\r\n\r\n    const formatActionName = (action) => {\r\n      const actions = {\r\n        'connexion': 'Connexion',\r\n        'deconnexion': 'Déconnexion',\r\n        'creation_utilisateur': 'Création d\\'utilisateur',\r\n        'modification_utilisateur': 'Modification d\\'utilisateur',\r\n        'utilisation_objet': 'Utilisation d\\'objet',\r\n        'ajout_points': 'Ajout de points',\r\n        'creation_recette': 'Création de recette',\r\n        'autre': 'Autre action'\r\n      };\r\n      return actions[action] || action;\r\n    };\r\n\r\n    return {\r\n      filters,\r\n      isGenerating,\r\n      reportData,\r\n      generateReport,\r\n      exportReport,\r\n      getNiceLevelName,\r\n      formatActionName\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.reports-container {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header h1 {\r\n  color: #2c5038;\r\n  margin-bottom: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.header p {\r\n  color: #666;\r\n  font-size: 1rem;\r\n}\r\n\r\n.filters-card {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filters-card h2 {\r\n  color: #2c5038;\r\n  margin-bottom: 15px;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.filters-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filter-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.filter-group label {\r\n  font-weight: 500;\r\n  margin-bottom: 8px;\r\n  color: #333;\r\n}\r\n\r\n.filter-group select {\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.checkbox-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.checkbox-group label {\r\n  font-weight: normal;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.button-row {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.generate-btn {\r\n  background-color: #2c5038;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 1rem;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.generate-btn:hover {\r\n  background-color: #1d3725;\r\n}\r\n\r\n.generate-btn:disabled {\r\n  background-color: #8ca596;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-container {\r\n  text-align: center;\r\n  padding: 40px;\r\n}\r\n\r\n.spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid #2c5038;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 20px;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.report-preview {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.preview-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n}\r\n\r\n.preview-header h2 {\r\n  color: #2c5038;\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.export-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.export-btn {\r\n  background-color: #f0f0f0;\r\n  color: #333;\r\n  padding: 8px 15px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 0.9rem;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.export-btn:hover {\r\n  background-color: #e0e0e0;\r\n}\r\n\r\n.report-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.report-section h3 {\r\n  color: #2c5038;\r\n  margin-bottom: 15px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.report-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.report-item {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.report-item h4 {\r\n  color: #333;\r\n  margin-bottom: 10px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.report-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.report-table th, \r\n.report-table td {\r\n  padding: 8px 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.report-table th {\r\n  background-color: #f8f9fa;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.report-table tr:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .report-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .preview-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .filters-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}