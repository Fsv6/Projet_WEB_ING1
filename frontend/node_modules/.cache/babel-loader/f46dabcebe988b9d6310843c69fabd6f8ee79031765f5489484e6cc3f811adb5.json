{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"recettes-page\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"btn-new-container\"\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"disabled\", \"title\", \"onClick\"];\nconst _hoisted_6 = {\n  key: 2\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"blur\"\n};\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"AppLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h1\", null, \"Recettes √† tester dans votre cuisine connect√©e\", -1 /* HOISTED */)), _createCommentVNode(\" Bouton pour ajouter une recette \"), !$setup.isVisiteur && $setup.isIntermediaireOrMore ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n      onClick: $setup.goToNew,\n      class: \"btn-new\"\n    }, \"‚ûï Nouvelle recette\")])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Recettes personnelles \"), $setup.recettesPerso.length ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_3, \"üìå Vos recettes\")) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recettesPerso, recette => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"recette-card\",\n        key: recette._id\n      }, [_createElementVNode(\"h3\", null, _toDisplayString(recette.titre), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(recette.description), 1 /* TEXT */), _createElementVNode(\"button\", {\n        onClick: $event => $setup.goToDetails(recette._id),\n        class: \"btn-view\"\n      }, \"üëÄ Consulter\", 8 /* PROPS */, _hoisted_4), _createElementVNode(\"button\", {\n        class: \"btn-edit\",\n        disabled: !$setup.peutModifier(recette),\n        title: !$setup.peutModifier(recette) ? 'Tu n‚Äôas pas les droits pour modifier cette recette' : 'Modifier la recette',\n        onClick: $event => $setup.goToEdit(recette._id)\n      }, \" ‚úèÔ∏è Modifier \", 8 /* PROPS */, _hoisted_5)]);\n    }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Autres recettes \"), $setup.autresRecettes.length ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_6, \"üçΩÔ∏è Autres recettes\")) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.autresRecettes, recette => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"recette-card\",\n        key: recette._id\n      }, [_createElementVNode(\"h3\", null, _toDisplayString(recette.titre), 1 /* TEXT */), !$setup.isVisiteur ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, _toDisplayString(recette.description), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"Contenu r√©serv√© aux utilisateurs inscrits\")), !$setup.isVisiteur ? (_openBlock(), _createElementBlock(\"button\", {\n        key: 2,\n        class: \"btn-view\",\n        onClick: $event => $setup.goToDetails(recette._id)\n      }, \" üëÄ Consulter \", 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true)]);\n    }), 128 /* KEYED_FRAGMENT */))])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","$setup","default","_withCtx","_createElementVNode","_hoisted_1","_createCommentVNode","isVisiteur","isIntermediaireOrMore","_createElementBlock","_hoisted_2","onClick","goToNew","recettesPerso","length","_hoisted_3","_Fragment","_renderList","recette","_id","_toDisplayString","titre","description","$event","goToDetails","_hoisted_4","disabled","peutModifier","title","goToEdit","_hoisted_5","autresRecettes","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\RecettesView.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useRecettesStore } from '@/stores/recettesStore'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue'\r\n\r\nconst recettesStore = useRecettesStore()\r\nconst auth = useAuthStore()\r\nconst router = useRouter()\r\n\r\nconst isVisiteur = computed(() => auth.role === 'visiteur')\r\nconst isIntermediaireOrMore = computed(() => {\r\n  const niveaux = ['d√©butant', 'interm√©diaire', 'avanc√©', 'expert']\r\n  return niveaux.indexOf(auth.niveau) >= 1\r\n})\r\n\r\nconst recettesPerso = computed(() =>\r\n    recettesStore.recettes.filter(r => r.auteur === auth.userId)\r\n)\r\n\r\nconst autresRecettes = computed(() =>\r\n    recettesStore.recettes.filter(r => r.auteur !== auth.userId)\r\n)\r\n\r\nconst peutModifier = (recette) =>\r\n    auth.userId === recette.auteur && isIntermediaireOrMore.value\r\n\r\nconst goToDetails = (id) => {\r\n  router.push(`/recettes/${id}`)\r\n}\r\n\r\nconst goToEdit = (id) => {\r\n  router.push(`/recettes/${id}/edit`)\r\n}\r\n\r\nconst goToNew = () => {\r\n  router.push('/recettes/new')\r\n}\r\n\r\nonMounted(() => {\r\n  recettesStore.fetchRecettes()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <AppLayout>\r\n    <div class=\"recettes-page\">\r\n      <h1>Recettes √† tester dans votre cuisine connect√©e</h1>\r\n\r\n      <!-- Bouton pour ajouter une recette -->\r\n      <div v-if=\"!isVisiteur && isIntermediaireOrMore\" class=\"btn-new-container\">\r\n        <button @click=\"goToNew\" class=\"btn-new\">‚ûï Nouvelle recette</button>\r\n      </div>\r\n\r\n      <!-- Recettes personnelles -->\r\n      <h2 v-if=\"recettesPerso.length\">üìå Vos recettes</h2>\r\n      <div\r\n          class=\"recette-card\"\r\n          v-for=\"recette in recettesPerso\"\r\n          :key=\"recette._id\"\r\n      >\r\n        <h3>{{ recette.titre }}</h3>\r\n        <p>{{ recette.description }}</p>\r\n        <button @click=\"goToDetails(recette._id)\" class=\"btn-view\">üëÄ Consulter</button>\r\n\r\n        <button\r\n            class=\"btn-edit\"\r\n            :disabled=\"!peutModifier(recette)\"\r\n            :title=\"!peutModifier(recette) ? 'Tu n‚Äôas pas les droits pour modifier cette recette' : 'Modifier la recette'\"\r\n            @click=\"goToEdit(recette._id)\"\r\n        >\r\n          ‚úèÔ∏è Modifier\r\n        </button>\r\n      </div>\r\n\r\n\r\n      <!-- Autres recettes -->\r\n      <h2 v-if=\"autresRecettes.length\">üçΩÔ∏è Autres recettes</h2>\r\n      <div\r\n          class=\"recette-card\"\r\n          v-for=\"recette in autresRecettes\"\r\n          :key=\"recette._id\"\r\n      >\r\n        <h3>{{ recette.titre }}</h3>\r\n        <p v-if=\"!isVisiteur\">{{ recette.description }}</p>\r\n        <p v-else class=\"blur\">Contenu r√©serv√© aux utilisateurs inscrits</p>\r\n        <button\r\n            v-if=\"!isVisiteur\"\r\n            class=\"btn-view\"\r\n            @click=\"goToDetails(recette._id)\"\r\n        >\r\n          üëÄ Consulter\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<style scoped>\r\n.recettes-page {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.recette-card {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 10px;\r\n  margin-bottom: 1.5rem;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.btn-view, .btn-new, .btn-edit {\r\n  background-color: #007bff;\r\n  color: white;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n  margin-right: 8px;\r\n  font-weight: bold;\r\n}\r\n\r\n.btn-edit {\r\n  background-color: #f0ad4e;\r\n}\r\n\r\n.btn-new-container {\r\n  text-align: right;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.blur {\r\n  filter: blur(4px);\r\n  color: #888;\r\n}\r\n\r\n.blocked-msg {\r\n  font-size: 0.8rem;\r\n  color: #888;\r\n  text-align: center;\r\n  margin-top: 5px;\r\n}\r\n</style>\r\n"],"mappings":";;EA+CSA,KAAK,EAAC;AAAe;;EA/C9BC,GAAA;EAmDuDD,KAAK,EAAC;;;EAnD7DC,GAAA;AAAA;mBAAA;mBAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;EAsFkBD,KAAK,EAAC;;mBAtFxB;;uBA8CEE,YAAA,CAkDYC,MAAA;IAhGdC,OAAA,EAAAC,QAAA,CA+CI,MAgDM,CAhDNC,mBAAA,CAgDM,OAhDNC,UAgDM,G,0BA/CJD,mBAAA,CAAuD,YAAnD,gDAA8C,sBAElDE,mBAAA,qCAAwC,E,CAC5BL,MAAA,CAAAM,UAAU,IAAIN,MAAA,CAAAO,qBAAqB,I,cAA/CC,mBAAA,CAEM,OAFNC,UAEM,GADJN,mBAAA,CAAoE;MAA3DO,OAAK,EAAEV,MAAA,CAAAW,OAAO;MAAEd,KAAK,EAAC;OAAU,oBAAkB,E,KApDnEQ,mBAAA,gBAuDMA,mBAAA,2BAA8B,EACpBL,MAAA,CAAAY,aAAa,CAACC,MAAM,I,cAA9BL,mBAAA,CAAoD,MAxD1DM,UAAA,EAwDsC,iBAAe,KAxDrDT,mBAAA,iB,kBAyDMG,mBAAA,CAiBMO,SAAA,QA1EZC,WAAA,CA2D4BhB,MAAA,CAAAY,aAAa,EAAxBK,OAAO;2BAFlBT,mBAAA,CAiBM;QAhBFX,KAAK,EAAC,cAAc;QAEnBC,GAAG,EAAEmB,OAAO,CAACC;UAEhBf,mBAAA,CAA4B,YAAAgB,gBAAA,CAArBF,OAAO,CAACG,KAAK,kBACpBjB,mBAAA,CAAgC,WAAAgB,gBAAA,CAA1BF,OAAO,CAACI,WAAW,kBACzBlB,mBAAA,CAAgF;QAAvEO,OAAK,EAAAY,MAAA,IAAEtB,MAAA,CAAAuB,WAAW,CAACN,OAAO,CAACC,GAAG;QAAGrB,KAAK,EAAC;SAAW,cAAY,iBAhE/E2B,UAAA,GAkEQrB,mBAAA,CAOS;QANLN,KAAK,EAAC,UAAU;QACf4B,QAAQ,GAAGzB,MAAA,CAAA0B,YAAY,CAACT,OAAO;QAC/BU,KAAK,GAAG3B,MAAA,CAAA0B,YAAY,CAACT,OAAO;QAC5BP,OAAK,EAAAY,MAAA,IAAEtB,MAAA,CAAA4B,QAAQ,CAACX,OAAO,CAACC,GAAG;SAC/B,eAED,iBAzERW,UAAA,E;oCA6EMxB,mBAAA,qBAAwB,EACdL,MAAA,CAAA8B,cAAc,CAACjB,MAAM,I,cAA/BL,mBAAA,CAAyD,MA9E/DuB,UAAA,EA8EuC,qBAAmB,KA9E1D1B,mBAAA,iB,kBA+EMG,mBAAA,CAeMO,SAAA,QA9FZC,WAAA,CAiF4BhB,MAAA,CAAA8B,cAAc,EAAzBb,OAAO;2BAFlBT,mBAAA,CAeM;QAdFX,KAAK,EAAC,cAAc;QAEnBC,GAAG,EAAEmB,OAAO,CAACC;UAEhBf,mBAAA,CAA4B,YAAAgB,gBAAA,CAArBF,OAAO,CAACG,KAAK,kB,CACVpB,MAAA,CAAAM,UAAU,I,cAApBE,mBAAA,CAAmD,KArF3DwB,UAAA,EAAAb,gBAAA,CAqFiCF,OAAO,CAACI,WAAW,qB,cAC5Cb,mBAAA,CAAoE,KAApEyB,UAAoE,EAA7C,2CAAyC,I,CAErDjC,MAAA,CAAAM,UAAU,I,cADrBE,mBAAA,CAMS;QA7FjBV,GAAA;QAyFYD,KAAK,EAAC,UAAU;QACfa,OAAK,EAAAY,MAAA,IAAEtB,MAAA,CAAAuB,WAAW,CAACN,OAAO,CAACC,GAAG;SAClC,gBAED,iBA7FRgB,UAAA,KAAA7B,mBAAA,e;;IAAA8B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}