{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"history-container\"\n};\nconst _hoisted_2 = {\n  class: \"filters-container\"\n};\nconst _hoisted_3 = {\n  class: \"search-box\"\n};\nconst _hoisted_4 = {\n  class: \"family-filter\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  key: 0,\n  class: \"no-results\"\n};\nconst _hoisted_7 = {\n  class: \"users-container\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  class: \"user-info\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"user-details\"\n};\nconst _hoisted_12 = {\n  class: \"action-count\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"categories-container\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  class: \"category-info\"\n};\nconst _hoisted_16 = {\n  class: \"category-details\"\n};\nconst _hoisted_17 = {\n  class: \"category-count\"\n};\nconst _hoisted_18 = {\n  class: \"category-meta\"\n};\nconst _hoisted_19 = {\n  class: \"last-update-date\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"timeline-container\"\n};\nconst _hoisted_21 = {\n  class: \"timeline\"\n};\nconst _hoisted_22 = {\n  class: \"timeline-content\"\n};\nconst _hoisted_23 = {\n  class: \"action-header\"\n};\nconst _hoisted_24 = {\n  class: \"action-date\"\n};\nconst _hoisted_25 = {\n  key: 0,\n  class: \"action-details\"\n};\nconst _hoisted_26 = {\n  class: \"detail-label\"\n};\nconst _hoisted_27 = {\n  class: \"detail-value\"\n};\nconst _hoisted_28 = {\n  class: \"action-meta\"\n};\nconst _hoisted_29 = {\n  key: 0,\n  class: \"meta-item\"\n};\nconst _hoisted_30 = {\n  key: 1,\n  class: \"meta-item\"\n};\nconst _hoisted_31 = {\n  key: 1,\n  class: \"pagination\"\n};\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = {\n  class: \"page-info\"\n};\nconst _hoisted_34 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppLayout = _resolveComponent(\"AppLayout\");\n  return _openBlock(), _createBlock(_component_AppLayout, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[16] || (_cache[16] = _createElementVNode(\"h1\", {\n      class: \"page-title\"\n    }, \"Historique des actions\", -1 /* HOISTED */)), _createCommentVNode(\" Filtres et recherche \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchTerm = $event),\n      placeholder: \"Rechercher...\",\n      onInput: _cache[1] || (_cache[1] = (...args) => $setup.debounceSearch && $setup.debounceSearch(...args))\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.searchTerm]]), _cache[6] || (_cache[6] = _createElementVNode(\"i\", {\n      class: \"fas fa-search search-icon\"\n    }, null, -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n      for: \"family-select\"\n    }, \"Famille:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n      id: \"family-select\",\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.selectedFamilleId = $event),\n      onChange: _cache[3] || (_cache[3] = $event => $setup.debounceSearch())\n    }, [_cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n      value: \"\"\n    }, \"Toutes les familles\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.familles, famille => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: famille._id,\n        value: famille._id\n      }, _toDisplayString(famille.codeFamille || famille._id), 9 /* TEXT, PROPS */, _hoisted_5);\n    }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedFamilleId]])])]), _createCommentVNode(\" Affichage du message si aucun résultat \"), $setup.logs.length === 0 && !$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[9] || (_cache[9] = [_createElementVNode(\"p\", null, \"Aucun résultat ne correspond à votre recherche\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Liste des utilisateurs \"), _createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.displayedUsers, (userHistory, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: \"user-card\"\n      }, [_createElementVNode(\"div\", {\n        class: \"user-header\",\n        onClick: $event => $setup.toggleUser(userHistory.user.email)\n      }, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"img\", {\n        src: $setup.getPhotoUrl(userHistory.user.photo, userHistory.user._id),\n        class: \"user-avatar\",\n        alt: \"Avatar\"\n      }, null, 8 /* PROPS */, _hoisted_10), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h3\", null, _toDisplayString(userHistory.user.email), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_12, _toDisplayString($setup.getActionsToday(userHistory.user.email)) + \" action(s) aujourd'hui \", 1 /* TEXT */)])]), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"expand-button\", {\n          'expanded': $setup.expandedUsers.includes(userHistory.user.email)\n        }])\n      }, [...(_cache[10] || (_cache[10] = [_createElementVNode(\"i\", {\n        class: \"fas fa-chevron-down\"\n      }, null, -1 /* HOISTED */)]))], 2 /* CLASS */)], 8 /* PROPS */, _hoisted_8), _createCommentVNode(\" Catégories d'actions de l'utilisateur \"), $setup.expandedUsers.includes(userHistory.user.email) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(userHistory.categories, (actions, category) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: category,\n          class: \"category-section\"\n        }, [_createElementVNode(\"div\", {\n          class: \"category-header\",\n          onClick: $event => $setup.toggleCategory(userHistory.user.email, category)\n        }, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"span\", {\n          class: _normalizeClass(['category-icon', $setup.getActionClass(category)])\n        }, [_createElementVNode(\"i\", {\n          class: _normalizeClass($setup.getCategoryIcon(category))\n        }, null, 2 /* CLASS */)], 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"h4\", null, _toDisplayString($setup.formatAction(category)), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_17, _toDisplayString(actions.length) + \" action(s)\", 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"span\", _hoisted_19, \"Dernière action: \" + _toDisplayString($setup.formatDate(actions[0].date)), 1 /* TEXT */), _createElementVNode(\"div\", {\n          class: _normalizeClass([\"expand-button\", {\n            'expanded': $setup.isExpandedCategory(userHistory.user.email, category)\n          }])\n        }, [...(_cache[11] || (_cache[11] = [_createElementVNode(\"i\", {\n          class: \"fas fa-chevron-down\"\n        }, null, -1 /* HOISTED */)]))], 2 /* CLASS */)])], 8 /* PROPS */, _hoisted_14), _createCommentVNode(\" Timeline des actions de la catégorie \"), $setup.isExpandedCategory(userHistory.user.email, category) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(actions, action => {\n          return _openBlock(), _createElementBlock(\"div\", {\n            key: action._id,\n            class: \"timeline-item\"\n          }, [_createElementVNode(\"div\", {\n            class: _normalizeClass([\"timeline-point\", $setup.getActionClass(category)])\n          }, null, 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", _hoisted_24, _toDisplayString($setup.formatDate(action.date)), 1 /* TEXT */)]), action.details ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(action.details, (value, key) => {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: key,\n              class: \"detail-item\"\n            }, [_createElementVNode(\"span\", _hoisted_26, _toDisplayString($setup.formatDetailKey(key)) + \":\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_27, _toDisplayString(value), 1 /* TEXT */)]);\n          }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_28, [action.ip ? (_openBlock(), _createElementBlock(\"span\", _hoisted_29, [_cache[12] || (_cache[12] = _createElementVNode(\"i\", {\n            class: \"fas fa-network-wired\"\n          }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(action.ip), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), action.userAgent ? (_openBlock(), _createElementBlock(\"span\", _hoisted_30, [_cache[13] || (_cache[13] = _createElementVNode(\"i\", {\n            class: \"fas fa-laptop\"\n          }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($setup.formatUserAgent(action.userAgent)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])])]);\n        }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)]);\n      }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]);\n    }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Pagination \"), $setup.totalUserPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createElementVNode(\"button\", {\n      disabled: $setup.currentPage === 1,\n      onClick: _cache[4] || (_cache[4] = $event => $setup.changePage($setup.currentPage - 1)),\n      class: \"page-btn\"\n    }, _cache[14] || (_cache[14] = [_createElementVNode(\"i\", {\n      class: \"fas fa-chevron-left\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" Précédent \")]), 8 /* PROPS */, _hoisted_32), _createElementVNode(\"span\", _hoisted_33, \"Page \" + _toDisplayString($setup.currentPage) + \" sur \" + _toDisplayString($setup.totalUserPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n      disabled: $setup.currentPage === $setup.totalUserPages,\n      onClick: _cache[5] || (_cache[5] = $event => $setup.changePage($setup.currentPage + 1)),\n      class: \"page-btn\"\n    }, _cache[15] || (_cache[15] = [_createTextVNode(\" Suivant \"), _createElementVNode(\"i\", {\n      class: \"fas fa-chevron-right\"\n    }, null, -1 /* HOISTED */)]), 8 /* PROPS */, _hoisted_34)])) : _createCommentVNode(\"v-if\", true)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_AppLayout","default","_withCtx","_createElementVNode","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","type","_cache","$event","$setup","searchTerm","placeholder","onInput","args","debounceSearch","_hoisted_4","for","id","selectedFamilleId","onChange","value","_createElementBlock","_Fragment","_renderList","familles","famille","_id","codeFamille","_hoisted_5","logs","length","loading","_hoisted_6","_hoisted_7","displayedUsers","userHistory","index","onClick","toggleUser","user","email","_hoisted_9","src","getPhotoUrl","photo","alt","_hoisted_10","_hoisted_11","_toDisplayString","_hoisted_12","getActionsToday","_normalizeClass","expandedUsers","includes","_hoisted_8","_hoisted_13","categories","actions","category","toggleCategory","_hoisted_15","getActionClass","getCategoryIcon","_hoisted_16","formatAction","_hoisted_17","_hoisted_18","_hoisted_19","formatDate","date","isExpandedCategory","_hoisted_14","_hoisted_20","_hoisted_21","action","_hoisted_22","_hoisted_23","_hoisted_24","details","_hoisted_25","_hoisted_26","formatDetailKey","_hoisted_27","_hoisted_28","ip","_hoisted_29","_createTextVNode","userAgent","_hoisted_30","formatUserAgent","totalUserPages","_hoisted_31","disabled","currentPage","changePage","_hoisted_32","_hoisted_33","_hoisted_34","_"],"sources":["C:\\Users\\benab\\Desktop\\COURS 24_25\\S2\\WEB\\V4\\Projet_WEB_ING1\\frontend\\src\\views\\AdminHistory.vue"],"sourcesContent":["<template>\r\n  <AppLayout>\r\n    <div class=\"history-container\">\r\n      <h1 class=\"page-title\">Historique des actions</h1>\r\n\r\n      <!-- Filtres et recherche -->\r\n      <div class=\"filters-container\">\r\n        <div class=\"search-box\">\r\n          <input\r\n              type=\"text\"\r\n              v-model=\"searchTerm\"\r\n              placeholder=\"Rechercher...\"\r\n              @input=\"debounceSearch\"\r\n          />\r\n          <i class=\"fas fa-search search-icon\"></i>\r\n        </div>\r\n\r\n        <div class=\"family-filter\">\r\n          <label for=\"family-select\">Famille:</label>\r\n          <select id=\"family-select\" v-model=\"selectedFamilleId\" @change=\"debounceSearch()\">\r\n            <option value=\"\">Toutes les familles</option>\r\n            <option v-for=\"famille in familles\" :key=\"famille._id\" :value=\"famille._id\">\r\n              {{ famille.codeFamille || famille._id }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Affichage du message si aucun résultat -->\r\n      <div v-if=\"logs.length === 0 && !loading\" class=\"no-results\">\r\n        <p>Aucun résultat ne correspond à votre recherche</p>\r\n      </div>\r\n\r\n      <!-- Liste des utilisateurs -->\r\n      <div class=\"users-container\">\r\n        <div v-for=\"(userHistory, index) in displayedUsers\" :key=\"index\" class=\"user-card\">\r\n          <div class=\"user-header\" @click=\"toggleUser(userHistory.user.email)\">\r\n            <div class=\"user-info\">\r\n              <img :src=\"getPhotoUrl(userHistory.user.photo, userHistory.user._id)\" class=\"user-avatar\" alt=\"Avatar\">\r\n              <div class=\"user-details\">\r\n                <h3>{{ userHistory.user.email }}</h3>\r\n                <span class=\"action-count\">\r\n                  {{ getActionsToday(userHistory.user.email) }} action(s) aujourd'hui\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"expand-button\" :class=\"{ 'expanded': expandedUsers.includes(userHistory.user.email) }\">\r\n              <i class=\"fas fa-chevron-down\"></i>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Catégories d'actions de l'utilisateur -->\r\n          <div v-if=\"expandedUsers.includes(userHistory.user.email)\" class=\"categories-container\">\r\n            <div v-for=\"(actions, category) in userHistory.categories\" :key=\"category\" class=\"category-section\">\r\n              <div class=\"category-header\" @click=\"toggleCategory(userHistory.user.email, category)\">\r\n                <div class=\"category-info\">\r\n                  <span :class=\"['category-icon', getActionClass(category)]\">\r\n                    <i :class=\"getCategoryIcon(category)\"></i>\r\n                  </span>\r\n                  <div class=\"category-details\">\r\n                    <h4>{{ formatAction(category) }}</h4>\r\n                    <span class=\"category-count\">{{ actions.length }} action(s)</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"category-meta\">\r\n                  <span class=\"last-update-date\">Dernière action: {{ formatDate(actions[0].date) }}</span>\r\n                  <div class=\"expand-button\" :class=\"{ 'expanded': isExpandedCategory(userHistory.user.email, category) }\">\r\n                    <i class=\"fas fa-chevron-down\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Timeline des actions de la catégorie -->\r\n              <div v-if=\"isExpandedCategory(userHistory.user.email, category)\" class=\"timeline-container\">\r\n                <div class=\"timeline\">\r\n                  <div v-for=\"action in actions\" :key=\"action._id\" class=\"timeline-item\">\r\n                    <div class=\"timeline-point\" :class=\"getActionClass(category)\"></div>\r\n                    <div class=\"timeline-content\">\r\n                      <div class=\"action-header\">\r\n                        <span class=\"action-date\">{{ formatDate(action.date) }}</span>\r\n                      </div>\r\n                      <div class=\"action-details\" v-if=\"action.details\">\r\n                        <div v-for=\"(value, key) in action.details\" :key=\"key\" class=\"detail-item\">\r\n                          <span class=\"detail-label\">{{ formatDetailKey(key) }}:</span>\r\n                          <span class=\"detail-value\">{{ value }}</span>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"action-meta\">\r\n                        <span class=\"meta-item\" v-if=\"action.ip\">\r\n                          <i class=\"fas fa-network-wired\"></i> {{ action.ip }}\r\n                        </span>\r\n                        <span class=\"meta-item\" v-if=\"action.userAgent\">\r\n                          <i class=\"fas fa-laptop\"></i> {{ formatUserAgent(action.userAgent) }}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"pagination\" v-if=\"totalUserPages > 1\">\r\n        <button\r\n            :disabled=\"currentPage === 1\"\r\n            @click=\"changePage(currentPage - 1)\"\r\n            class=\"page-btn\"\r\n        >\r\n          <i class=\"fas fa-chevron-left\"></i> Précédent\r\n        </button>\r\n        <span class=\"page-info\">Page {{ currentPage }} sur {{ totalUserPages }}</span>\r\n        <button\r\n            :disabled=\"currentPage === totalUserPages\"\r\n            @click=\"changePage(currentPage + 1)\"\r\n            class=\"page-btn\"\r\n        >\r\n          Suivant <i class=\"fas fa-chevron-right\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </AppLayout>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed, watch } from 'vue';\r\nimport AppLayout from '@/layout/AppLayoutGlobal.vue';\r\nimport api from '@/services/api';\r\nimport defaultAvatar from '@/assets/default-avatar.png';\r\nimport { getPhotoUrl } from '@/utils/photo';\r\n\r\nexport default {\r\n  name: 'AdminHistory',\r\n  components: {\r\n    AppLayout\r\n  },\r\n  setup() {\r\n    const logs = ref([]);\r\n    const allUserActions = ref({}); // Stockage des actions d'aujourd'hui pour tous les utilisateurs\r\n    const currentPage = ref(1);\r\n    const totalPages = ref(1);\r\n    const loading = ref(false);\r\n    const expandedUsers = ref([]);\r\n    const expandedCategories = ref(new Map());\r\n    const searchTerm = ref('');\r\n    const selectedFamilleId = ref('');\r\n    const familles = ref([]);\r\n    const searchTimeout = ref(null);\r\n    const usersPerPage = 7; // Nombre d'utilisateurs par page\r\n\r\n    // Chargement de toutes les actions d'aujourd'hui pour référence\r\n    const loadAllTodayActions = async () => {\r\n      try {\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n\r\n        const response = await api.get('/history?limit=1000'); // Demander un grand nombre pour avoir toutes les actions\r\n        const allLogs = response.data.histories || [];\r\n\r\n        // Compter les actions d'aujourd'hui par utilisateur\r\n        const actionsByUser = {};\r\n\r\n        allLogs.forEach(log => {\r\n          if (!log.user) return;\r\n\r\n          const actionDate = new Date(log.date);\r\n          const userEmail = log.user.email;\r\n\r\n          if (actionDate >= today) {\r\n            if (!actionsByUser[userEmail]) {\r\n              actionsByUser[userEmail] = {\r\n                count: 0,\r\n                user: log.user\r\n              };\r\n            }\r\n            actionsByUser[userEmail].count++;\r\n          }\r\n        });\r\n\r\n        allUserActions.value = actionsByUser;\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement des actions totales:', error);\r\n      }\r\n    };\r\n\r\n    const loadFamilles = async () => {\r\n      try {\r\n        const response = await api.get('/history/familles');\r\n        familles.value = response.data.familles || [];\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement des familles:', error);\r\n      }\r\n    };\r\n\r\n    const loadHistory = async (page = 1) => {\r\n      try {\r\n        loading.value = true;\r\n        currentPage.value = page; // Mettre à jour la page courante avant la requête\r\n\r\n        const params = new URLSearchParams();\r\n        params.append('page', page);\r\n        params.append('limit', 100); // Demander plus d'actions pour avoir assez d'utilisateurs distincts\r\n\r\n        if (searchTerm.value) {\r\n          params.append('search', searchTerm.value);\r\n        }\r\n\r\n        if (selectedFamilleId.value) {\r\n          params.append('familleId', selectedFamilleId.value);\r\n        }\r\n\r\n        const response = await api.get(`/history?${params.toString()}`);\r\n        logs.value = response.data.histories || [];\r\n        totalPages.value = response.data.pagination.pages;\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement de l\\'historique:', error);\r\n        logs.value = [];\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const debounceSearch = () => {\r\n      if (searchTimeout.value) {\r\n        clearTimeout(searchTimeout.value);\r\n      }\r\n\r\n      searchTimeout.value = setTimeout(() => {\r\n        loadHistory(1); // Retour à la première page lors d'une recherche\r\n      }, 300); // Délai de 300ms pour éviter trop de requêtes\r\n    };\r\n\r\n    // Grouper les logs par utilisateur\r\n    const groupedByUser = computed(() => {\r\n      const grouped = {};\r\n\r\n      logs.value.forEach(log => {\r\n        if (!log.user) return;\r\n\r\n        const userEmail = log.user.email;\r\n        if (!grouped[userEmail]) {\r\n          grouped[userEmail] = {\r\n            user: log.user,\r\n            categories: {}\r\n          };\r\n        }\r\n\r\n        if (!grouped[userEmail].categories[log.action]) {\r\n          grouped[userEmail].categories[log.action] = [];\r\n        }\r\n\r\n        grouped[userEmail].categories[log.action].push(log);\r\n      });\r\n\r\n      // Trier les actions par date pour chaque catégorie\r\n      Object.values(grouped).forEach(user => {\r\n        Object.values(user.categories).forEach(actions => {\r\n          actions.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n        });\r\n      });\r\n\r\n      return Object.values(grouped);\r\n    });\r\n\r\n    // Nombre total de pages d'utilisateurs (7 utilisateurs par page)\r\n    const totalUserPages = computed(() => {\r\n      return Math.ceil(groupedByUser.value.length / usersPerPage);\r\n    });\r\n\r\n    // Utilisateurs à afficher pour la page courante (pagination côté client)\r\n    const displayedUsers = computed(() => {\r\n      const start = (currentPage.value - 1) * usersPerPage;\r\n      const end = start + usersPerPage;\r\n\r\n      // S'assurer que nous avons des utilisateurs avec des actions correspondant au filtre\r\n      const filteredUsers = groupedByUser.value.filter(userHistory => {\r\n        // Si aucun filtre famille n'est appliqué, afficher cet utilisateur\r\n        if (!selectedFamilleId.value) {\r\n          return true;\r\n        }\r\n\r\n        // Vérifier si l'utilisateur a des actions liées à la famille sélectionnée\r\n        // (les logs ont déjà été filtrés par le backend, donc si l'utilisateur apparaît,\r\n        // c'est qu'il a au moins une action liée à cette famille)\r\n        return Object.values(userHistory.categories).some(actions => actions.length > 0);\r\n      });\r\n\r\n      return filteredUsers.slice(start, end);\r\n    });\r\n\r\n    const getTotalActions = (categories) => {\r\n      return Object.values(categories).reduce((total, actions) => total + actions.length, 0);\r\n    };\r\n\r\n    const getActionsToday = (userEmail) => {\r\n      return allUserActions.value[userEmail]?.count || 0;\r\n    };\r\n\r\n    const toggleUser = (userEmail) => {\r\n      const index = expandedUsers.value.indexOf(userEmail);\r\n      if (index === -1) {\r\n        expandedUsers.value.push(userEmail);\r\n      } else {\r\n        expandedUsers.value.splice(index, 1);\r\n        // Fermer toutes les catégories de cet utilisateur\r\n        expandedCategories.value.delete(userEmail);\r\n      }\r\n    };\r\n\r\n    const toggleCategory = (userEmail, category) => {\r\n      if (!expandedCategories.value.has(userEmail)) {\r\n        expandedCategories.value.set(userEmail, new Set());\r\n      }\r\n\r\n      const userCategories = expandedCategories.value.get(userEmail);\r\n      if (userCategories.has(category)) {\r\n        userCategories.delete(category);\r\n      } else {\r\n        userCategories.add(category);\r\n      }\r\n    };\r\n\r\n    const isExpandedCategory = (userEmail, category) => {\r\n      return expandedCategories.value.has(userEmail) &&\r\n          expandedCategories.value.get(userEmail).has(category);\r\n    };\r\n\r\n    const getCategoryIcon = (action) => {\r\n      const icons = {\r\n        // Utilisateurs\r\n        'connexion': 'fas fa-sign-in-alt',\r\n        'deconnexion': 'fas fa-sign-out-alt',\r\n        'creation_utilisateur': 'fas fa-user-plus',\r\n        'modification_utilisateur': 'fas fa-user-edit',\r\n        'suppression_utilisateur': 'fas fa-user-minus',\r\n        'validation_compte': 'fas fa-user-check',\r\n        'ajout_points': 'fas fa-star',\r\n\r\n        // Familles\r\n        'creation_famille': 'fas fa-users-cog',\r\n        'modification_famille': 'fas fa-users-cog',\r\n        'suppression_famille': 'fas fa-users-slash',\r\n        'ajout_membre_famille': 'fas fa-user-plus',\r\n        'retrait_membre_famille': 'fas fa-user-minus',\r\n\r\n        // Recettes\r\n        'creation_recette': 'fas fa-utensils',\r\n        'modification_recette': 'fas fa-edit',\r\n        'suppression_recette': 'fas fa-trash-alt',\r\n        'notation_recette': 'fas fa-star',\r\n        'commentaire_recette': 'fas fa-comment',\r\n\r\n        // Objets/Ingrédients\r\n        'creation_objet': 'fas fa-plus-circle',\r\n        'modification_objet': 'fas fa-edit',\r\n        'suppression_objet': 'fas fa-trash-alt',\r\n        'utilisation_objet': 'fas fa-hand-pointer'\r\n      };\r\n      return icons[action] || 'fas fa-history';\r\n    };\r\n\r\n    const formatDate = (date) => {\r\n      return new Date(date).toLocaleString('fr-FR', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    };\r\n\r\n    const formatAction = (action) => {\r\n      const actions = {\r\n        // Utilisateurs\r\n        'connexion': 'Connexions',\r\n        'deconnexion': 'Déconnexions',\r\n        'creation_utilisateur': 'Créations d\\'utilisateurs',\r\n        'modification_utilisateur': 'Modifications d\\'utilisateurs',\r\n        'suppression_utilisateur': 'Suppressions d\\'utilisateurs',\r\n        'validation_compte': 'Validations de compte',\r\n        'ajout_points': 'Ajouts de points',\r\n\r\n        // Familles\r\n        'creation_famille': 'Créations de familles',\r\n        'modification_famille': 'Modifications de familles',\r\n        'suppression_famille': 'Suppressions de familles',\r\n        'ajout_membre_famille': 'Ajouts de membres',\r\n        'retrait_membre_famille': 'Retraits de membres',\r\n\r\n        // Recettes\r\n        'creation_recette': 'Créations de recettes',\r\n        'modification_recette': 'Modifications de recettes',\r\n        'suppression_recette': 'Suppressions de recettes',\r\n        'notation_recette': 'Notations de recettes',\r\n        'commentaire_recette': 'Commentaires de recettes',\r\n\r\n        // Objets/Ingrédients\r\n        'creation_objet': 'Créations d\\'objets',\r\n        'modification_objet': 'Modifications d\\'objets',\r\n        'suppression_objet': 'Suppressions d\\'objets',\r\n        'utilisation_objet': 'Utilisations d\\'objets'\r\n      };\r\n      return actions[action] || action;\r\n    };\r\n\r\n    const getActionClass = (action) => {\r\n      const actionType = action.split('_')[0];\r\n      const classes = {\r\n        'connexion': 'action-connexion',\r\n        'deconnexion': 'action-deconnexion',\r\n        'creation': 'action-creation',\r\n        'modification': 'action-modification',\r\n        'suppression': 'action-suppression',\r\n        'ajout': 'action-ajout',\r\n        'retrait': 'action-retrait',\r\n        'validation': 'action-validation',\r\n        'notation': 'action-notation',\r\n        'commentaire': 'action-commentaire',\r\n        'utilisation': 'action-utilisation'\r\n      };\r\n      return classes[actionType] || '';\r\n    };\r\n\r\n    const formatDetailKey = (key) => {\r\n      return key.charAt(0).toUpperCase() + key.slice(1).replace(/_/g, ' ');\r\n    };\r\n\r\n    const formatUserAgent = (userAgent) => {\r\n      if (!userAgent) return '';\r\n      return userAgent.split(' ')[0];\r\n    };\r\n\r\n    const changePage = (page) => {\r\n      if (page >= 1 && page <= totalUserPages.value) {\r\n        currentPage.value = page;\r\n\r\n        // Si on change de page, on ferme tous les utilisateurs développés\r\n        expandedUsers.value = [];\r\n        expandedCategories.value = new Map();\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      loadAllTodayActions(); // Charger d'abord toutes les actions d'aujourd'hui\r\n      loadHistory();\r\n      loadFamilles();\r\n    });\r\n\r\n    // Réinitialiser la page quand les filtres changent\r\n    watch([selectedFamilleId, searchTerm], () => {\r\n      if (currentPage.value !== 1) {\r\n        currentPage.value = 1;\r\n      }\r\n      // Recharger l'historique quand les filtres changent\r\n      loadHistory(1);\r\n    });\r\n\r\n    return {\r\n      logs,\r\n      allUserActions,\r\n      currentPage,\r\n      totalPages,\r\n      totalUserPages,\r\n      groupedByUser,\r\n      displayedUsers,\r\n      expandedUsers,\r\n      defaultAvatar,\r\n      formatDate,\r\n      formatAction,\r\n      getActionClass,\r\n      getCategoryIcon,\r\n      formatDetailKey,\r\n      formatUserAgent,\r\n      toggleUser,\r\n      toggleCategory,\r\n      isExpandedCategory,\r\n      getTotalActions,\r\n      getActionsToday,\r\n      changePage,\r\n      searchTerm,\r\n      selectedFamilleId,\r\n      familles,\r\n      debounceSearch,\r\n      loading,\r\n      getPhotoUrl\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.history-container {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-title {\r\n  color: #2c5038;\r\n  margin-bottom: 30px;\r\n  font-size: 2rem;\r\n}\r\n\r\n/* Styles pour les filtres */\r\n.filters-container {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.search-box {\r\n  position: relative;\r\n  flex: 1;\r\n  min-width: 200px;\r\n}\r\n\r\n.search-box input {\r\n  width: 100%;\r\n  padding: 10px 15px 10px 40px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 30px;\r\n  font-size: 1rem;\r\n  outline: none;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.search-box input:focus {\r\n  border-color: #2c5038;\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  left: 15px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #666;\r\n}\r\n\r\n.family-filter {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.family-filter label {\r\n  font-weight: bold;\r\n  color: #2c5038;\r\n}\r\n\r\n.family-filter select {\r\n  padding: 8px 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  outline: none;\r\n  background-color: white;\r\n  font-size: 1rem;\r\n  min-width: 150px;\r\n}\r\n\r\n.users-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.user-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.user-header {\r\n  padding: 15px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.user-header:hover {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.user-avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.user-details h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  color: #2c5038;\r\n}\r\n\r\n.action-count {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.categories-container {\r\n  padding: 15px;\r\n  background-color: white;\r\n}\r\n\r\n.category-section {\r\n  margin-bottom: 15px;\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.category-header {\r\n  padding: 12px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n  background-color: #fff;\r\n}\r\n\r\n.category-header:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.category-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.category-icon {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-size: 1rem;\r\n}\r\n\r\n.category-details h4 {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n  color: #2c5038;\r\n}\r\n\r\n.category-count {\r\n  font-size: 0.8rem;\r\n  color: #666;\r\n}\r\n\r\n.category-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.last-update-date {\r\n  font-size: 0.8rem;\r\n  color: #888;\r\n  font-style: italic;\r\n}\r\n\r\n.expand-button {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.expand-button.expanded {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.timeline-container {\r\n  padding: 15px;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.timeline {\r\n  position: relative;\r\n  padding-left: 30px;\r\n}\r\n\r\n.timeline::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 2px;\r\n  background-color: #ddd;\r\n}\r\n\r\n.timeline-item {\r\n  position: relative;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.timeline-point {\r\n  position: absolute;\r\n  left: -34px;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  border: 2px solid white;\r\n}\r\n\r\n.timeline-content {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n}\r\n\r\n.action-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.action-date {\r\n  font-size: 0.9em;\r\n  color: #666;\r\n}\r\n\r\n.action-details {\r\n  margin: 10px 0;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.detail-item {\r\n  margin: 5px 0;\r\n}\r\n\r\n.detail-label {\r\n  font-weight: 500;\r\n  color: #666;\r\n}\r\n\r\n.action-meta {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  gap: 15px;\r\n  font-size: 0.85em;\r\n  color: #666;\r\n}\r\n\r\n.meta-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n/* Classes pour les différentes actions */\r\n.action-connexion {\r\n  color: #4a6fa5;\r\n  background-color: rgba(74, 111, 165, 0.1);\r\n}\r\n\r\n.action-deconnexion {\r\n  color: #6c757d;\r\n  background-color: rgba(108, 117, 125, 0.1);\r\n}\r\n\r\n.action-creation {\r\n  color: #28a745;\r\n  background-color: rgba(40, 167, 69, 0.1);\r\n}\r\n\r\n.action-modification {\r\n  color: #17a2b8;\r\n  background-color: rgba(23, 162, 184, 0.1);\r\n}\r\n\r\n.action-suppression {\r\n  color: #dc3545;\r\n  background-color: rgba(220, 53, 69, 0.1);\r\n}\r\n\r\n.action-ajout, .action-points {\r\n  color: #ffc107;\r\n  background-color: rgba(255, 193, 7, 0.1);\r\n}\r\n\r\n.action-retrait {\r\n  color: #fd7e14;\r\n  background-color: rgba(253, 126, 20, 0.1);\r\n}\r\n\r\n.action-validation {\r\n  color: #20c997;\r\n  background-color: rgba(32, 201, 151, 0.1);\r\n}\r\n\r\n.action-notation {\r\n  color: #6f42c1;\r\n  background-color: rgba(111, 66, 193, 0.1);\r\n}\r\n\r\n.action-commentaire {\r\n  color: #007bff;\r\n  background-color: rgba(0, 123, 255, 0.1);\r\n}\r\n\r\n.action-utilisation {\r\n  color: #6610f2;\r\n  background-color: rgba(102, 16, 242, 0.1);\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.page-btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background-color: #2c5038;\r\n  color: white;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.page-btn:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.page-info {\r\n  color: #666;\r\n}\r\n\r\n/* Animation pour l'expansion */\r\n.timeline-container {\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .history-container {\r\n    padding: 10px;\r\n  }\r\n\r\n  .user-header,\r\n  .category-header {\r\n    padding: 10px;\r\n  }\r\n\r\n  .timeline-container {\r\n    padding: 10px;\r\n  }\r\n\r\n  .action-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 5px;\r\n  }\r\n\r\n  .action-meta {\r\n    flex-direction: column;\r\n  }\r\n}\r\n\r\n.no-results {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  text-align: center;\r\n  margin: 20px 0;\r\n  color: #666;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.filtered-indication {\r\n  font-size: 0.8rem;\r\n  font-style: italic;\r\n  color: #666;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}